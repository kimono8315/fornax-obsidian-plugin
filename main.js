/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => FornaxPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/constants.ts
var DEFAULT_SETTINGS = {
  // No settings currently needed
};
var VIEW_TYPE_FORNAX = "fornax-telescope";

// src/engine/fornax-engine.ts
var import_obsidian = require("obsidian");
var FornaxEngine = class {
  constructor(app, settings) {
    this.app = app;
    this.settings = settings;
  }
  async toggleTelescopeMode(file) {
    new import_obsidian.Notice("Fornax telescope mode activated!");
  }
  async parseDocument(content) {
    const rawParagraphs = content.split("\n\n").filter((p) => p.trim());
    const sentences = rawParagraphs.map((para) => {
      const lines = para.split("\n");
      return lines.filter((line) => {
        const trimmed = line.trim();
        return trimmed && !(trimmed.startsWith("%%") && trimmed.endsWith("%%"));
      });
    });
    const paragraphs = sentences.map((sentenceArray) => sentenceArray.join("\n"));
    const edits = await this.parseExistingEdits(content);
    const sections = this.parseSectionStructure(rawParagraphs);
    return { paragraphs, sentences, edits, rawParagraphs, sections };
  }
  parseSectionStructure(rawParagraphs) {
    const sections = [];
    let currentSection = null;
    rawParagraphs.forEach((paragraph, index) => {
      const trimmed = paragraph.trim();
      if (trimmed.startsWith("##") && !trimmed.startsWith("###")) {
        if (currentSection) {
          currentSection.endParagraphIndex = index - 1;
          sections.push(currentSection);
        }
        currentSection = {
          heading: trimmed.replace(/^##\s*/, ""),
          level: 2,
          paragraphs: [],
          startParagraphIndex: index,
          endParagraphIndex: index
        };
      } else if (trimmed.startsWith("###")) {
        if (currentSection) {
          currentSection.paragraphs.push(paragraph);
        }
      } else if (currentSection) {
        currentSection.paragraphs.push(paragraph);
      }
    });
    if (currentSection) {
      currentSection.endParagraphIndex = rawParagraphs.length - 1;
      sections.push(currentSection);
    }
    return sections;
  }
  async parseExistingEdits(content) {
    const commentRegex = /<!--\s*FORNAX_EDIT:(.+?)\s*-->/g;
    const edits = [];
    let match;
    while ((match = commentRegex.exec(content)) !== null) {
      try {
        const editData = JSON.parse(match[1]);
        edits.push(editData);
      } catch (e) {
        console.warn("Failed to parse Fornax edit:", match[1]);
      }
    }
    return edits;
  }
  async saveEdit(file, edit) {
    const content = await this.app.vault.read(file);
    const comment = `<!-- FORNAX_EDIT:${JSON.stringify(edit)} -->`;
  }
};

// src/ui/fornax-view.ts
var import_obsidian3 = require("obsidian");

// src/ui/telescope-overlay.ts
var import_obsidian2 = require("obsidian");
var TelescopeOverlay = class {
  // For auto-scrolling to specific elements
  constructor(container, plugin) {
    this.currentZoom = "document";
    this.currentDocument = null;
    // FornaxPlugin when extracted
    this.isInternalUpdate = false;
    this.targetScrollElement = null;
    this.container = container;
    this.plugin = plugin;
    this.createInterface();
  }
  createInterface() {
    this.addStyles();
    this.container.addClass("fornax-telescope");
    this.controlsEl = this.container.createEl("div", { cls: "fornax-zoom-controls" });
    this.createZoomControls();
    this.contentEl = this.container.createEl("div", { cls: "fornax-content" });
    this.contentEl.createEl("div", {
      cls: "fornax-placeholder",
      text: "Open a markdown document to begin telescopic editing"
    });
  }
  createZoomControls() {
    const zoomLevels = [
      { level: "document", label: "Document", icon: "\u{1F4C4}" },
      { level: "paragraphs", label: "Paragraphs", icon: "\u{1F4DD}" },
      { level: "sentences", label: "Sentences", icon: "\u270F\uFE0F" }
    ];
    zoomLevels.forEach(({ level, label, icon }) => {
      const btn = this.controlsEl.createEl("button", {
        cls: `fornax-zoom-btn ${level === this.currentZoom ? "active" : ""}`,
        text: `${icon} ${label}`
      });
      btn.onclick = () => this.setZoomLevel(level);
    });
  }
  async loadDocument(file) {
    if (this.isInternalUpdate) {
      this.isInternalUpdate = false;
      return;
    }
    const content = await this.plugin.app.vault.read(file);
    this.currentDocument = await this.plugin.engine.parseDocument(content);
    this.renderCurrentZoom();
  }
  setZoomLevel(level, targetElement) {
    var _a;
    this.currentZoom = level;
    this.targetScrollElement = targetElement || null;
    this.controlsEl.querySelectorAll(".fornax-zoom-btn").forEach((btn) => {
      btn.removeClass("active");
    });
    (_a = this.controlsEl.querySelector(`button:nth-child(${level === "document" ? 1 : level === "paragraphs" ? 2 : 3})`)) == null ? void 0 : _a.addClass("active");
    this.renderCurrentZoom();
  }
  scrollToTarget() {
    if (!this.targetScrollElement)
      return;
    setTimeout(() => {
      const targetEl = this.contentEl.querySelector(this.targetScrollElement);
      if (targetEl) {
        targetEl.scrollIntoView({
          behavior: "smooth",
          block: "start"
        });
      }
      this.targetScrollElement = null;
    }, 100);
  }
  renderCurrentZoom() {
    if (!this.currentDocument)
      return;
    this.contentEl.empty();
    switch (this.currentZoom) {
      case "document":
        this.renderDocumentView();
        break;
      case "paragraphs":
        this.renderParagraphView();
        break;
      case "sentences":
        this.renderSentenceView();
        break;
    }
    this.scrollToTarget();
  }
  renderDocumentView() {
    const docView = this.contentEl.createEl("div", { cls: "fornax-document-view" });
    const overview = docView.createEl("div", { cls: "fornax-overview" });
    const documentTitle = this.getDocumentTitle();
    overview.createEl("h3", {
      text: documentTitle,
      cls: "fornax-document-title"
    });
    const stats = overview.createEl("div", { cls: "fornax-stats" });
    const nonHeadingParagraphs = this.currentDocument.paragraphs.filter((para) => {
      return !para.trim().startsWith("#");
    });
    stats.createEl("span", {
      cls: "stat",
      text: `${nonHeadingParagraphs.length} paragraphs`
    });
    const totalSentences = this.currentDocument.sentences.reduce((sum, para) => {
      const nonHeadingSentences = para.filter((sentence) => !sentence.trim().startsWith("#"));
      return sum + nonHeadingSentences.length;
    }, 0);
    stats.createEl("span", {
      cls: "stat",
      text: `${totalSentences} sentences`
    });
    if (this.currentDocument.sections && this.currentDocument.sections.length > 0) {
      const sectionsContainer = docView.createEl("div", { cls: "fornax-sections-container" });
      this.renderSectionBlocks(sectionsContainer);
    } else {
      const miniPreviews = docView.createEl("div", { cls: "fornax-mini-paragraphs" });
      this.currentDocument.paragraphs.forEach((para, i) => {
        const miniPara = miniPreviews.createEl("div", {
          cls: "fornax-mini-paragraph",
          text: para.slice(0, 100) + (para.length > 100 ? "..." : "")
        });
        miniPara.onclick = () => {
          this.setZoomLevel("paragraphs", `[data-para-index="${i}"]`);
        };
      });
    }
  }
  renderSectionBlocks(container) {
    if (!this.currentDocument.sections)
      return;
    this.currentDocument.sections.forEach((section, sectionIndex) => {
      const sectionBlock = container.createEl("div", {
        cls: "fornax-section-block",
        attr: { "data-section-index": sectionIndex.toString() }
      });
      const sectionHeader = sectionBlock.createEl("div", { cls: "fornax-section-header" });
      sectionHeader.createEl("h3", {
        cls: "fornax-section-title",
        text: section.heading
      });
      const sectionContent = sectionBlock.createEl("div", { cls: "fornax-section-content" });
      section.paragraphs.forEach((paragraph, paragraphIndex) => {
        const cleanParagraph = this.cleanParagraphForPreview(paragraph);
        if (paragraph.trim().startsWith("###")) {
          const subheading = sectionContent.createEl("div", {
            cls: "fornax-third-level-heading",
            text: paragraph.trim().replace(/^###\s*/, "")
          });
        } else if (cleanParagraph.trim()) {
          const sentences = cleanParagraph.split("\n").filter((s) => s.trim());
          if (sentences.length > 0) {
            const paragraphPreview = sectionContent.createEl("div", {
              cls: "fornax-paragraph-preview",
              text: sentences[0].slice(0, 80) + (sentences[0].length > 80 ? "..." : "")
            });
          }
        }
      });
      sectionBlock.onclick = () => {
        const sectionStartIndex = section.startParagraphIndex;
        this.setZoomLevel("paragraphs", `[data-para-index="${sectionStartIndex}"]`);
      };
    });
  }
  cleanParagraphForPreview(paragraph) {
    const lines = paragraph.split("\n");
    return lines.filter((line) => {
      const trimmed = line.trim();
      return trimmed && !(trimmed.startsWith("%%") && trimmed.endsWith("%%"));
    }).join("\n");
  }
  renderParagraphView() {
    const paraView = this.contentEl.createEl("div", { cls: "fornax-paragraph-view" });
    console.log("Rendering paragraph view with", this.currentDocument.paragraphs.length, "paragraphs");
    for (let i = 0; i < this.currentDocument.paragraphs.length; i++) {
      const para = this.currentDocument.paragraphs[i];
      console.log("Creating paragraph", i);
      const isHeading = para.trim().startsWith("#");
      if (isHeading) {
        const headingBlock = paraView.createEl("div", {
          cls: "fornax-heading-block",
          attr: { "data-para-index": i.toString() }
        });
        headingBlock.createEl("div", {
          cls: "fornax-heading-content",
          text: para.trim()
        });
      } else {
        const hasComments = this.paragraphHasComments(i);
        const isComplete = this.paragraphIsComplete(i);
        let cssClasses = "fornax-paragraph-block";
        if (hasComments) {
          cssClasses += " fornax-has-alternatives";
        } else if (isComplete) {
          cssClasses += " fornax-paragraph-complete";
        }
        const paraBlock = paraView.createEl("div", {
          cls: cssClasses,
          attr: { "data-para-index": i.toString() }
        });
        const dragHandle = paraBlock.createEl("div", {
          cls: "fornax-drag-handle",
          text: "::"
        });
        console.log("Created drag handle:", dragHandle);
        const content = paraBlock.createEl("div", {
          cls: "fornax-paragraph-content",
          text: para
        });
        paraBlock.createEl("div", {
          cls: "fornax-sentence-count",
          text: `${this.currentDocument.sentences[i].length} sentences`
        });
        const completionBtn = paraBlock.createEl("button", {
          cls: "fornax-completion-btn",
          text: isComplete ? "\u2705" : "\u2610"
        });
        completionBtn.title = isComplete ? "Mark as incomplete" : "Mark as complete";
        completionBtn.onclick = (e) => {
          e.stopPropagation();
          this.toggleParagraphCompletion(i);
        };
        content.onclick = () => {
          const paragraphNumber = this.getParagraphDisplayNumber(i);
          if (paragraphNumber > 0) {
            this.setZoomLevel("sentences", `[data-paragraph-number="${paragraphNumber}"]`);
          } else {
            this.setZoomLevel("sentences");
          }
        };
        console.log("About to call makeDraggable for paragraph", i);
        this.makeDraggable(paraBlock, "paragraph");
      }
    }
  }
  getDocumentTitle() {
    for (const paragraph of this.currentDocument.paragraphs) {
      const trimmed = paragraph.trim();
      if (trimmed.startsWith("# ") && !trimmed.startsWith("##")) {
        return trimmed.slice(2).trim() || "Document";
      }
    }
    for (const sentenceArray of this.currentDocument.sentences) {
      for (const sentence of sentenceArray) {
        const trimmed = sentence.trim();
        if (trimmed.startsWith("# ") && !trimmed.startsWith("##")) {
          return trimmed.slice(2).trim() || "Document";
        }
      }
    }
    return "Document Structure";
  }
  getParagraphDisplayNumber(paragraphIndex) {
    const targetParagraph = this.currentDocument.paragraphs[paragraphIndex];
    if (targetParagraph.trim().startsWith("#")) {
      return 0;
    }
    let displayNumber = 0;
    for (let i = 0; i <= paragraphIndex; i++) {
      const paragraph = this.currentDocument.paragraphs[i];
      if (!paragraph.trim().startsWith("#")) {
        displayNumber++;
      }
    }
    return displayNumber;
  }
  renderSentenceView() {
    const sentView = this.contentEl.createEl("div", { cls: "fornax-sentence-view" });
    let paragraphCounter = 1;
    this.currentDocument.sentences.forEach((sentences, paraIndex) => {
      const hasNonHeadingContent = sentences.some((sentence) => !sentence.trim().startsWith("#"));
      if (hasNonHeadingContent) {
        const paraHeader = sentView.createEl("div", {
          cls: "fornax-paragraph-header",
          text: `Paragraph ${paragraphCounter}`,
          attr: { "data-paragraph-number": paragraphCounter.toString() }
        });
        paragraphCounter++;
      }
      const sentenceContainer = sentView.createEl("div", { cls: "fornax-sentence-container" });
      sentences.forEach((sentence, sentIndex) => {
        const isHeading = sentence.trim().startsWith("#");
        if (isHeading) {
          const headingBlock = sentenceContainer.createEl("div", {
            cls: "fornax-heading-block",
            attr: {
              "data-para-index": paraIndex.toString(),
              "data-sent-index": sentIndex.toString()
            }
          });
          headingBlock.createEl("div", {
            cls: "fornax-heading-content",
            text: sentence.trim()
          });
        } else {
          const hasAlternatives = this.sentenceHasAlternatives(paraIndex, sentIndex);
          const alternativesData = this.getSentenceAlternatives(paraIndex, sentIndex);
          const sentBlock = sentenceContainer.createEl("div", {
            cls: `fornax-sentence-block ${hasAlternatives ? "fornax-has-alternatives" : ""}`,
            attr: {
              "data-para-index": paraIndex.toString(),
              "data-sent-index": sentIndex.toString()
            }
          });
          sentBlock.createEl("div", { cls: "fornax-drag-handle", text: "::" });
          const sentenceRow = sentBlock.createEl("div", { cls: "fornax-sentence-row" });
          const content = sentenceRow.createEl("div", {
            cls: "fornax-sentence-content",
            text: sentence
          });
          const addBtn = sentenceRow.createEl("button", {
            cls: "fornax-add-alternative-btn",
            text: "+"
          });
          addBtn.onclick = () => this.showAddAlternativeInput(sentBlock, paraIndex, sentIndex);
          if (hasAlternatives) {
            const saveBtn = sentenceRow.createEl("button", {
              cls: "fornax-save-final-btn",
              text: "\u2713"
            });
            saveBtn.onclick = () => this.commitSentenceChoice(paraIndex, sentIndex);
          }
          if (hasAlternatives) {
            this.showSentenceAlternatives(sentBlock, paraIndex, sentIndex);
          }
          this.makeDraggable(sentBlock, "sentence");
        }
      });
    });
  }
  makeDraggable(element, type) {
    let isDragging = false;
    let startY = 0;
    let startTop = 0;
    let draggedElement = null;
    const handle = element.querySelector(".fornax-drag-handle");
    const handleMouseDown = (e) => {
      isDragging = true;
      draggedElement = element;
      startY = e.clientY;
      startTop = element.offsetTop;
      element.addClass("dragging");
      document.body.style.cursor = "grabbing";
      e.preventDefault();
    };
    const handleMouseMove = (e) => {
      if (!isDragging || !draggedElement)
        return;
      const deltaY = e.clientY - startY;
      draggedElement.style.transform = `translateY(${deltaY}px)`;
      this.updateDropTargets(e, draggedElement, type);
    };
    const handleMouseUp = async (e) => {
      if (!isDragging || !draggedElement)
        return;
      const dropInfo = this.findDropTarget(e, draggedElement, type);
      isDragging = false;
      draggedElement.removeClass("dragging");
      draggedElement.style.transform = "";
      document.body.style.cursor = "";
      this.clearDropTargets(type);
      if (dropInfo && dropInfo.target !== draggedElement) {
        await this.insertElement(draggedElement, dropInfo.target, dropInfo.position, type, dropInfo.isHeading);
      }
      draggedElement = null;
    };
    handle.addEventListener("mousedown", handleMouseDown);
    document.addEventListener("mousemove", handleMouseMove);
    document.addEventListener("mouseup", handleMouseUp);
  }
  updateDropTargets(e, draggedElement, type) {
    this.clearDropTargets(type);
    const contentTargets = this.contentEl.querySelectorAll(
      type === "paragraph" ? ".fornax-paragraph-block" : ".fornax-sentence-block"
    );
    const headingTargets = this.contentEl.querySelectorAll(".fornax-heading-block");
    const allTargets = [...Array.from(contentTargets), ...Array.from(headingTargets)];
    allTargets.forEach((target) => {
      if (target === draggedElement)
        return;
      const rect = target.getBoundingClientRect();
      const mouseY = e.clientY;
      if (mouseY >= rect.top && mouseY <= rect.bottom) {
        const middleY = rect.top + rect.height / 2;
        const position = mouseY < middleY ? "before" : "after";
        target.addClass("fornax-drop-target");
        target.addClass(`fornax-drop-${position}`);
      }
    });
  }
  findDropTarget(e, draggedElement, type) {
    const contentTargets = this.contentEl.querySelectorAll(
      type === "paragraph" ? ".fornax-paragraph-block" : ".fornax-sentence-block"
    );
    const headingTargets = this.contentEl.querySelectorAll(".fornax-heading-block");
    const allTargets = [...Array.from(contentTargets), ...Array.from(headingTargets)];
    for (let i = 0; i < allTargets.length; i++) {
      const target = allTargets[i];
      if (target === draggedElement)
        continue;
      const rect = target.getBoundingClientRect();
      const mouseY = e.clientY;
      if (mouseY >= rect.top && mouseY <= rect.bottom) {
        const middleY = rect.top + rect.height / 2;
        const position = mouseY < middleY ? "before" : "after";
        const isHeading = target.classList.contains("fornax-heading-block");
        return { target, position, isHeading };
      }
    }
    return null;
  }
  clearDropTargets(type) {
    const contentTargets = this.contentEl.querySelectorAll(
      type === "paragraph" ? ".fornax-paragraph-block" : ".fornax-sentence-block"
    );
    const headingTargets = this.contentEl.querySelectorAll(".fornax-heading-block");
    const allTargets = [...Array.from(contentTargets), ...Array.from(headingTargets)];
    allTargets.forEach((target) => {
      target.removeClass("fornax-drop-target");
      target.removeClass("fornax-drop-before");
      target.removeClass("fornax-drop-after");
    });
  }
  async insertElement(draggedElement, dropTarget, position, type, isHeadingTarget = false) {
    if (type === "paragraph") {
      const draggedIndex = parseInt(draggedElement.getAttribute("data-para-index") || "0");
      let dropIndex = parseInt(dropTarget.getAttribute("data-para-index") || "0");
      const draggedParagraph = this.currentDocument.paragraphs.splice(draggedIndex, 1)[0];
      const draggedSentences = this.currentDocument.sentences.splice(draggedIndex, 1)[0];
      let draggedRawParagraph;
      if (this.currentDocument.rawParagraphs) {
        draggedRawParagraph = this.currentDocument.rawParagraphs.splice(draggedIndex, 1)[0];
      }
      let insertIndex = dropIndex;
      if (isHeadingTarget) {
        if (position === "before") {
          insertIndex = dropIndex;
        } else {
          insertIndex = dropIndex + 1;
        }
      } else {
        if (draggedIndex < dropIndex) {
          insertIndex = dropIndex - 1;
        }
        if (position === "after") {
          insertIndex += 1;
        }
      }
      if (!isHeadingTarget && draggedIndex < dropIndex) {
        insertIndex = Math.max(0, insertIndex);
      }
      this.currentDocument.paragraphs.splice(insertIndex, 0, draggedParagraph);
      this.currentDocument.sentences.splice(insertIndex, 0, draggedSentences);
      if (this.currentDocument.rawParagraphs && draggedRawParagraph) {
        this.currentDocument.rawParagraphs.splice(insertIndex, 0, draggedRawParagraph);
      }
    } else {
      const draggedParaIndex = parseInt(draggedElement.getAttribute("data-para-index") || "0");
      const draggedSentIndex = parseInt(draggedElement.getAttribute("data-sent-index") || "0");
      let dropParaIndex = parseInt(dropTarget.getAttribute("data-para-index") || "0");
      let dropSentIndex = parseInt(dropTarget.getAttribute("data-sent-index") || "0");
      if (isHeadingTarget && position === "after") {
        const draggedSentence = this.currentDocument.sentences[draggedParaIndex][draggedSentIndex];
        let draggedSentenceBlock = [draggedSentence];
        if (this.currentDocument.rawParagraphs) {
          const extractedBlock = this.extractSentenceBlock(this.currentDocument.rawParagraphs[draggedParaIndex], draggedSentIndex);
          if (extractedBlock.length > 0) {
            draggedSentenceBlock = extractedBlock;
          }
          const updatedSourceParagraph = this.removeSentenceBlock(this.currentDocument.rawParagraphs[draggedParaIndex], draggedSentIndex);
          this.currentDocument.rawParagraphs[draggedParaIndex] = updatedSourceParagraph;
        }
        this.currentDocument.sentences[draggedParaIndex].splice(draggedSentIndex, 1);
        const insertParaIndex = dropParaIndex + 1;
        this.currentDocument.sentences.splice(insertParaIndex, 0, [draggedSentence]);
        if (this.currentDocument.rawParagraphs) {
          const newRawParagraph = draggedSentenceBlock.join("\n");
          this.currentDocument.rawParagraphs.splice(insertParaIndex, 0, newRawParagraph);
        }
        this.currentDocument.paragraphs.splice(insertParaIndex, 0, draggedSentence);
        this.syncFromRawParagraphs();
        await this.saveChangesToFile();
        this.renderCurrentZoom();
        return;
      } else if (isHeadingTarget) {
        if (position === "before") {
          dropSentIndex = dropSentIndex;
        }
      }
      if (this.currentDocument.rawParagraphs) {
        if (draggedParaIndex === dropParaIndex) {
          const paragraph = this.currentDocument.rawParagraphs[draggedParaIndex];
          const updatedParagraph = this.moveSentenceBlockWithinParagraph(
            paragraph,
            draggedSentIndex,
            dropSentIndex,
            position
          );
          this.currentDocument.rawParagraphs[draggedParaIndex] = updatedParagraph;
        } else {
          const sourceParagraph = this.currentDocument.rawParagraphs[draggedParaIndex];
          const targetParagraph = this.currentDocument.rawParagraphs[dropParaIndex];
          const extractedBlock = this.extractSentenceBlock(sourceParagraph, draggedSentIndex);
          const updatedSourceParagraph = this.removeSentenceBlock(sourceParagraph, draggedSentIndex);
          const updatedTargetParagraph = this.insertSentenceBlock(targetParagraph, dropSentIndex, extractedBlock, position);
          this.currentDocument.rawParagraphs[draggedParaIndex] = updatedSourceParagraph;
          this.currentDocument.rawParagraphs[dropParaIndex] = updatedTargetParagraph;
        }
        this.syncFromRawParagraphs();
      } else {
        const draggedSentence = this.currentDocument.sentences[draggedParaIndex].splice(draggedSentIndex, 1)[0];
        let insertIndex = dropSentIndex;
        if (draggedParaIndex === dropParaIndex && draggedSentIndex < dropSentIndex) {
          insertIndex = dropSentIndex - 1;
        }
        if (position === "after") {
          insertIndex += 1;
        }
        this.currentDocument.sentences[dropParaIndex].splice(insertIndex, 0, draggedSentence);
        this.updateParagraphsFromSentences();
      }
    }
    await this.saveChangesToFile();
    this.renderCurrentZoom();
  }
  updateParagraphsFromSentences() {
    this.currentDocument.paragraphs = this.currentDocument.sentences.map(
      (sentenceArray) => sentenceArray.join(" ")
    );
  }
  extractSentenceBlock(paragraph, sentenceIndex) {
    const lines = paragraph.split("\n");
    let sentenceLineIndex = -1;
    let nonCommentLineCount = 0;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line && !(line.startsWith("%%") && line.endsWith("%%"))) {
        if (nonCommentLineCount === sentenceIndex) {
          sentenceLineIndex = i;
          break;
        }
        nonCommentLineCount++;
      }
    }
    if (sentenceLineIndex === -1)
      return [];
    const block = [lines[sentenceLineIndex]];
    for (let i = sentenceLineIndex + 1; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line.startsWith("%%") && line.endsWith("%%")) {
        block.push(lines[i]);
      } else if (line) {
        break;
      } else {
        block.push(lines[i]);
      }
    }
    return block;
  }
  removeSentenceBlock(paragraph, sentenceIndex) {
    const lines = paragraph.split("\n");
    let sentenceLineIndex = -1;
    let nonCommentLineCount = 0;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line && !(line.startsWith("%%") && line.endsWith("%%"))) {
        if (nonCommentLineCount === sentenceIndex) {
          sentenceLineIndex = i;
          break;
        }
        nonCommentLineCount++;
      }
    }
    if (sentenceLineIndex === -1)
      return paragraph;
    const newLines = [...lines];
    let removeCount = 1;
    for (let i = sentenceLineIndex + 1; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line.startsWith("%%") && line.endsWith("%%")) {
        removeCount++;
      } else if (line) {
        break;
      } else {
        removeCount++;
      }
    }
    newLines.splice(sentenceLineIndex, removeCount);
    return newLines.join("\n");
  }
  insertSentenceBlock(paragraph, targetSentenceIndex, block, position) {
    const lines = paragraph.split("\n");
    let insertLineIndex = 0;
    let nonCommentLineCount = 0;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line && !(line.startsWith("%%") && line.endsWith("%%"))) {
        if (nonCommentLineCount === targetSentenceIndex) {
          insertLineIndex = i;
          if (position === "after") {
            let j = i + 1;
            while (j < lines.length) {
              const nextLine = lines[j].trim();
              if (nextLine.startsWith("%%") && nextLine.endsWith("%%")) {
                j++;
              } else if (nextLine) {
                break;
              } else {
                j++;
              }
            }
            insertLineIndex = j;
          }
          break;
        }
        nonCommentLineCount++;
      }
    }
    const newLines = [...lines];
    newLines.splice(insertLineIndex, 0, ...block);
    return newLines.join("\n");
  }
  syncFromRawParagraphs() {
    if (!this.currentDocument.rawParagraphs)
      return;
    const sentences = this.currentDocument.rawParagraphs.map((para) => {
      const lines = para.split("\n");
      return lines.filter((line) => {
        const trimmed = line.trim();
        return trimmed && !(trimmed.startsWith("%%") && trimmed.endsWith("%%"));
      });
    });
    const paragraphs = sentences.map((sentenceArray) => sentenceArray.join("\n"));
    this.currentDocument.sentences = sentences;
    this.currentDocument.paragraphs = paragraphs;
  }
  sentenceHasAlternatives(paraIndex, sentIndex) {
    if (!this.currentDocument.rawParagraphs || paraIndex >= this.currentDocument.rawParagraphs.length) {
      return false;
    }
    const paragraph = this.currentDocument.rawParagraphs[paraIndex];
    const lines = paragraph.split("\n");
    let sentenceLineIndex = -1;
    let nonCommentLineCount = 0;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line && !(line.startsWith("%%") && line.endsWith("%%"))) {
        if (nonCommentLineCount === sentIndex) {
          sentenceLineIndex = i;
          break;
        }
        nonCommentLineCount++;
      }
    }
    if (sentenceLineIndex === -1)
      return false;
    for (let i = sentenceLineIndex + 1; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line.startsWith("%%") && line.endsWith("%%")) {
        const commentContent = line.slice(2, -2).trim();
        if (!commentContent.startsWith("SELECTED:")) {
          return true;
        }
      } else if (line) {
        break;
      }
    }
    return false;
  }
  getSentenceAlternatives(paraIndex, sentIndex) {
    if (!this.currentDocument.rawParagraphs || paraIndex >= this.currentDocument.rawParagraphs.length) {
      return { alternatives: [], selectedIndex: -1, original: "" };
    }
    const paragraph = this.currentDocument.rawParagraphs[paraIndex];
    const lines = paragraph.split("\n");
    let sentenceLineIndex = -1;
    let nonCommentLineCount = 0;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line && !(line.startsWith("%%") && line.endsWith("%%"))) {
        if (nonCommentLineCount === sentIndex) {
          sentenceLineIndex = i;
          break;
        }
        nonCommentLineCount++;
      }
    }
    if (sentenceLineIndex === -1) {
      return { alternatives: [], selectedIndex: -1, original: "" };
    }
    const alternatives = [];
    let selectedIndex = -1;
    let foundOriginal = "";
    const currentSentence = lines[sentenceLineIndex].trim();
    for (let i = sentenceLineIndex + 1; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line.startsWith("%%") && line.endsWith("%%")) {
        const commentContent = line.slice(2, -2).trim();
        if (commentContent.startsWith("SELECTED:")) {
          selectedIndex = parseInt(commentContent.split(":")[1]);
        } else if (commentContent.startsWith("ORIGINAL:")) {
          foundOriginal = commentContent.slice(9).trim();
        } else {
          alternatives.push(commentContent);
        }
      } else if (line) {
        break;
      }
    }
    const original = foundOriginal || currentSentence;
    return { alternatives, selectedIndex, original };
  }
  paragraphHasComments(paraIndex) {
    if (!this.currentDocument.rawParagraphs || paraIndex >= this.currentDocument.rawParagraphs.length) {
      return false;
    }
    const paragraph = this.currentDocument.rawParagraphs[paraIndex];
    const lines = paragraph.split("\n");
    for (const line of lines) {
      const trimmed = line.trim();
      if (trimmed.startsWith("%%") && trimmed.endsWith("%%")) {
        const commentContent = trimmed.slice(2, -2).trim();
        if (commentContent !== "PARAGRAPH_COMPLETE") {
          return true;
        }
      }
    }
    return false;
  }
  paragraphIsComplete(paraIndex) {
    if (!this.currentDocument.rawParagraphs || paraIndex >= this.currentDocument.rawParagraphs.length) {
      return false;
    }
    const paragraph = this.currentDocument.rawParagraphs[paraIndex];
    const lines = paragraph.split("\n");
    for (const line of lines) {
      const trimmed = line.trim();
      if (trimmed.startsWith("%%") && trimmed.endsWith("%%")) {
        const commentContent = trimmed.slice(2, -2).trim();
        if (commentContent === "PARAGRAPH_COMPLETE") {
          return true;
        }
      }
    }
    return false;
  }
  async toggleParagraphCompletion(paraIndex) {
    if (!this.currentDocument.rawParagraphs || paraIndex >= this.currentDocument.rawParagraphs.length) {
      return;
    }
    const hasAlternatives = this.paragraphHasComments(paraIndex);
    const paragraph = this.currentDocument.rawParagraphs[paraIndex];
    const lines = paragraph.split("\n");
    let hasCompletionComment = false;
    let newLines = [];
    for (const line of lines) {
      const trimmed = line.trim();
      if (trimmed.startsWith("%%") && trimmed.endsWith("%%")) {
        const commentContent = trimmed.slice(2, -2).trim();
        if (commentContent === "PARAGRAPH_COMPLETE") {
          hasCompletionComment = true;
          continue;
        }
      }
      newLines.push(line);
    }
    if (hasAlternatives) {
    } else {
      if (!hasCompletionComment) {
        newLines.unshift("%% PARAGRAPH_COMPLETE %%");
      }
    }
    this.currentDocument.rawParagraphs[paraIndex] = newLines.join("\n");
    this.syncFromRawParagraphs();
    await this.saveChangesToFile();
    this.renderCurrentZoom();
  }
  moveSentenceBlockWithinParagraph(paragraph, fromIndex, toIndex, position) {
    const lines = paragraph.split("\n");
    const extractedBlock = this.extractSentenceBlock(paragraph, fromIndex);
    if (extractedBlock.length === 0)
      return paragraph;
    const withoutSource = this.removeSentenceBlock(paragraph, fromIndex);
    let adjustedToIndex = toIndex;
    if (fromIndex < toIndex) {
      adjustedToIndex = toIndex - 1;
    }
    return this.insertSentenceBlock(withoutSource, adjustedToIndex, extractedBlock, position);
  }
  async saveChangesToFile() {
    const currentFile = this.plugin.app.workspace.getActiveFile();
    if (!currentFile)
      return;
    const newContent = this.reconstructMarkdown();
    this.isInternalUpdate = true;
    await this.plugin.app.vault.modify(currentFile, newContent);
  }
  reconstructMarkdown() {
    if (this.currentDocument.rawParagraphs) {
      return this.ensureProperHeadingSpacing(this.currentDocument.rawParagraphs.join("\n\n"));
    }
    const paragraphsWithLines = this.currentDocument.sentences.map((sentenceArray) => {
      return sentenceArray.join("\n");
    });
    return this.ensureProperHeadingSpacing(paragraphsWithLines.join("\n\n"));
  }
  ensureProperHeadingSpacing(content) {
    return content.replace(/([^\n])\n(#{1,6}\s)/g, "$1\n\n$2").replace(/(#{1,6}\s[^\n]*)\n([^#\n])/g, "$1\n\n$2").replace(/\n{3,}/g, "\n\n");
  }
  openSentenceEditor(paraIndex, sentIndex, sentence) {
    const modal = new SentenceEditModal(this.plugin.app, sentence, paraIndex, sentIndex, this);
    modal.open();
  }
  showSentenceAlternatives(sentBlock, paraIndex, sentIndex) {
    const alternativesData = this.getSentenceAlternatives(paraIndex, sentIndex);
    const { alternatives, selectedIndex, original } = alternativesData;
    const alternativesContainer = sentBlock.createEl("div", { cls: "fornax-alternatives-container" });
    const currentSentence = this.currentDocument.sentences[paraIndex][sentIndex];
    if (original && original !== currentSentence) {
      const originalItem = this.createAlternativeItem(alternativesContainer, original, paraIndex, sentIndex, -1, selectedIndex === -1);
      originalItem.addClass("fornax-original-sentence");
    }
    alternatives.forEach((alternative, altIndex) => {
      this.createAlternativeItem(alternativesContainer, alternative, paraIndex, sentIndex, altIndex, selectedIndex === altIndex);
    });
  }
  createAlternativeItem(container, text, paraIndex, sentIndex, altIndex, isSelected) {
    const item = container.createEl("div", { cls: "fornax-alternative-item" });
    const radio = item.createEl("input", {
      type: "radio",
      cls: "fornax-alternative-radio",
      attr: {
        name: `sentence-${paraIndex}-${sentIndex}`,
        value: altIndex.toString()
      }
    });
    if (isSelected) {
      radio.checked = true;
    }
    radio.onchange = () => this.selectSentenceAlternative(paraIndex, sentIndex, altIndex);
    const textEl = item.createEl("div", {
      cls: "fornax-alternative-text",
      text
    });
    if (altIndex >= 0) {
      const deleteBtn = item.createEl("button", {
        cls: "fornax-delete-alternative-btn",
        text: "\xD7"
      });
      deleteBtn.onclick = () => this.deleteAlternative(paraIndex, sentIndex, altIndex);
    }
    return item;
  }
  showAddAlternativeInput(sentBlock, paraIndex, sentIndex) {
    const existingInput = sentBlock.querySelector(".fornax-add-input");
    if (existingInput)
      return;
    const sentenceRow = sentBlock.querySelector(".fornax-sentence-row");
    const inputContainer = sentBlock.createEl("div", { cls: "fornax-add-input" });
    const textArea = inputContainer.createEl("textarea", {
      cls: "fornax-alternative-input",
      attr: { placeholder: "Enter new alternative..." }
    });
    const buttonContainer = inputContainer.createEl("div", { cls: "fornax-input-buttons" });
    const saveBtn = buttonContainer.createEl("button", {
      cls: "fornax-save-alternative-btn",
      text: "Save"
    });
    const cancelBtn = buttonContainer.createEl("button", {
      cls: "fornax-cancel-alternative-btn",
      text: "Cancel"
    });
    saveBtn.onclick = () => this.saveNewAlternative(paraIndex, sentIndex, textArea.value, sentBlock);
    cancelBtn.onclick = () => inputContainer.remove();
    textArea.focus();
  }
  async commitSentenceChoice(paraIndex, sentIndex) {
    if (!this.currentDocument.rawParagraphs)
      return;
    const paragraph = this.currentDocument.rawParagraphs[paraIndex];
    const lines = paragraph.split("\n");
    let sentenceLineIndex = -1;
    let nonCommentLineCount = 0;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line && !(line.startsWith("%%") && line.endsWith("%%"))) {
        if (nonCommentLineCount === sentIndex) {
          sentenceLineIndex = i;
          break;
        }
        nonCommentLineCount++;
      }
    }
    if (sentenceLineIndex === -1)
      return;
    const indicesToRemove = [];
    for (let i = sentenceLineIndex + 1; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line.startsWith("%%") && line.endsWith("%%")) {
        const commentContent = line.slice(2, -2).trim();
        if (commentContent.startsWith("ORIGINAL:") || commentContent.startsWith("SELECTED:") || !commentContent.startsWith("PARAGRAPH_COMPLETE") && commentContent !== "PARAGRAPH_COMPLETE") {
          indicesToRemove.push(i);
        }
      } else if (line) {
        break;
      }
    }
    for (let i = indicesToRemove.length - 1; i >= 0; i--) {
      lines.splice(indicesToRemove[i], 1);
    }
    this.currentDocument.rawParagraphs[paraIndex] = lines.join("\n");
    this.syncFromRawParagraphs();
    await this.saveChangesToFile();
    this.renderCurrentZoom();
  }
  async selectSentenceAlternative(paraIndex, sentIndex, altIndex) {
    var _a, _b;
    const alternativesData = this.getSentenceAlternatives(paraIndex, sentIndex);
    const { alternatives, original } = alternativesData;
    if (!this.currentDocument.rawParagraphs)
      return;
    let newSentenceText = "";
    if (altIndex === -1) {
      newSentenceText = original;
    } else if (altIndex < alternatives.length) {
      newSentenceText = alternatives[altIndex];
    }
    if (!newSentenceText)
      return;
    const paragraph = this.currentDocument.rawParagraphs[paraIndex];
    const lines = paragraph.split("\n");
    let sentenceLineIndex = -1;
    let nonCommentLineCount = 0;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line && !(line.startsWith("%%") && line.endsWith("%%"))) {
        if (nonCommentLineCount === sentIndex) {
          sentenceLineIndex = i;
          break;
        }
        nonCommentLineCount++;
      }
    }
    if (sentenceLineIndex !== -1) {
      const originalLine = lines[sentenceLineIndex];
      const leadingSpaces = ((_a = originalLine.match(/^\s*/)) == null ? void 0 : _a[0]) || "";
      const currentSentenceText = originalLine.trim();
      let originalCommentExists = false;
      let selectedCommentFound = false;
      let selectedCommentIndex = -1;
      for (let i = sentenceLineIndex + 1; i < lines.length; i++) {
        const line = lines[i].trim();
        if (line.startsWith("%%") && line.endsWith("%%")) {
          const commentContent = line.slice(2, -2).trim();
          if (commentContent.startsWith("ORIGINAL:")) {
            originalCommentExists = true;
          } else if (commentContent.startsWith("SELECTED:")) {
            selectedCommentFound = true;
            selectedCommentIndex = i;
          }
        } else if (line) {
          break;
        }
      }
      if (!originalCommentExists && altIndex !== -1) {
        const commentIndent = leadingSpaces;
        lines.splice(sentenceLineIndex + 1, 0, `${commentIndent}%% ORIGINAL: ${currentSentenceText} %%`);
        if (selectedCommentIndex !== -1) {
          selectedCommentIndex++;
        }
      }
      lines[sentenceLineIndex] = leadingSpaces + newSentenceText;
      if (selectedCommentFound && selectedCommentIndex !== -1) {
        const commentLeadingSpaces = ((_b = lines[selectedCommentIndex].match(/^\s*/)) == null ? void 0 : _b[0]) || "";
        lines[selectedCommentIndex] = `${commentLeadingSpaces}%% SELECTED:${altIndex} %%`;
      } else if (altIndex !== -1) {
        const commentIndent = leadingSpaces;
        const insertIndex = originalCommentExists ? sentenceLineIndex + 2 : sentenceLineIndex + 1;
        lines.splice(insertIndex, 0, `${commentIndent}%% SELECTED:${altIndex} %%`);
      }
      if (altIndex === -1 && selectedCommentFound && selectedCommentIndex !== -1) {
        lines.splice(selectedCommentIndex, 1);
      }
      this.currentDocument.rawParagraphs[paraIndex] = lines.join("\n");
      this.syncFromRawParagraphs();
      await this.saveChangesToFile();
      this.renderCurrentZoom();
    }
  }
  async deleteAlternative(paraIndex, sentIndex, altIndex) {
    if (!this.currentDocument.rawParagraphs || altIndex < 0)
      return;
    const paragraph = this.currentDocument.rawParagraphs[paraIndex];
    const lines = paragraph.split("\n");
    let sentenceLineIndex = -1;
    let nonCommentLineCount = 0;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line && !(line.startsWith("%%") && line.endsWith("%%"))) {
        if (nonCommentLineCount === sentIndex) {
          sentenceLineIndex = i;
          break;
        }
        nonCommentLineCount++;
      }
    }
    if (sentenceLineIndex === -1)
      return;
    let currentAltIndex = 0;
    for (let i = sentenceLineIndex + 1; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line.startsWith("%%") && line.endsWith("%%")) {
        const commentContent = line.slice(2, -2).trim();
        if (!commentContent.startsWith("SELECTED:") && !commentContent.startsWith("ORIGINAL:")) {
          if (currentAltIndex === altIndex) {
            lines.splice(i, 1);
            break;
          }
          currentAltIndex++;
        }
      } else if (line) {
        break;
      }
    }
    this.currentDocument.rawParagraphs[paraIndex] = lines.join("\n");
    this.syncFromRawParagraphs();
    await this.saveChangesToFile();
    this.renderCurrentZoom();
  }
  async saveNewAlternative(paraIndex, sentIndex, newText, sentBlock) {
    var _a;
    if (!newText.trim() || !this.currentDocument.rawParagraphs)
      return;
    const paragraph = this.currentDocument.rawParagraphs[paraIndex];
    const lines = paragraph.split("\n");
    let sentenceLineIndex = -1;
    let nonCommentLineCount = 0;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line && !(line.startsWith("%%") && line.endsWith("%%"))) {
        if (nonCommentLineCount === sentIndex) {
          sentenceLineIndex = i;
          break;
        }
        nonCommentLineCount++;
      }
    }
    if (sentenceLineIndex === -1)
      return;
    let insertIndex = sentenceLineIndex + 1;
    for (let i = sentenceLineIndex + 1; i < lines.length; i++) {
      const line = lines[i].trim();
      if (line.startsWith("%%") && line.endsWith("%%")) {
        insertIndex = i + 1;
      } else if (line) {
        break;
      }
    }
    const commentIndent = ((_a = lines[sentenceLineIndex].match(/^\s*/)) == null ? void 0 : _a[0]) || "";
    lines.splice(insertIndex, 0, `${commentIndent}%% ${newText.trim()} %%`);
    this.currentDocument.rawParagraphs[paraIndex] = lines.join("\n");
    this.syncFromRawParagraphs();
    await this.saveChangesToFile();
    const inputContainer = sentBlock.querySelector(".fornax-add-input");
    if (inputContainer) {
      inputContainer.remove();
    }
    this.renderCurrentZoom();
  }
  addStyles() {
    if (!document.getElementById("fornax-styles")) {
      const style = document.createElement("style");
      style.id = "fornax-styles";
      style.textContent = `
				.fornax-telescope {
					height: 100%;
					display: flex;
					flex-direction: column;
					font-family: var(--font-interface);
				}

				.fornax-zoom-controls {
					display: flex;
					gap: 8px;
					padding: 16px;
					background: var(--background-secondary);
					border-bottom: 1px solid var(--background-modifier-border);
				}

				.fornax-zoom-btn {
					padding: 8px 16px;
					border: 1px solid var(--background-modifier-border);
					background: var(--background-primary);
					color: var(--text-normal);
					border-radius: 6px;
					cursor: pointer;
					transition: all 0.2s ease;
				}

				.fornax-zoom-btn:hover {
					background: var(--background-secondary);
				}

				.fornax-zoom-btn.active {
					background: var(--interactive-accent);
					color: var(--text-on-accent);
					border-color: var(--interactive-accent);
				}

				.fornax-content {
					flex: 1;
					overflow-y: auto;
					padding: 16px;
				}

				.fornax-placeholder {
					text-align: center;
					color: var(--text-muted);
					margin-top: 40px;
				}

				.fornax-paragraph-block, .fornax-sentence-block {
					position: relative;
					margin: 12px 0 12px 32px;
					padding: 16px;
					background: var(--background-primary);
					border: 1px solid var(--background-modifier-border);
					border-radius: 8px;
					transition: all 0.2s ease;
				}

				.fornax-paragraph-block:hover, .fornax-sentence-block:hover {
					border-color: var(--interactive-accent);
					box-shadow: 0 2px 8px var(--background-modifier-box-shadow);
				}

				.fornax-drag-handle {
					position: absolute;
					left: -20px;
					top: 50%;
					transform: translateY(-50%);
					color: var(--text-muted);
					cursor: grab;
					font-size: 16px;
					opacity: 0.6;
					padding: 4px;
					z-index: 10;
					font-weight: bold;
					user-select: none;
				}

				.fornax-paragraph-block:hover .fornax-drag-handle,
				.fornax-sentence-block:hover .fornax-drag-handle {
					opacity: 1;
				}

				.fornax-drag-handle:active {
					cursor: grabbing;
				}

				.fornax-paragraph-content, .fornax-sentence-content {
					cursor: pointer;
					line-height: 1.6;
				}

				.fornax-sentence-count {
					position: absolute;
					top: 8px;
					right: 8px;
					font-size: 11px;
					color: var(--text-muted);
					background: var(--background-secondary);
					padding: 2px 6px;
					border-radius: 10px;
				}

				.fornax-edit-sentence-btn {
					position: absolute;
					top: 8px;
					right: 8px;
					background: none;
					border: none;
					cursor: pointer;
					opacity: 0;
					transition: opacity 0.2s ease;
				}

				.fornax-sentence-block:hover .fornax-edit-sentence-btn {
					opacity: 1;
				}

				.fornax-completion-btn {
					position: absolute;
					bottom: 8px;
					right: 8px;
					background: none;
					border: none;
					cursor: pointer;
					font-size: 14px;
					opacity: 0.7;
					transition: opacity 0.2s ease;
					padding: 2px 4px;
				}

				.fornax-paragraph-block:hover .fornax-completion-btn {
					opacity: 1;
				}

				.fornax-paragraph-header {
					font-weight: 600;
					color: var(--text-accent);
					margin: 20px 0 12px 0;
					padding: 8px 0;
					border-bottom: 1px solid var(--background-modifier-border);
				}

				.fornax-overview {
					margin-bottom: 24px;
				}

				.fornax-document-title {
					color: var(--text-accent);
					font-size: 1.5em;
					font-weight: 600;
					margin-bottom: 8px;
					border-bottom: 2px solid var(--text-accent);
					padding-bottom: 8px;
				}

				.fornax-stats {
					display: flex;
					gap: 16px;
					margin: 12px 0;
				}

				.stat {
					padding: 4px 12px;
					background: var(--background-secondary);
					border-radius: 16px;
					font-size: 13px;
					color: var(--text-muted);
				}

				.fornax-mini-paragraphs {
					display: grid;
					gap: 12px;
				}

				.fornax-mini-paragraph {
					padding: 12px;
					background: var(--background-secondary);
					border-radius: 6px;
					cursor: pointer;
					transition: all 0.2s ease;
					font-size: 14px;
					line-height: 1.4;
				}

				.fornax-mini-paragraph:hover {
					background: var(--background-primary);
					border: 1px solid var(--interactive-accent);
				}

				.fornax-sections-container {
					display: grid;
					gap: 16px;
					margin-top: 16px;
				}

				.fornax-section-block {
					background: var(--background-secondary);
					border: 1px solid var(--background-modifier-border);
					border-radius: 8px;
					padding: 16px;
					cursor: pointer;
					transition: all 0.2s ease;
				}

				.fornax-section-block:hover {
					border-color: var(--interactive-accent);
					box-shadow: 0 2px 8px var(--background-modifier-box-shadow);
				}

				.fornax-section-header {
					border-bottom: 1px solid var(--background-modifier-border);
					margin-bottom: 12px;
					padding-bottom: 8px;
				}

				.fornax-section-title {
					margin: 0;
					color: var(--text-accent);
					font-size: 16px;
					font-weight: 600;
				}

				.fornax-section-content {
					display: flex;
					flex-direction: column;
					gap: 6px;
				}

				.fornax-paragraph-preview {
					color: var(--text-muted);
					font-size: 14px;
					line-height: 1.4;
					padding: 4px 0;
					border-left: 2px solid transparent;
					padding-left: 8px;
				}

				.fornax-third-level-heading {
					color: var(--text-normal);
					font-weight: 500;
					font-size: 14px;
					background: var(--background-primary);
					padding: 4px 8px;
					border-radius: 3px;
					border-left: 2px solid var(--text-accent);
					font-style: italic;
					opacity: 0.9;
				}

				.fornax-heading-block {
					position: relative;
					margin: 12px 0;
					padding: 12px 16px;
					background: var(--background-secondary);
					border: 1px solid var(--background-modifier-border);
					border-radius: 6px;
					opacity: 0.6;
					cursor: default;
				}

				.fornax-heading-content {
					color: var(--text-muted);
					font-weight: 600;
					line-height: 1.4;
					pointer-events: none;
					user-select: none;
				}

				.fornax-heading-block.fornax-drop-target {
					border-color: var(--interactive-accent) !important;
					background: rgba(var(--interactive-accent-rgb, 0, 122, 255), 0.1) !important;
					opacity: 1 !important;
				}

				.fornax-placeholder {
					opacity: 0.3 !important;
					background: var(--interactive-accent) !important;
					border: 2px dashed var(--interactive-accent) !important;
				}

				.dragging {
					z-index: 1000;
					box-shadow: 0 4px 16px var(--background-modifier-box-shadow) !important;
					transform: rotate(2deg);
				}

				.fornax-drop-target {
					border-color: var(--interactive-accent) !important;
					background: var(--interactive-accent-hover) !important;
					transform: scale(1.02);
				}

				.fornax-drop-before {
					border-top: 3px solid var(--interactive-accent) !important;
				}

				.fornax-drop-after {
					border-bottom: 3px solid var(--interactive-accent) !important;
				}

				.fornax-has-alternatives {
					background: rgba(255, 235, 59, 0.15) !important;
					border-left: 3px solid #ffc107 !important;
				}

				.fornax-paragraph-block.fornax-has-alternatives {
					background: rgba(255, 235, 59, 0.1) !important;
					border-left: 3px solid #ffc107 !important;
				}

				.fornax-sentence-block.fornax-has-alternatives {
					background: rgba(255, 235, 59, 0.2) !important;
					border-left: 3px solid #ffc107 !important;
				}

				.fornax-paragraph-complete {
					background: rgba(76, 175, 80, 0.1) !important;
					border-left: 3px solid #4caf50 !important;
				}

				.fornax-paragraph-block.fornax-paragraph-complete {
					background: rgba(76, 175, 80, 0.15) !important;
					border-left: 3px solid #4caf50 !important;
				}

				/* Inline sentence alternatives styling */
				.fornax-sentence-row {
					display: flex;
					align-items: center;
					gap: 8px;
					flex-wrap: wrap;
				}

				.fornax-sentence-content {
					flex: 1;
					min-width: 0;
				}

				.fornax-add-alternative-btn, .fornax-save-final-btn {
					background: none;
					border: 1px solid var(--background-modifier-border);
					border-radius: 3px;
					padding: 2px 6px;
					font-size: 11px;
					color: var(--text-muted);
					cursor: pointer;
					opacity: 0.7;
					transition: opacity 0.2s ease;
				}

				.fornax-add-alternative-btn:hover, .fornax-save-final-btn:hover {
					opacity: 1;
					background: var(--background-modifier-hover);
				}

				.fornax-save-final-btn {
					color: var(--color-green);
					border-color: var(--color-green);
				}

				.fornax-save-final-btn:hover {
					background: rgba(76, 175, 80, 0.1);
				}

				.fornax-alternatives-container {
					margin-top: 8px;
					padding: 8px;
					background: var(--background-secondary);
					border-radius: 4px;
					border: 1px solid var(--background-modifier-border);
				}

				.fornax-alternative-item {
					display: flex;
					align-items: flex-start;
					gap: 8px;
					margin-bottom: 6px;
					padding: 4px;
					border-radius: 3px;
				}

				.fornax-alternative-item:last-child {
					margin-bottom: 0;
				}

				.fornax-alternative-item:hover {
					background: var(--background-modifier-hover);
				}

				.fornax-alternative-radio {
					margin-top: 2px;
					cursor: pointer;
				}

				.fornax-alternative-text {
					flex: 1;
					font-size: 13px;
					line-height: 1.4;
					word-wrap: break-word;
				}

				.fornax-original-sentence .fornax-alternative-text {
					font-style: italic;
					color: var(--text-muted);
				}

				.fornax-delete-alternative-btn {
					background: none;
					border: none;
					color: var(--text-error);
					cursor: pointer;
					font-size: 16px;
					line-height: 1;
					padding: 0;
					width: 20px;
					height: 20px;
					display: flex;
					align-items: center;
					justify-content: center;
					border-radius: 2px;
					opacity: 0.6;
					transition: opacity 0.2s ease;
				}

				.fornax-delete-alternative-btn:hover {
					opacity: 1;
					background: var(--background-modifier-error-hover);
				}

				.fornax-add-input {
					margin-top: 8px;
					padding: 8px;
					background: var(--background-secondary);
					border-radius: 4px;
					border: 1px solid var(--background-modifier-border);
				}

				.fornax-alternative-input {
					width: 100%;
					min-height: 60px;
					resize: vertical;
					padding: 8px;
					border: 1px solid var(--background-modifier-border);
					border-radius: 3px;
					background: var(--background-primary);
					color: var(--text-normal);
					font-family: inherit;
					font-size: 13px;
					line-height: 1.4;
				}

				.fornax-alternative-input:focus {
					outline: none;
					border-color: var(--interactive-accent);
				}

				.fornax-input-buttons {
					display: flex;
					gap: 8px;
					margin-top: 8px;
					justify-content: flex-end;
				}

				.fornax-save-alternative-btn, .fornax-cancel-alternative-btn {
					padding: 4px 12px;
					border: 1px solid var(--background-modifier-border);
					border-radius: 3px;
					background: var(--background-primary);
					color: var(--text-normal);
					cursor: pointer;
					font-size: 12px;
				}

				.fornax-save-alternative-btn {
					background: var(--interactive-accent);
					color: var(--text-on-accent);
					border-color: var(--interactive-accent);
				}

				.fornax-save-alternative-btn:hover {
					background: var(--interactive-accent-hover);
				}

				.fornax-cancel-alternative-btn:hover {
					background: var(--background-modifier-hover);
				}
			`;
      document.head.appendChild(style);
    }
  }
  destroy() {
    const style = document.getElementById("fornax-styles");
    if (style)
      style.remove();
  }
};
var SentenceEditModal = class extends import_obsidian2.Modal {
  constructor(app, sentence, paraIndex, sentIndex, overlay) {
    super(app);
  }
};

// src/ui/fornax-view.ts
var FornaxView = class extends import_obsidian3.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.overlay = null;
    this.currentFile = null;
  }
  getViewType() {
    return VIEW_TYPE_FORNAX;
  }
  getDisplayText() {
    return "Fornax Telescope";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    const telescopeContainer = container.createEl("div", {
      cls: "fornax-telescope-container"
    });
    this.overlay = new TelescopeOverlay(telescopeContainer, this.plugin);
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        this.updateActiveFile();
      })
    );
    await this.updateActiveFile();
  }
  async updateActiveFile() {
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile && activeFile.extension === "md") {
      this.currentFile = activeFile;
      if (this.overlay) {
        await this.overlay.loadDocument(activeFile);
      }
    }
  }
  async onClose() {
    var _a;
    (_a = this.overlay) == null ? void 0 : _a.destroy();
  }
};

// src/settings/settings.ts
var import_obsidian4 = require("obsidian");
var FornaxSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  async display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Fornax Settings" });
    await this.loadReadme(containerEl);
  }
  async loadReadme(containerEl) {
    try {
      const readmeFile = this.app.vault.getAbstractFileByPath("README.md");
      if (readmeFile && readmeFile instanceof this.app.vault.adapter.constructor) {
        const readmeContent = await this.app.vault.read(readmeFile);
        this.renderMarkdown(containerEl, readmeContent);
      } else {
        this.showFallbackDocumentation(containerEl);
      }
    } catch (error) {
      console.log("Could not load README.md, showing fallback documentation");
      this.showFallbackDocumentation(containerEl);
    }
  }
  renderMarkdown(containerEl, markdown) {
    const readmeContainer = containerEl.createEl("div", {
      cls: "fornax-readme-container"
    });
    this.app.vault.adapter.read("README.md").then((content) => {
      const htmlContent = this.convertMarkdownToHtml(content);
      readmeContainer.innerHTML = htmlContent;
    }).catch(() => {
      this.showFallbackDocumentation(containerEl);
    });
  }
  convertMarkdownToHtml(markdown) {
    return markdown.replace(/^# (.*$)/gm, "<h1>$1</h1>").replace(/^## (.*$)/gm, "<h2>$1</h2>").replace(/^### (.*$)/gm, "<h3>$1</h3>").replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>").replace(/\*(.*?)\*/g, "<em>$1</em>").replace(/`(.*?)`/g, "<code>$1</code>").replace(/^\- (.*$)/gm, "<li>$1</li>").replace(/(<li>.*<\/li>)/gs, "<ul>$1</ul>").replace(/\n\n/g, "</p><p>").replace(/^(?!<[h|u|l])/gm, "<p>").replace(/(?!>[h|u|l])$/gm, "</p>");
  }
  showFallbackDocumentation(containerEl) {
    const docContainer = containerEl.createEl("div", {
      cls: "fornax-documentation"
    });
    docContainer.innerHTML = `
			<h3>Fornax - Telescopic Writing Plugin</h3>
			<p>Fornax provides "telescopic writing" functionality for Obsidian, allowing you to zoom between document structure, paragraphs, and sentences with drag-and-drop editing and sentence alternatives.</p>

			<h4>Features:</h4>
			<ul>
				<li><strong>Three Zoom Levels:</strong> Document view, Paragraph view, and Sentence view</li>
				<li><strong>Drag & Drop:</strong> Reorder paragraphs and sentences with visual feedback</li>
				<li><strong>Sentence Alternatives:</strong> Create and compare different versions of sentences</li>
				<li><strong>Line-based Writing:</strong> Each line is treated as a sentence unit</li>
				<li><strong>Comment Storage:</strong> Alternatives stored as invisible Obsidian comments</li>
			</ul>

			<h4>How to Use:</h4>
			<ol>
				<li>Open the Fornax panel from the right sidebar</li>
				<li>Switch between Document, Paragraph, and Sentence views</li>
				<li>Drag the <code>::</code> handles to reorder content</li>
				<li>Click the <code>\u270F\uFE0F</code> icon to edit sentence alternatives</li>
				<li>Use "Save Selection" to try alternatives, "Commit" to finalize</li>
			</ol>

			<p><em>For complete documentation, see the README.md file in the plugin directory.</em></p>
		`;
    docContainer.style.maxHeight = "400px";
    docContainer.style.overflowY = "auto";
    docContainer.style.padding = "20px";
    docContainer.style.lineHeight = "1.6";
  }
};

// src/main.ts
var FornaxPlugin = class extends import_obsidian5.Plugin {
  async onload() {
    await this.loadSettings();
    this.engine = new FornaxEngine(this.app, this.settings);
    this.registerView(
      VIEW_TYPE_FORNAX,
      (leaf) => new FornaxView(leaf, this)
    );
    this.addRibbonIcon("telescope", "Open Fornax", () => {
      this.activateFornaxView();
    });
    this.addCommand({
      id: "toggle-fornax-mode",
      name: "Toggle Telescopic Writing Mode",
      callback: () => {
        this.toggleFornaxMode();
      }
    });
    this.addSettingTab(new FornaxSettingTab(this.app, this));
  }
  async activateFornaxView() {
    const { workspace } = this.app;
    let leaf = null;
    const leaves = workspace.getLeavesOfType(VIEW_TYPE_FORNAX);
    if (leaves.length > 0) {
      leaf = leaves[0];
    } else {
      leaf = workspace.getRightLeaf(false);
      await leaf.setViewState({ type: VIEW_TYPE_FORNAX, active: true });
    }
    workspace.revealLeaf(leaf);
  }
  async toggleFornaxMode() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile)
      return;
    await this.engine.toggleTelescopeMode(activeFile);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL2NvbnN0YW50cy50cyIsICJzcmMvZW5naW5lL2Zvcm5heC1lbmdpbmUudHMiLCAic3JjL3VpL2Zvcm5heC12aWV3LnRzIiwgInNyYy91aS90ZWxlc2NvcGUtb3ZlcmxheS50cyIsICJzcmMvc2V0dGluZ3Mvc2V0dGluZ3MudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIG1haW4udHMgLSBGb3JuYXggUGx1Z2luIEVudHJ5IFBvaW50XG5pbXBvcnQgeyBQbHVnaW4sIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vIEltcG9ydCB0eXBlcyBhbmQgY29uc3RhbnRzXG5pbXBvcnQgeyBGb3JuYXhTZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUywgVklFV19UWVBFX0ZPUk5BWCB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuLy8gSW1wb3J0IGNvcmUgY29tcG9uZW50c1xuaW1wb3J0IHsgRm9ybmF4RW5naW5lIH0gZnJvbSAnLi9lbmdpbmUvZm9ybmF4LWVuZ2luZSc7XG5pbXBvcnQgeyBGb3JuYXhWaWV3IH0gZnJvbSAnLi91aS9mb3JuYXgtdmlldyc7XG5pbXBvcnQgeyBGb3JuYXhTZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncy9zZXR0aW5ncyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm5heFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBGb3JuYXhTZXR0aW5ncztcblx0ZW5naW5lOiBGb3JuYXhFbmdpbmU7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBJbml0aWFsaXplIHRoZSBGb3JuYXggZW5naW5lXG5cdFx0dGhpcy5lbmdpbmUgPSBuZXcgRm9ybmF4RW5naW5lKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcblxuXHRcdC8vIFJlZ2lzdGVyIHRoZSBjdXN0b20gdmlld1xuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxuXHRcdFx0VklFV19UWVBFX0ZPUk5BWCxcblx0XHRcdChsZWFmKSA9PiBuZXcgRm9ybmF4VmlldyhsZWFmLCB0aGlzKVxuXHRcdCk7XG5cblx0XHQvLyBBZGQgcmliYm9uIGljb25cblx0XHR0aGlzLmFkZFJpYmJvbkljb24oJ3RlbGVzY29wZScsICdPcGVuIEZvcm5heCcsICgpID0+IHtcblx0XHRcdHRoaXMuYWN0aXZhdGVGb3JuYXhWaWV3KCk7XG5cdFx0fSk7XG5cblx0XHQvLyBBZGQgY29tbWFuZCB0byB0b2dnbGUgRm9ybmF4IG1vZGVcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICd0b2dnbGUtZm9ybmF4LW1vZGUnLFxuXHRcdFx0bmFtZTogJ1RvZ2dsZSBUZWxlc2NvcGljIFdyaXRpbmcgTW9kZScsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnRvZ2dsZUZvcm5heE1vZGUoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIEFkZCBzZXR0aW5ncyB0YWJcblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IEZvcm5heFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblx0fVxuXG5cdGFzeW5jIGFjdGl2YXRlRm9ybmF4VmlldygpIHtcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG5cblx0XHRsZXQgbGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xuXHRcdGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0ZPUk5BWCk7XG5cblx0XHRpZiAobGVhdmVzLmxlbmd0aCA+IDApIHtcblx0XHRcdGxlYWYgPSBsZWF2ZXNbMF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdGxlYWYgPSB3b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcblx0XHRcdGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFX0ZPUk5BWCwgYWN0aXZlOiB0cnVlIH0pO1xuXHRcdH1cblxuXHRcdHdvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuXHR9XG5cblx0YXN5bmMgdG9nZ2xlRm9ybmF4TW9kZSgpIHtcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRpZiAoIWFjdGl2ZUZpbGUpIHJldHVybjtcblxuXHRcdC8vIFRvZ2dsZSB0aGUgdGVsZXNjb3BpYyBvdmVybGF5IGZvciB0aGUgY3VycmVudCBmaWxlXG5cdFx0YXdhaXQgdGhpcy5lbmdpbmUudG9nZ2xlVGVsZXNjb3BlTW9kZShhY3RpdmVGaWxlKTtcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59IiwgIi8vIENvbnN0YW50cyBmb3IgRm9ybmF4IHBsdWdpblxuaW1wb3J0IHsgRm9ybmF4U2V0dGluZ3MgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEZvcm5heFNldHRpbmdzID0ge1xuXHQvLyBObyBzZXR0aW5ncyBjdXJyZW50bHkgbmVlZGVkXG59O1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX0ZPUk5BWCA9ICdmb3JuYXgtdGVsZXNjb3BlJzsiLCAiLy8gRm9ybmF4RW5naW5lIC0gQ29yZSBkb2N1bWVudCBwYXJzaW5nIGFuZCBlZGl0aW5nIGxvZ2ljXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGb3JuYXhTZXR0aW5ncywgU2VudGVuY2VFZGl0LCBTZWN0aW9uIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRm9ybmF4RW5naW5lIHtcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCwgcHJpdmF0ZSBzZXR0aW5nczogRm9ybmF4U2V0dGluZ3MpIHt9XG5cblx0YXN5bmMgdG9nZ2xlVGVsZXNjb3BlTW9kZShmaWxlOiBURmlsZSkge1xuXHRcdG5ldyBOb3RpY2UoJ0Zvcm5heCB0ZWxlc2NvcGUgbW9kZSBhY3RpdmF0ZWQhJyk7XG5cdH1cblxuXHRhc3luYyBwYXJzZURvY3VtZW50KGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8e1xuXHRcdHBhcmFncmFwaHM6IHN0cmluZ1tdO1xuXHRcdHNlbnRlbmNlczogc3RyaW5nW11bXTtcblx0XHRlZGl0czogU2VudGVuY2VFZGl0W107XG5cdFx0cmF3UGFyYWdyYXBocz86IHN0cmluZ1tdOyAvLyBTdG9yZSByYXcgcGFyYWdyYXBocyB3aXRoIGNvbW1lbnRzIGZvciByZWNvbnN0cnVjdGlvblxuXHRcdHNlY3Rpb25zPzogU2VjdGlvbltdOyAvLyBTdG9yZSBzZWN0aW9uIHN0cnVjdHVyZSBmb3IgZG9jdW1lbnQgdmlld1xuXHR9PiB7XG5cdFx0Ly8gU3BsaXQgaW50byBwYXJhZ3JhcGhzIGJ5IGRvdWJsZSBsaW5lIGJyZWFrc1xuXHRcdGNvbnN0IHJhd1BhcmFncmFwaHMgPSBjb250ZW50LnNwbGl0KCdcXG5cXG4nKS5maWx0ZXIocCA9PiBwLnRyaW0oKSk7XG5cblx0XHQvLyBQcm9jZXNzIHBhcmFncmFwaHMgdG8gZXh0cmFjdCBvbmx5IHZpc2libGUgc2VudGVuY2VzIChmaWx0ZXIgb3V0ICUlICUlIGNvbW1lbnRzKVxuXHRcdGNvbnN0IHNlbnRlbmNlcyA9IHJhd1BhcmFncmFwaHMubWFwKHBhcmEgPT4ge1xuXHRcdFx0Y29uc3QgbGluZXMgPSBwYXJhLnNwbGl0KCdcXG4nKTtcblx0XHRcdHJldHVybiBsaW5lcy5maWx0ZXIobGluZSA9PiB7XG5cdFx0XHRcdGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcblx0XHRcdFx0Ly8gS2VlcCBvbmx5IG5vbi1lbXB0eSBsaW5lcyB0aGF0IGFyZW4ndCBPYnNpZGlhbiBjb21tZW50c1xuXHRcdFx0XHRyZXR1cm4gdHJpbW1lZCAmJiAhKHRyaW1tZWQuc3RhcnRzV2l0aCgnJSUnKSAmJiB0cmltbWVkLmVuZHNXaXRoKCclJScpKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gUmVjb25zdHJ1Y3QgY2xlYW4gcGFyYWdyYXBocyBmcm9tIGZpbHRlcmVkIHNlbnRlbmNlcyBmb3IgVUkgZGlzcGxheVxuXHRcdGNvbnN0IHBhcmFncmFwaHMgPSBzZW50ZW5jZXMubWFwKHNlbnRlbmNlQXJyYXkgPT4gc2VudGVuY2VBcnJheS5qb2luKCdcXG4nKSk7XG5cblx0XHQvLyBQYXJzZSBleGlzdGluZyBlZGl0cyAoZnJvbSAlJSAlJSBjb21tZW50cylcblx0XHRjb25zdCBlZGl0cyA9IGF3YWl0IHRoaXMucGFyc2VFeGlzdGluZ0VkaXRzKGNvbnRlbnQpO1xuXG5cdFx0Ly8gUGFyc2Ugc2VjdGlvbiBzdHJ1Y3R1cmUgZm9yIGRvY3VtZW50IHZpZXdcblx0XHRjb25zdCBzZWN0aW9ucyA9IHRoaXMucGFyc2VTZWN0aW9uU3RydWN0dXJlKHJhd1BhcmFncmFwaHMpO1xuXG5cdFx0cmV0dXJuIHsgcGFyYWdyYXBocywgc2VudGVuY2VzLCBlZGl0cywgcmF3UGFyYWdyYXBocywgc2VjdGlvbnMgfTtcblx0fVxuXG5cdHByaXZhdGUgcGFyc2VTZWN0aW9uU3RydWN0dXJlKHJhd1BhcmFncmFwaHM6IHN0cmluZ1tdKTogU2VjdGlvbltdIHtcblx0XHRjb25zdCBzZWN0aW9uczogU2VjdGlvbltdID0gW107XG5cdFx0bGV0IGN1cnJlbnRTZWN0aW9uOiBTZWN0aW9uIHwgbnVsbCA9IG51bGw7XG5cblx0XHRyYXdQYXJhZ3JhcGhzLmZvckVhY2goKHBhcmFncmFwaCwgaW5kZXgpID0+IHtcblx0XHRcdGNvbnN0IHRyaW1tZWQgPSBwYXJhZ3JhcGgudHJpbSgpO1xuXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIHBhcmFncmFwaCBpcyBhIGhlYWRpbmcgKGlnbm9yZSAjIGxldmVsIDEgaGVhZGluZ3MgLSB0aGV5J3JlIGZvciB0aXRsZXMpXG5cdFx0XHRpZiAodHJpbW1lZC5zdGFydHNXaXRoKCcjIycpICYmICF0cmltbWVkLnN0YXJ0c1dpdGgoJyMjIycpKSB7XG5cdFx0XHRcdC8vICMjIExldmVsIDIgaGVhZGluZyAtIHN0YXJ0IG5ldyBzZWN0aW9uXG5cdFx0XHRcdGlmIChjdXJyZW50U2VjdGlvbikge1xuXHRcdFx0XHRcdGN1cnJlbnRTZWN0aW9uLmVuZFBhcmFncmFwaEluZGV4ID0gaW5kZXggLSAxO1xuXHRcdFx0XHRcdHNlY3Rpb25zLnB1c2goY3VycmVudFNlY3Rpb24pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y3VycmVudFNlY3Rpb24gPSB7XG5cdFx0XHRcdFx0aGVhZGluZzogdHJpbW1lZC5yZXBsYWNlKC9eIyNcXHMqLywgJycpLFxuXHRcdFx0XHRcdGxldmVsOiAyLFxuXHRcdFx0XHRcdHBhcmFncmFwaHM6IFtdLFxuXHRcdFx0XHRcdHN0YXJ0UGFyYWdyYXBoSW5kZXg6IGluZGV4LFxuXHRcdFx0XHRcdGVuZFBhcmFncmFwaEluZGV4OiBpbmRleFxuXHRcdFx0XHR9O1xuXHRcdFx0fSBlbHNlIGlmICh0cmltbWVkLnN0YXJ0c1dpdGgoJyMjIycpKSB7XG5cdFx0XHRcdC8vICMjIyBMZXZlbCAzIGhlYWRpbmcgLSBhZGQgdG8gY3VycmVudCBzZWN0aW9uIGFzIGEgc3BlY2lhbCBwYXJhZ3JhcGhcblx0XHRcdFx0aWYgKGN1cnJlbnRTZWN0aW9uKSB7XG5cdFx0XHRcdFx0Y3VycmVudFNlY3Rpb24ucGFyYWdyYXBocy5wdXNoKHBhcmFncmFwaCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24pIHtcblx0XHRcdFx0Ly8gUmVndWxhciBwYXJhZ3JhcGggLSBhZGQgdG8gY3VycmVudCBzZWN0aW9uXG5cdFx0XHRcdGN1cnJlbnRTZWN0aW9uLnBhcmFncmFwaHMucHVzaChwYXJhZ3JhcGgpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gSWYgbm8gY3VycmVudCBzZWN0aW9uIGFuZCBpdCdzIG5vdCBhIGhlYWRpbmcsIGl0J3MgY29udGVudCBiZWZvcmUgYW55IHNlY3Rpb25zXG5cdFx0fSk7XG5cblx0XHQvLyBEb24ndCBmb3JnZXQgdGhlIGxhc3Qgc2VjdGlvblxuXHRcdGlmIChjdXJyZW50U2VjdGlvbikge1xuXHRcdFx0Y3VycmVudFNlY3Rpb24uZW5kUGFyYWdyYXBoSW5kZXggPSByYXdQYXJhZ3JhcGhzLmxlbmd0aCAtIDE7XG5cdFx0XHRzZWN0aW9ucy5wdXNoKGN1cnJlbnRTZWN0aW9uKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gc2VjdGlvbnM7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHBhcnNlRXhpc3RpbmdFZGl0cyhjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPFNlbnRlbmNlRWRpdFtdPiB7XG5cdFx0Ly8gUGFyc2UgbWFya2Rvd24gY29tbWVudHMgZm9yIHN0b3JlZCBhbHRlcm5hdGl2ZXNcblx0XHRjb25zdCBjb21tZW50UmVnZXggPSAvPCEtLVxccypGT1JOQVhfRURJVDooLis/KVxccyotLT4vZztcblx0XHRjb25zdCBlZGl0czogU2VudGVuY2VFZGl0W10gPSBbXTtcblxuXHRcdGxldCBtYXRjaDtcblx0XHR3aGlsZSAoKG1hdGNoID0gY29tbWVudFJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb25zdCBlZGl0RGF0YSA9IEpTT04ucGFyc2UobWF0Y2hbMV0pO1xuXHRcdFx0XHRlZGl0cy5wdXNoKGVkaXREYXRhKTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKCdGYWlsZWQgdG8gcGFyc2UgRm9ybmF4IGVkaXQ6JywgbWF0Y2hbMV0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBlZGl0cztcblx0fVxuXG5cdGFzeW5jIHNhdmVFZGl0KGZpbGU6IFRGaWxlLCBlZGl0OiBTZW50ZW5jZUVkaXQpIHtcblx0XHQvLyBTYXZlIGVkaXQgYXMgbWFya2Rvd24gY29tbWVudFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IGNvbW1lbnQgPSBgPCEtLSBGT1JOQVhfRURJVDoke0pTT04uc3RyaW5naWZ5KGVkaXQpfSAtLT5gO1xuXG5cdFx0Ly8gSW5zZXJ0IGNvbW1lbnQgYWZ0ZXIgdGhlIHJlbGV2YW50IHNlbnRlbmNlXG5cdFx0Ly8gSW1wbGVtZW50YXRpb24gZGV0YWlscy4uLlxuXHR9XG59IiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFZJRVdfVFlQRV9GT1JOQVggfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgVGVsZXNjb3BlT3ZlcmxheSB9IGZyb20gJy4vdGVsZXNjb3BlLW92ZXJsYXknO1xuXG4vLyBJbXBvcnQgdHlwZSBmb3IgRm9ybmF4UGx1Z2luIC0gd2lsbCBuZWVkIHRvIGltcG9ydCB0aGUgYWN0dWFsIGNsYXNzIHdoZW4gaXQncyBleHRyYWN0ZWRcbi8vIGltcG9ydCB7IEZvcm5heFBsdWdpbiB9IGZyb20gJy4uL3BsdWdpbic7XG5cbmV4cG9ydCBjbGFzcyBGb3JuYXhWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuXHRwcml2YXRlIG92ZXJsYXk6IFRlbGVzY29wZU92ZXJsYXkgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBjdXJyZW50RmlsZTogVEZpbGUgfCBudWxsID0gbnVsbDtcblxuXHRjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwcml2YXRlIHBsdWdpbjogYW55KSB7IC8vIFRPRE86IFR5cGUgYXMgRm9ybmF4UGx1Z2luIHdoZW4gZXh0cmFjdGVkXG5cdFx0c3VwZXIobGVhZik7XG5cdH1cblxuXHRnZXRWaWV3VHlwZSgpIHtcblx0XHRyZXR1cm4gVklFV19UWVBFX0ZPUk5BWDtcblx0fVxuXG5cdGdldERpc3BsYXlUZXh0KCkge1xuXHRcdHJldHVybiAnRm9ybmF4IFRlbGVzY29wZSc7XG5cdH1cblxuXHRhc3luYyBvbk9wZW4oKSB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblxuXHRcdC8vIENyZWF0ZSB0aGUgdGVsZXNjb3BpYyBpbnRlcmZhY2Vcblx0XHRjb25zdCB0ZWxlc2NvcGVDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGNsczogJ2Zvcm5heC10ZWxlc2NvcGUtY29udGFpbmVyJ1xuXHRcdH0pO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBvdmVybGF5XG5cdFx0dGhpcy5vdmVybGF5ID0gbmV3IFRlbGVzY29wZU92ZXJsYXkodGVsZXNjb3BlQ29udGFpbmVyLCB0aGlzLnBsdWdpbik7XG5cblx0XHQvLyBMaXN0ZW4gZm9yIGFjdGl2ZSBmaWxlIGNoYW5nZXNcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcblx0XHRcdFx0dGhpcy51cGRhdGVBY3RpdmVGaWxlKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRhd2FpdCB0aGlzLnVwZGF0ZUFjdGl2ZUZpbGUoKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlQWN0aXZlRmlsZSgpIHtcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRpZiAoYWN0aXZlRmlsZSAmJiBhY3RpdmVGaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuXHRcdFx0dGhpcy5jdXJyZW50RmlsZSA9IGFjdGl2ZUZpbGU7XG5cdFx0XHRpZiAodGhpcy5vdmVybGF5KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMub3ZlcmxheS5sb2FkRG9jdW1lbnQoYWN0aXZlRmlsZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHR0aGlzLm92ZXJsYXk/LmRlc3Ryb3koKTtcblx0fVxufSIsICJpbXBvcnQgeyBURmlsZSwgTW9kYWwgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBab29tTGV2ZWwsIFNlY3Rpb24gfSBmcm9tICcuLi90eXBlcyc7XG5cbi8vIFdlJ2xsIG5lZWQgdG8gaW1wb3J0IEZvcm5heFBsdWdpbiB3aGVuIGl0J3MgZXh0cmFjdGVkLCBidXQgZm9yIG5vdyB1c2luZyBhbnlcbi8vIGltcG9ydCB7IEZvcm5heFBsdWdpbiB9IGZyb20gJy4uL3BsdWdpbic7XG5cbmV4cG9ydCBjbGFzcyBUZWxlc2NvcGVPdmVybGF5IHtcblx0cHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuXHRwcml2YXRlIGNvbnRlbnRFbDogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgY29udHJvbHNFbDogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgY3VycmVudFpvb206IFpvb21MZXZlbCA9ICdkb2N1bWVudCc7XG5cdGN1cnJlbnREb2N1bWVudDogYW55ID0gbnVsbDtcblx0cGx1Z2luOiBhbnk7IC8vIEZvcm5heFBsdWdpbiB3aGVuIGV4dHJhY3RlZFxuXHRpc0ludGVybmFsVXBkYXRlOiBib29sZWFuID0gZmFsc2U7XG5cdHByaXZhdGUgdGFyZ2V0U2Nyb2xsRWxlbWVudDogc3RyaW5nIHwgbnVsbCA9IG51bGw7IC8vIEZvciBhdXRvLXNjcm9sbGluZyB0byBzcGVjaWZpYyBlbGVtZW50c1xuXG5cdGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBsdWdpbjogYW55KSB7XG5cdFx0dGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdFx0dGhpcy5jcmVhdGVJbnRlcmZhY2UoKTtcblx0fVxuXG5cdHByaXZhdGUgY3JlYXRlSW50ZXJmYWNlKCkge1xuXHRcdC8vIEFkZCBDU1MgZm9yIHRoZSBpbnRlcmZhY2Vcblx0XHR0aGlzLmFkZFN0eWxlcygpO1xuXG5cdFx0Ly8gTWFpbiB0ZWxlc2NvcGUgY29udGFpbmVyXG5cdFx0dGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ2Zvcm5heC10ZWxlc2NvcGUnKTtcblxuXHRcdC8vIFpvb20gY29udHJvbHMgYXQgdGhlIHRvcFxuXHRcdHRoaXMuY29udHJvbHNFbCA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Zvcm5heC16b29tLWNvbnRyb2xzJyB9KTtcblx0XHR0aGlzLmNyZWF0ZVpvb21Db250cm9scygpO1xuXG5cdFx0Ly8gQ29udGVudCBhcmVhXG5cdFx0dGhpcy5jb250ZW50RWwgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JuYXgtY29udGVudCcgfSk7XG5cdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGNsczogJ2Zvcm5heC1wbGFjZWhvbGRlcicsXG5cdFx0XHR0ZXh0OiAnT3BlbiBhIG1hcmtkb3duIGRvY3VtZW50IHRvIGJlZ2luIHRlbGVzY29waWMgZWRpdGluZydcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgY3JlYXRlWm9vbUNvbnRyb2xzKCkge1xuXHRcdGNvbnN0IHpvb21MZXZlbHM6IHsgbGV2ZWw6IFpvb21MZXZlbDsgbGFiZWw6IHN0cmluZzsgaWNvbjogc3RyaW5nIH1bXSA9IFtcblx0XHRcdHsgbGV2ZWw6ICdkb2N1bWVudCcsIGxhYmVsOiAnRG9jdW1lbnQnLCBpY29uOiAnXHVEODNEXHVEQ0M0JyB9LFxuXHRcdFx0eyBsZXZlbDogJ3BhcmFncmFwaHMnLCBsYWJlbDogJ1BhcmFncmFwaHMnLCBpY29uOiAnXHVEODNEXHVEQ0REJyB9LFxuXHRcdFx0eyBsZXZlbDogJ3NlbnRlbmNlcycsIGxhYmVsOiAnU2VudGVuY2VzJywgaWNvbjogJ1x1MjcwRlx1RkUwRicgfVxuXHRcdF07XG5cblx0XHR6b29tTGV2ZWxzLmZvckVhY2goKHsgbGV2ZWwsIGxhYmVsLCBpY29uIH0pID0+IHtcblx0XHRcdGNvbnN0IGJ0biA9IHRoaXMuY29udHJvbHNFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHRjbHM6IGBmb3JuYXgtem9vbS1idG4gJHtsZXZlbCA9PT0gdGhpcy5jdXJyZW50Wm9vbSA/ICdhY3RpdmUnIDogJyd9YCxcblx0XHRcdFx0dGV4dDogYCR7aWNvbn0gJHtsYWJlbH1gXG5cdFx0XHR9KTtcblxuXHRcdFx0YnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLnNldFpvb21MZXZlbChsZXZlbCk7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGFzeW5jIGxvYWREb2N1bWVudChmaWxlOiBURmlsZSkge1xuXHRcdC8vIFNraXAgcmVsb2FkIGlmIHRoaXMgaXMgZnJvbSBvdXIgb3duIGludGVybmFsIHVwZGF0ZVxuXHRcdGlmICh0aGlzLmlzSW50ZXJuYWxVcGRhdGUpIHtcblx0XHRcdHRoaXMuaXNJbnRlcm5hbFVwZGF0ZSA9IGZhbHNlO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcblx0XHR0aGlzLmN1cnJlbnREb2N1bWVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmVuZ2luZS5wYXJzZURvY3VtZW50KGNvbnRlbnQpO1xuXHRcdHRoaXMucmVuZGVyQ3VycmVudFpvb20oKTtcblx0fVxuXG5cdHByaXZhdGUgc2V0Wm9vbUxldmVsKGxldmVsOiBab29tTGV2ZWwsIHRhcmdldEVsZW1lbnQ/OiBzdHJpbmcpIHtcblx0XHR0aGlzLmN1cnJlbnRab29tID0gbGV2ZWw7XG5cdFx0dGhpcy50YXJnZXRTY3JvbGxFbGVtZW50ID0gdGFyZ2V0RWxlbWVudCB8fCBudWxsO1xuXG5cdFx0Ly8gVXBkYXRlIGJ1dHRvbiBzdGF0ZXNcblx0XHR0aGlzLmNvbnRyb2xzRWwucXVlcnlTZWxlY3RvckFsbCgnLmZvcm5heC16b29tLWJ0bicpLmZvckVhY2goYnRuID0+IHtcblx0XHRcdGJ0bi5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0fSk7XG5cdFx0dGhpcy5jb250cm9sc0VsLnF1ZXJ5U2VsZWN0b3IoYGJ1dHRvbjpudGgtY2hpbGQoJHtcblx0XHRcdGxldmVsID09PSAnZG9jdW1lbnQnID8gMSA6IGxldmVsID09PSAncGFyYWdyYXBocycgPyAyIDogM1xuXHRcdH0pYCk/LmFkZENsYXNzKCdhY3RpdmUnKTtcblxuXHRcdHRoaXMucmVuZGVyQ3VycmVudFpvb20oKTtcblx0fVxuXG5cdHByaXZhdGUgc2Nyb2xsVG9UYXJnZXQoKSB7XG5cdFx0aWYgKCF0aGlzLnRhcmdldFNjcm9sbEVsZW1lbnQpIHJldHVybjtcblxuXHRcdC8vIEdpdmUgdGhlIERPTSBhIG1vbWVudCB0byByZW5kZXIsIHRoZW4gc2Nyb2xsXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRjb25zdCB0YXJnZXRFbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IodGhpcy50YXJnZXRTY3JvbGxFbGVtZW50ISk7XG5cdFx0XHRpZiAodGFyZ2V0RWwpIHtcblx0XHRcdFx0dGFyZ2V0RWwuc2Nyb2xsSW50b1ZpZXcoe1xuXHRcdFx0XHRcdGJlaGF2aW9yOiAnc21vb3RoJyxcblx0XHRcdFx0XHRibG9jazogJ3N0YXJ0J1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdHRoaXMudGFyZ2V0U2Nyb2xsRWxlbWVudCA9IG51bGw7IC8vIENsZWFyIGFmdGVyIHVzZVxuXHRcdH0sIDEwMCk7XG5cdH1cblxuXHRyZW5kZXJDdXJyZW50Wm9vbSgpIHtcblx0XHRpZiAoIXRoaXMuY3VycmVudERvY3VtZW50KSByZXR1cm47XG5cblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXG5cdFx0c3dpdGNoICh0aGlzLmN1cnJlbnRab29tKSB7XG5cdFx0XHRjYXNlICdkb2N1bWVudCc6XG5cdFx0XHRcdHRoaXMucmVuZGVyRG9jdW1lbnRWaWV3KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAncGFyYWdyYXBocyc6XG5cdFx0XHRcdHRoaXMucmVuZGVyUGFyYWdyYXBoVmlldygpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ3NlbnRlbmNlcyc6XG5cdFx0XHRcdHRoaXMucmVuZGVyU2VudGVuY2VWaWV3KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdC8vIFNjcm9sbCB0byB0YXJnZXQgZWxlbWVudCBpZiBzcGVjaWZpZWRcblx0XHR0aGlzLnNjcm9sbFRvVGFyZ2V0KCk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckRvY3VtZW50VmlldygpIHtcblx0XHRjb25zdCBkb2NWaWV3ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9ybmF4LWRvY3VtZW50LXZpZXcnIH0pO1xuXG5cdFx0Ly8gRG9jdW1lbnQgb3ZlcnZpZXcgd2l0aCBwYXJhZ3JhcGggY291bnQgYW5kIHN0cnVjdHVyZVxuXHRcdGNvbnN0IG92ZXJ2aWV3ID0gZG9jVmlldy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JuYXgtb3ZlcnZpZXcnIH0pO1xuXG5cdFx0Ly8gRXh0cmFjdCBhbmQgZGlzcGxheSB0aGUgZmlyc3QtbGV2ZWwgaGVhZGluZyBhcyBkb2N1bWVudCB0aXRsZVxuXHRcdGNvbnN0IGRvY3VtZW50VGl0bGUgPSB0aGlzLmdldERvY3VtZW50VGl0bGUoKTtcblx0XHRvdmVydmlldy5jcmVhdGVFbCgnaDMnLCB7XG5cdFx0XHR0ZXh0OiBkb2N1bWVudFRpdGxlLFxuXHRcdFx0Y2xzOiAnZm9ybmF4LWRvY3VtZW50LXRpdGxlJ1xuXHRcdH0pO1xuXG5cdFx0Y29uc3Qgc3RhdHMgPSBvdmVydmlldy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JuYXgtc3RhdHMnIH0pO1xuXG5cdFx0Ly8gQ291bnQgb25seSBub24taGVhZGluZyBwYXJhZ3JhcGhzIGZvciBzdGF0aXN0aWNzXG5cdFx0Y29uc3Qgbm9uSGVhZGluZ1BhcmFncmFwaHMgPSB0aGlzLmN1cnJlbnREb2N1bWVudC5wYXJhZ3JhcGhzLmZpbHRlcigocGFyYTogc3RyaW5nKSA9PiB7XG5cdFx0XHRyZXR1cm4gIXBhcmEudHJpbSgpLnN0YXJ0c1dpdGgoJyMnKTtcblx0XHR9KTtcblx0XHRzdGF0cy5jcmVhdGVFbCgnc3BhbicsIHtcblx0XHRcdGNsczogJ3N0YXQnLFxuXHRcdFx0dGV4dDogYCR7bm9uSGVhZGluZ1BhcmFncmFwaHMubGVuZ3RofSBwYXJhZ3JhcGhzYFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ291bnQgb25seSBub24taGVhZGluZyBzZW50ZW5jZXMgZm9yIHN0YXRpc3RpY3Ncblx0XHRjb25zdCB0b3RhbFNlbnRlbmNlcyA9IHRoaXMuY3VycmVudERvY3VtZW50LnNlbnRlbmNlcy5yZWR1Y2UoKHN1bTogbnVtYmVyLCBwYXJhOiBzdHJpbmdbXSkgPT4ge1xuXHRcdFx0Y29uc3Qgbm9uSGVhZGluZ1NlbnRlbmNlcyA9IHBhcmEuZmlsdGVyKChzZW50ZW5jZTogc3RyaW5nKSA9PiAhc2VudGVuY2UudHJpbSgpLnN0YXJ0c1dpdGgoJyMnKSk7XG5cdFx0XHRyZXR1cm4gc3VtICsgbm9uSGVhZGluZ1NlbnRlbmNlcy5sZW5ndGg7XG5cdFx0fSwgMCk7XG5cdFx0c3RhdHMuY3JlYXRlRWwoJ3NwYW4nLCB7XG5cdFx0XHRjbHM6ICdzdGF0Jyxcblx0XHRcdHRleHQ6IGAke3RvdGFsU2VudGVuY2VzfSBzZW50ZW5jZXNgXG5cdFx0fSk7XG5cblx0XHQvLyBTZWN0aW9uIGJsb2Nrc1xuXHRcdGlmICh0aGlzLmN1cnJlbnREb2N1bWVudC5zZWN0aW9ucyAmJiB0aGlzLmN1cnJlbnREb2N1bWVudC5zZWN0aW9ucy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjb25zdCBzZWN0aW9uc0NvbnRhaW5lciA9IGRvY1ZpZXcuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9ybmF4LXNlY3Rpb25zLWNvbnRhaW5lcicgfSk7XG5cdFx0XHR0aGlzLnJlbmRlclNlY3Rpb25CbG9ja3Moc2VjdGlvbnNDb250YWluZXIpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBGYWxsYmFjazogc2hvdyBtaW5pIHBhcmFncmFwaCBwcmV2aWV3cyBpZiBubyBzZWN0aW9ucyBmb3VuZFxuXHRcdFx0Y29uc3QgbWluaVByZXZpZXdzID0gZG9jVmlldy5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JuYXgtbWluaS1wYXJhZ3JhcGhzJyB9KTtcblx0XHRcdHRoaXMuY3VycmVudERvY3VtZW50LnBhcmFncmFwaHMuZm9yRWFjaCgocGFyYTogc3RyaW5nLCBpOiBudW1iZXIpID0+IHtcblx0XHRcdFx0Y29uc3QgbWluaVBhcmEgPSBtaW5pUHJldmlld3MuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0XHRjbHM6ICdmb3JuYXgtbWluaS1wYXJhZ3JhcGgnLFxuXHRcdFx0XHRcdHRleHQ6IHBhcmEuc2xpY2UoMCwgMTAwKSArIChwYXJhLmxlbmd0aCA+IDEwMCA/ICcuLi4nIDogJycpXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdG1pbmlQYXJhLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zZXRab29tTGV2ZWwoJ3BhcmFncmFwaHMnLCBgW2RhdGEtcGFyYS1pbmRleD1cIiR7aX1cIl1gKTtcblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyU2VjdGlvbkJsb2Nrcyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnREb2N1bWVudC5zZWN0aW9ucykgcmV0dXJuO1xuXG5cdFx0dGhpcy5jdXJyZW50RG9jdW1lbnQuc2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbjogU2VjdGlvbiwgc2VjdGlvbkluZGV4OiBudW1iZXIpID0+IHtcblx0XHRcdGNvbnN0IHNlY3Rpb25CbG9jayA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHRjbHM6ICdmb3JuYXgtc2VjdGlvbi1ibG9jaycsXG5cdFx0XHRcdGF0dHI6IHsgJ2RhdGEtc2VjdGlvbi1pbmRleCc6IHNlY3Rpb25JbmRleC50b1N0cmluZygpIH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBTZWN0aW9uIGhlYWRpbmdcblx0XHRcdGNvbnN0IHNlY3Rpb25IZWFkZXIgPSBzZWN0aW9uQmxvY2suY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9ybmF4LXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHRcdHNlY3Rpb25IZWFkZXIuY3JlYXRlRWwoJ2gzJywge1xuXHRcdFx0XHRjbHM6ICdmb3JuYXgtc2VjdGlvbi10aXRsZScsXG5cdFx0XHRcdHRleHQ6IHNlY3Rpb24uaGVhZGluZ1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFNlY3Rpb24gY29udGVudCAtIHNob3cgcHJldmlldyBvZiBlYWNoIHBhcmFncmFwaFxuXHRcdFx0Y29uc3Qgc2VjdGlvbkNvbnRlbnQgPSBzZWN0aW9uQmxvY2suY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9ybmF4LXNlY3Rpb24tY29udGVudCcgfSk7XG5cblx0XHRcdHNlY3Rpb24ucGFyYWdyYXBocy5mb3JFYWNoKChwYXJhZ3JhcGg6IHN0cmluZywgcGFyYWdyYXBoSW5kZXg6IG51bWJlcikgPT4ge1xuXHRcdFx0XHRjb25zdCBjbGVhblBhcmFncmFwaCA9IHRoaXMuY2xlYW5QYXJhZ3JhcGhGb3JQcmV2aWV3KHBhcmFncmFwaCk7XG5cblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhICMjIyB0aGlyZC1sZXZlbCBoZWFkaW5nXG5cdFx0XHRcdGlmIChwYXJhZ3JhcGgudHJpbSgpLnN0YXJ0c1dpdGgoJyMjIycpKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc3ViaGVhZGluZyA9IHNlY3Rpb25Db250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRcdFx0XHRjbHM6ICdmb3JuYXgtdGhpcmQtbGV2ZWwtaGVhZGluZycsXG5cdFx0XHRcdFx0XHR0ZXh0OiBwYXJhZ3JhcGgudHJpbSgpLnJlcGxhY2UoL14jIyNcXHMqLywgJycpXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2xlYW5QYXJhZ3JhcGgudHJpbSgpKSB7XG5cdFx0XHRcdFx0Ly8gUmVndWxhciBwYXJhZ3JhcGggLSBzaG93IGZpcnN0IHNlbnRlbmNlXG5cdFx0XHRcdFx0Y29uc3Qgc2VudGVuY2VzID0gY2xlYW5QYXJhZ3JhcGguc3BsaXQoJ1xcbicpLmZpbHRlcihzID0+IHMudHJpbSgpKTtcblx0XHRcdFx0XHRpZiAoc2VudGVuY2VzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdGNvbnN0IHBhcmFncmFwaFByZXZpZXcgPSBzZWN0aW9uQ29udGVudC5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHRcdFx0XHRjbHM6ICdmb3JuYXgtcGFyYWdyYXBoLXByZXZpZXcnLFxuXHRcdFx0XHRcdFx0XHR0ZXh0OiBzZW50ZW5jZXNbMF0uc2xpY2UoMCwgODApICsgKHNlbnRlbmNlc1swXS5sZW5ndGggPiA4MCA/ICcuLi4nIDogJycpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBDbGljayB0byB6b29tIHRvIHBhcmFncmFwaHMgdmlldyBhbmQgc2Nyb2xsIHRvIHRoaXMgc2VjdGlvblxuXHRcdFx0c2VjdGlvbkJsb2NrLm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdC8vIEZpbmQgdGhlIGZpcnN0IHBhcmFncmFwaCBvZiB0aGlzIHNlY3Rpb24gdG8gc2Nyb2xsIHRvXG5cdFx0XHRcdGNvbnN0IHNlY3Rpb25TdGFydEluZGV4ID0gc2VjdGlvbi5zdGFydFBhcmFncmFwaEluZGV4O1xuXHRcdFx0XHR0aGlzLnNldFpvb21MZXZlbCgncGFyYWdyYXBocycsIGBbZGF0YS1wYXJhLWluZGV4PVwiJHtzZWN0aW9uU3RhcnRJbmRleH1cIl1gKTtcblx0XHRcdH07XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGNsZWFuUGFyYWdyYXBoRm9yUHJldmlldyhwYXJhZ3JhcGg6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Ly8gUmVtb3ZlICUlICUlIGNvbW1lbnRzIGZvciBjbGVhbiBwcmV2aWV3IGRpc3BsYXlcblx0XHRjb25zdCBsaW5lcyA9IHBhcmFncmFwaC5zcGxpdCgnXFxuJyk7XG5cdFx0cmV0dXJuIGxpbmVzLmZpbHRlcihsaW5lID0+IHtcblx0XHRcdGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcblx0XHRcdHJldHVybiB0cmltbWVkICYmICEodHJpbW1lZC5zdGFydHNXaXRoKCclJScpICYmIHRyaW1tZWQuZW5kc1dpdGgoJyUlJykpO1xuXHRcdH0pLmpvaW4oJ1xcbicpO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJQYXJhZ3JhcGhWaWV3KCkge1xuXHRcdGNvbnN0IHBhcmFWaWV3ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9ybmF4LXBhcmFncmFwaC12aWV3JyB9KTtcblxuXHRcdGNvbnNvbGUubG9nKCdSZW5kZXJpbmcgcGFyYWdyYXBoIHZpZXcgd2l0aCcsIHRoaXMuY3VycmVudERvY3VtZW50LnBhcmFncmFwaHMubGVuZ3RoLCAncGFyYWdyYXBocycpO1xuXG5cdFx0Ly8gUmVuZGVyIGFsbCBwYXJhZ3JhcGhzLCBpbmNsdWRpbmcgaGVhZGluZ3Ncblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY3VycmVudERvY3VtZW50LnBhcmFncmFwaHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IHBhcmEgPSB0aGlzLmN1cnJlbnREb2N1bWVudC5wYXJhZ3JhcGhzW2ldO1xuXHRcdFx0Y29uc29sZS5sb2coJ0NyZWF0aW5nIHBhcmFncmFwaCcsIGkpO1xuXG5cdFx0XHRjb25zdCBpc0hlYWRpbmcgPSBwYXJhLnRyaW0oKS5zdGFydHNXaXRoKCcjJyk7XG5cblx0XHRcdGlmIChpc0hlYWRpbmcpIHtcblx0XHRcdFx0Ly8gUmVuZGVyIGhlYWRpbmcgYXMgbm9uLW1vdmFibGUgYmxvY2tcblx0XHRcdFx0Y29uc3QgaGVhZGluZ0Jsb2NrID0gcGFyYVZpZXcuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0XHRjbHM6ICdmb3JuYXgtaGVhZGluZy1ibG9jaycsXG5cdFx0XHRcdFx0YXR0cjogeyAnZGF0YS1wYXJhLWluZGV4JzogaS50b1N0cmluZygpIH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gSGVhZGluZyBjb250ZW50IChubyBkcmFnIGhhbmRsZSlcblx0XHRcdFx0aGVhZGluZ0Jsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRcdFx0Y2xzOiAnZm9ybmF4LWhlYWRpbmctY29udGVudCcsXG5cdFx0XHRcdFx0dGV4dDogcGFyYS50cmltKClcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBDaGVjayBwYXJhZ3JhcGggc3RhdHVzIGZvciBzdHlsaW5nXG5cdFx0XHRcdGNvbnN0IGhhc0NvbW1lbnRzID0gdGhpcy5wYXJhZ3JhcGhIYXNDb21tZW50cyhpKTtcblx0XHRcdFx0Y29uc3QgaXNDb21wbGV0ZSA9IHRoaXMucGFyYWdyYXBoSXNDb21wbGV0ZShpKTtcblxuXHRcdFx0XHQvLyBEZXRlcm1pbmUgQ1NTIGNsYXNzZXMgYmFzZWQgb24gc3RhdHVzXG5cdFx0XHRcdC8vIFByaW9yaXR5OiB5ZWxsb3cgKGFsdGVybmF0aXZlcykgb3ZlcnJpZGVzIGdyZWVuIChjb21wbGV0ZSlcblx0XHRcdFx0bGV0IGNzc0NsYXNzZXMgPSAnZm9ybmF4LXBhcmFncmFwaC1ibG9jayc7XG5cdFx0XHRcdGlmIChoYXNDb21tZW50cykge1xuXHRcdFx0XHRcdGNzc0NsYXNzZXMgKz0gJyBmb3JuYXgtaGFzLWFsdGVybmF0aXZlcyc7XG5cdFx0XHRcdH0gZWxzZSBpZiAoaXNDb21wbGV0ZSkge1xuXHRcdFx0XHRcdGNzc0NsYXNzZXMgKz0gJyBmb3JuYXgtcGFyYWdyYXBoLWNvbXBsZXRlJztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IHBhcmFCbG9jayA9IHBhcmFWaWV3LmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRcdFx0Y2xzOiBjc3NDbGFzc2VzLFxuXHRcdFx0XHRcdGF0dHI6IHsgJ2RhdGEtcGFyYS1pbmRleCc6IGkudG9TdHJpbmcoKSB9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vIERyYWcgaGFuZGxlXG5cdFx0XHRcdGNvbnN0IGRyYWdIYW5kbGUgPSBwYXJhQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0XHRjbHM6ICdmb3JuYXgtZHJhZy1oYW5kbGUnLFxuXHRcdFx0XHRcdHRleHQ6ICc6Oidcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdDcmVhdGVkIGRyYWcgaGFuZGxlOicsIGRyYWdIYW5kbGUpO1xuXG5cdFx0XHRcdC8vIFBhcmFncmFwaCBjb250ZW50XG5cdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBwYXJhQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0XHRjbHM6ICdmb3JuYXgtcGFyYWdyYXBoLWNvbnRlbnQnLFxuXHRcdFx0XHRcdHRleHQ6IHBhcmFcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gU2VudGVuY2UgY291bnQgYmFkZ2Vcblx0XHRcdFx0cGFyYUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRcdFx0Y2xzOiAnZm9ybmF4LXNlbnRlbmNlLWNvdW50Jyxcblx0XHRcdFx0XHR0ZXh0OiBgJHt0aGlzLmN1cnJlbnREb2N1bWVudC5zZW50ZW5jZXNbaV0ubGVuZ3RofSBzZW50ZW5jZXNgXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8vIENvbXBsZXRpb24gdG9nZ2xlIGJ1dHRvblxuXHRcdFx0XHRjb25zdCBjb21wbGV0aW9uQnRuID0gcGFyYUJsb2NrLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHRcdFx0Y2xzOiAnZm9ybmF4LWNvbXBsZXRpb24tYnRuJyxcblx0XHRcdFx0XHR0ZXh0OiBpc0NvbXBsZXRlID8gJ1x1MjcwNScgOiAnXHUyNjEwJ1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29tcGxldGlvbkJ0bi50aXRsZSA9IGlzQ29tcGxldGUgPyAnTWFyayBhcyBpbmNvbXBsZXRlJyA6ICdNYXJrIGFzIGNvbXBsZXRlJztcblx0XHRcdFx0Y29tcGxldGlvbkJ0bi5vbmNsaWNrID0gKGUpID0+IHtcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpOyAvLyBQcmV2ZW50IHpvb20gYWN0aW9uXG5cdFx0XHRcdFx0dGhpcy50b2dnbGVQYXJhZ3JhcGhDb21wbGV0aW9uKGkpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8vIENsaWNrIHRvIHpvb20gaW50byBzZW50ZW5jZXMgYW5kIHNjcm9sbCB0byB0aGlzIHBhcmFncmFwaFxuXHRcdFx0XHRjb250ZW50Lm9uY2xpY2sgPSAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgcGFyYWdyYXBoTnVtYmVyID0gdGhpcy5nZXRQYXJhZ3JhcGhEaXNwbGF5TnVtYmVyKGkpO1xuXHRcdFx0XHRcdGlmIChwYXJhZ3JhcGhOdW1iZXIgPiAwKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnNldFpvb21MZXZlbCgnc2VudGVuY2VzJywgYFtkYXRhLXBhcmFncmFwaC1udW1iZXI9XCIke3BhcmFncmFwaE51bWJlcn1cIl1gKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy5zZXRab29tTGV2ZWwoJ3NlbnRlbmNlcycpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZygnQWJvdXQgdG8gY2FsbCBtYWtlRHJhZ2dhYmxlIGZvciBwYXJhZ3JhcGgnLCBpKTtcblxuXHRcdFx0XHR0aGlzLm1ha2VEcmFnZ2FibGUocGFyYUJsb2NrLCAncGFyYWdyYXBoJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBnZXREb2N1bWVudFRpdGxlKCk6IHN0cmluZyB7XG5cdFx0Ly8gRXh0cmFjdCB0aGUgZmlyc3QtbGV2ZWwgaGVhZGluZyAoIyB0aXRsZSkgYXMgZG9jdW1lbnQgdGl0bGVcblx0XHQvLyBJZiBubyBmaXJzdC1sZXZlbCBoZWFkaW5nIGZvdW5kLCByZXR1cm4gZGVmYXVsdCB0aXRsZVxuXG5cdFx0Ly8gQ2hlY2sgcGFyYWdyYXBocyBmb3IgZmlyc3QtbGV2ZWwgaGVhZGluZ1xuXHRcdGZvciAoY29uc3QgcGFyYWdyYXBoIG9mIHRoaXMuY3VycmVudERvY3VtZW50LnBhcmFncmFwaHMpIHtcblx0XHRcdGNvbnN0IHRyaW1tZWQgPSBwYXJhZ3JhcGgudHJpbSgpO1xuXHRcdFx0aWYgKHRyaW1tZWQuc3RhcnRzV2l0aCgnIyAnKSAmJiAhdHJpbW1lZC5zdGFydHNXaXRoKCcjIycpKSB7XG5cdFx0XHRcdC8vIEV4dHJhY3QgdGV4dCBhZnRlciBcIiMgXCIgYW5kIGNsZWFuIGl0IHVwXG5cdFx0XHRcdHJldHVybiB0cmltbWVkLnNsaWNlKDIpLnRyaW0oKSB8fCAnRG9jdW1lbnQnO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENoZWNrIHNlbnRlbmNlcyBhcyBmYWxsYmFja1xuXHRcdGZvciAoY29uc3Qgc2VudGVuY2VBcnJheSBvZiB0aGlzLmN1cnJlbnREb2N1bWVudC5zZW50ZW5jZXMpIHtcblx0XHRcdGZvciAoY29uc3Qgc2VudGVuY2Ugb2Ygc2VudGVuY2VBcnJheSkge1xuXHRcdFx0XHRjb25zdCB0cmltbWVkID0gc2VudGVuY2UudHJpbSgpO1xuXHRcdFx0XHRpZiAodHJpbW1lZC5zdGFydHNXaXRoKCcjICcpICYmICF0cmltbWVkLnN0YXJ0c1dpdGgoJyMjJykpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJpbW1lZC5zbGljZSgyKS50cmltKCkgfHwgJ0RvY3VtZW50Jztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIERlZmF1bHQgaWYgbm8gZmlyc3QtbGV2ZWwgaGVhZGluZyBmb3VuZFxuXHRcdHJldHVybiAnRG9jdW1lbnQgU3RydWN0dXJlJztcblx0fVxuXG5cdHByaXZhdGUgZ2V0UGFyYWdyYXBoRGlzcGxheU51bWJlcihwYXJhZ3JhcGhJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcblx0XHQvLyBDYWxjdWxhdGUgdGhlIGRpc3BsYXkgbnVtYmVyIGZvciB0aGlzIHBhcmFncmFwaCAoZXhjbHVkaW5nIGhlYWRpbmdzKVxuXHRcdGNvbnN0IHRhcmdldFBhcmFncmFwaCA9IHRoaXMuY3VycmVudERvY3VtZW50LnBhcmFncmFwaHNbcGFyYWdyYXBoSW5kZXhdO1xuXHRcdGlmICh0YXJnZXRQYXJhZ3JhcGgudHJpbSgpLnN0YXJ0c1dpdGgoJyMnKSkge1xuXHRcdFx0cmV0dXJuIDA7IC8vIEhlYWRpbmdzIGRvbid0IGdldCBwYXJhZ3JhcGggbnVtYmVyc1xuXHRcdH1cblxuXHRcdGxldCBkaXNwbGF5TnVtYmVyID0gMDtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8PSBwYXJhZ3JhcGhJbmRleDsgaSsrKSB7XG5cdFx0XHRjb25zdCBwYXJhZ3JhcGggPSB0aGlzLmN1cnJlbnREb2N1bWVudC5wYXJhZ3JhcGhzW2ldO1xuXHRcdFx0aWYgKCFwYXJhZ3JhcGgudHJpbSgpLnN0YXJ0c1dpdGgoJyMnKSkge1xuXHRcdFx0XHRkaXNwbGF5TnVtYmVyKys7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBkaXNwbGF5TnVtYmVyO1xuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJTZW50ZW5jZVZpZXcoKSB7XG5cdFx0Y29uc3Qgc2VudFZpZXcgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JuYXgtc2VudGVuY2UtdmlldycgfSk7XG5cblx0XHRsZXQgcGFyYWdyYXBoQ291bnRlciA9IDE7XG5cblx0XHR0aGlzLmN1cnJlbnREb2N1bWVudC5zZW50ZW5jZXMuZm9yRWFjaCgoc2VudGVuY2VzOiBzdHJpbmdbXSwgcGFyYUluZGV4OiBudW1iZXIpID0+IHtcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgcGFyYWdyYXBoIGNvbnRhaW5zIG9ubHkgaGVhZGluZ3Ncblx0XHRcdGNvbnN0IGhhc05vbkhlYWRpbmdDb250ZW50ID0gc2VudGVuY2VzLnNvbWUoc2VudGVuY2UgPT4gIXNlbnRlbmNlLnRyaW0oKS5zdGFydHNXaXRoKCcjJykpO1xuXG5cdFx0XHRpZiAoaGFzTm9uSGVhZGluZ0NvbnRlbnQpIHtcblx0XHRcdFx0Ly8gT25seSBzaG93IHBhcmFncmFwaCBoZWFkZXIgZm9yIHBhcmFncmFwaHMgd2l0aCBhY3R1YWwgY29udGVudFxuXHRcdFx0XHRjb25zdCBwYXJhSGVhZGVyID0gc2VudFZpZXcuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0XHRjbHM6ICdmb3JuYXgtcGFyYWdyYXBoLWhlYWRlcicsXG5cdFx0XHRcdFx0dGV4dDogYFBhcmFncmFwaCAke3BhcmFncmFwaENvdW50ZXJ9YCxcblx0XHRcdFx0XHRhdHRyOiB7ICdkYXRhLXBhcmFncmFwaC1udW1iZXInOiBwYXJhZ3JhcGhDb3VudGVyLnRvU3RyaW5nKCkgfVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cGFyYWdyYXBoQ291bnRlcisrO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZW50ZW5jZSBibG9ja3Mgd2l0aGluIHRoaXMgcGFyYWdyYXBoXG5cdFx0XHRjb25zdCBzZW50ZW5jZUNvbnRhaW5lciA9IHNlbnRWaWV3LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Zvcm5heC1zZW50ZW5jZS1jb250YWluZXInIH0pO1xuXG5cdFx0XHRzZW50ZW5jZXMuZm9yRWFjaCgoc2VudGVuY2U6IHN0cmluZywgc2VudEluZGV4OiBudW1iZXIpID0+IHtcblx0XHRcdFx0Y29uc3QgaXNIZWFkaW5nID0gc2VudGVuY2UudHJpbSgpLnN0YXJ0c1dpdGgoJyMnKTtcblxuXHRcdFx0XHRpZiAoaXNIZWFkaW5nKSB7XG5cdFx0XHRcdFx0Ly8gUmVuZGVyIGhlYWRpbmcgYXMgbm9uLW1vdmFibGUgYmxvY2sgKG5vIHBhcmFncmFwaCBoZWFkZXIgYWJvdmUgaXQpXG5cdFx0XHRcdFx0Y29uc3QgaGVhZGluZ0Jsb2NrID0gc2VudGVuY2VDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdFx0XHRcdGNsczogJ2Zvcm5heC1oZWFkaW5nLWJsb2NrJyxcblx0XHRcdFx0XHRcdGF0dHI6IHtcblx0XHRcdFx0XHRcdFx0J2RhdGEtcGFyYS1pbmRleCc6IHBhcmFJbmRleC50b1N0cmluZygpLFxuXHRcdFx0XHRcdFx0XHQnZGF0YS1zZW50LWluZGV4Jzogc2VudEluZGV4LnRvU3RyaW5nKClcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIEhlYWRpbmcgY29udGVudCAobm8gZHJhZyBoYW5kbGUsIG5vIGVkaXQgYnV0dG9uKVxuXHRcdFx0XHRcdGhlYWRpbmdCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHRcdFx0Y2xzOiAnZm9ybmF4LWhlYWRpbmctY29udGVudCcsXG5cdFx0XHRcdFx0XHR0ZXh0OiBzZW50ZW5jZS50cmltKClcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpZiB0aGlzIHNlbnRlbmNlIGhhcyBhbHRlcm5hdGl2ZXNcblx0XHRcdFx0XHRjb25zdCBoYXNBbHRlcm5hdGl2ZXMgPSB0aGlzLnNlbnRlbmNlSGFzQWx0ZXJuYXRpdmVzKHBhcmFJbmRleCwgc2VudEluZGV4KTtcblx0XHRcdFx0XHRjb25zdCBhbHRlcm5hdGl2ZXNEYXRhID0gdGhpcy5nZXRTZW50ZW5jZUFsdGVybmF0aXZlcyhwYXJhSW5kZXgsIHNlbnRJbmRleCk7XG5cblx0XHRcdFx0XHRjb25zdCBzZW50QmxvY2sgPSBzZW50ZW5jZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHRcdFx0Y2xzOiBgZm9ybmF4LXNlbnRlbmNlLWJsb2NrICR7aGFzQWx0ZXJuYXRpdmVzID8gJ2Zvcm5heC1oYXMtYWx0ZXJuYXRpdmVzJyA6ICcnfWAsXG5cdFx0XHRcdFx0XHRhdHRyOiB7XG5cdFx0XHRcdFx0XHRcdCdkYXRhLXBhcmEtaW5kZXgnOiBwYXJhSW5kZXgudG9TdHJpbmcoKSxcblx0XHRcdFx0XHRcdFx0J2RhdGEtc2VudC1pbmRleCc6IHNlbnRJbmRleC50b1N0cmluZygpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvLyBEcmFnIGhhbmRsZVxuXHRcdFx0XHRcdHNlbnRCbG9jay5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JuYXgtZHJhZy1oYW5kbGUnLCB0ZXh0OiAnOjonIH0pO1xuXG5cdFx0XHRcdFx0Ly8gTWFpbiBzZW50ZW5jZSByb3cgd2l0aCBjdXJyZW50IGNvbnRlbnQgYW5kIGJ1dHRvbnNcblx0XHRcdFx0XHRjb25zdCBzZW50ZW5jZVJvdyA9IHNlbnRCbG9jay5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JuYXgtc2VudGVuY2Utcm93JyB9KTtcblxuXHRcdFx0XHRcdC8vIFNlbnRlbmNlIGNvbnRlbnQgKGN1cnJlbnQgYWN0aXZlIHNlbnRlbmNlKVxuXHRcdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBzZW50ZW5jZVJvdy5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0XHRcdFx0Y2xzOiAnZm9ybmF4LXNlbnRlbmNlLWNvbnRlbnQnLFxuXHRcdFx0XHRcdFx0dGV4dDogc2VudGVuY2Vcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIEFkZCBidXR0b24gKGZvciBhZGRpbmcgbmV3IGFsdGVybmF0aXZlcylcblx0XHRcdFx0XHRjb25zdCBhZGRCdG4gPSBzZW50ZW5jZVJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHRcdFx0Y2xzOiAnZm9ybmF4LWFkZC1hbHRlcm5hdGl2ZS1idG4nLFxuXHRcdFx0XHRcdFx0dGV4dDogJysnXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRhZGRCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2hvd0FkZEFsdGVybmF0aXZlSW5wdXQoc2VudEJsb2NrLCBwYXJhSW5kZXgsIHNlbnRJbmRleCk7XG5cblx0XHRcdFx0XHQvLyBTYXZlL2NoZWNrIGJ1dHRvbiAob25seSBpZiB0aGVyZSBhcmUgYWx0ZXJuYXRpdmVzIHRvIGNvbW1pdClcblx0XHRcdFx0XHRpZiAoaGFzQWx0ZXJuYXRpdmVzKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBzYXZlQnRuID0gc2VudGVuY2VSb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdFx0XHRcdFx0Y2xzOiAnZm9ybmF4LXNhdmUtZmluYWwtYnRuJyxcblx0XHRcdFx0XHRcdFx0dGV4dDogJ1x1MjcxMydcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRzYXZlQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNvbW1pdFNlbnRlbmNlQ2hvaWNlKHBhcmFJbmRleCwgc2VudEluZGV4KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBBbHdheXMgc2hvdyBhbHRlcm5hdGl2ZXMgaWYgdGhleSBleGlzdCAobm8gZXhwYW5kL2NvbGxhcHNlKVxuXHRcdFx0XHRcdGlmIChoYXNBbHRlcm5hdGl2ZXMpIHtcblx0XHRcdFx0XHRcdHRoaXMuc2hvd1NlbnRlbmNlQWx0ZXJuYXRpdmVzKHNlbnRCbG9jaywgcGFyYUluZGV4LCBzZW50SW5kZXgpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHRoaXMubWFrZURyYWdnYWJsZShzZW50QmxvY2ssICdzZW50ZW5jZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgbWFrZURyYWdnYWJsZShlbGVtZW50OiBIVE1MRWxlbWVudCwgdHlwZTogJ3BhcmFncmFwaCcgfCAnc2VudGVuY2UnKSB7XG5cdFx0bGV0IGlzRHJhZ2dpbmcgPSBmYWxzZTtcblx0XHRsZXQgc3RhcnRZID0gMDtcblx0XHRsZXQgc3RhcnRUb3AgPSAwO1xuXHRcdGxldCBkcmFnZ2VkRWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuXHRcdGNvbnN0IGhhbmRsZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm5heC1kcmFnLWhhbmRsZScpIGFzIEhUTUxFbGVtZW50O1xuXG5cdFx0Y29uc3QgaGFuZGxlTW91c2VEb3duID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGlzRHJhZ2dpbmcgPSB0cnVlO1xuXHRcdFx0ZHJhZ2dlZEVsZW1lbnQgPSBlbGVtZW50O1xuXHRcdFx0c3RhcnRZID0gZS5jbGllbnRZO1xuXHRcdFx0c3RhcnRUb3AgPSBlbGVtZW50Lm9mZnNldFRvcDtcblx0XHRcdGVsZW1lbnQuYWRkQ2xhc3MoJ2RyYWdnaW5nJyk7XG5cdFx0XHRkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICdncmFiYmluZyc7XG5cblx0XHRcdC8vIFByZXZlbnQgdGV4dCBzZWxlY3Rpb24gd2hpbGUgZHJhZ2dpbmdcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgaGFuZGxlTW91c2VNb3ZlID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGlmICghaXNEcmFnZ2luZyB8fCAhZHJhZ2dlZEVsZW1lbnQpIHJldHVybjtcblxuXHRcdFx0Y29uc3QgZGVsdGFZID0gZS5jbGllbnRZIC0gc3RhcnRZO1xuXHRcdFx0ZHJhZ2dlZEVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoJHtkZWx0YVl9cHgpYDtcblxuXHRcdFx0Ly8gSGlnaGxpZ2h0IHBvdGVudGlhbCBkcm9wIHRhcmdldHNcblx0XHRcdHRoaXMudXBkYXRlRHJvcFRhcmdldHMoZSwgZHJhZ2dlZEVsZW1lbnQsIHR5cGUpO1xuXHRcdH07XG5cblx0XHRjb25zdCBoYW5kbGVNb3VzZVVwID0gYXN5bmMgKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGlmICghaXNEcmFnZ2luZyB8fCAhZHJhZ2dlZEVsZW1lbnQpIHJldHVybjtcblxuXHRcdFx0Ly8gRmluZCB0aGUgZHJvcCB0YXJnZXRcblx0XHRcdGNvbnN0IGRyb3BJbmZvID0gdGhpcy5maW5kRHJvcFRhcmdldChlLCBkcmFnZ2VkRWxlbWVudCwgdHlwZSk7XG5cblx0XHRcdGlzRHJhZ2dpbmcgPSBmYWxzZTtcblx0XHRcdGRyYWdnZWRFbGVtZW50LnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xuXHRcdFx0ZHJhZ2dlZEVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJyc7XG5cdFx0XHRkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9ICcnO1xuXG5cdFx0XHQvLyBDbGVhciBkcm9wIHRhcmdldCBoaWdobGlnaHRzXG5cdFx0XHR0aGlzLmNsZWFyRHJvcFRhcmdldHModHlwZSk7XG5cblx0XHRcdC8vIFBlcmZvcm0gdGhlIGluc2VydGlvbiBpZiB3ZSBoYXZlIGEgdmFsaWQgZHJvcCB0YXJnZXRcblx0XHRcdGlmIChkcm9wSW5mbyAmJiBkcm9wSW5mby50YXJnZXQgIT09IGRyYWdnZWRFbGVtZW50KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuaW5zZXJ0RWxlbWVudChkcmFnZ2VkRWxlbWVudCwgZHJvcEluZm8udGFyZ2V0LCBkcm9wSW5mby5wb3NpdGlvbiwgdHlwZSwgZHJvcEluZm8uaXNIZWFkaW5nKTtcblx0XHRcdH1cblxuXHRcdFx0ZHJhZ2dlZEVsZW1lbnQgPSBudWxsO1xuXHRcdH07XG5cblx0XHQvLyBVc2UgYWRkRXZlbnRMaXN0ZW5lciBpbnN0ZWFkIG9mIGRpcmVjdCBhc3NpZ25tZW50IHRvIGF2b2lkIGNvbmZsaWN0c1xuXHRcdGhhbmRsZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVNb3VzZURvd24pO1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSk7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZU1vdXNlVXApO1xuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVEcm9wVGFyZ2V0cyhlOiBNb3VzZUV2ZW50LCBkcmFnZ2VkRWxlbWVudDogSFRNTEVsZW1lbnQsIHR5cGU6ICdwYXJhZ3JhcGgnIHwgJ3NlbnRlbmNlJykge1xuXHRcdC8vIENsZWFyIGV4aXN0aW5nIGhpZ2hsaWdodHNcblx0XHR0aGlzLmNsZWFyRHJvcFRhcmdldHModHlwZSk7XG5cblx0XHQvLyBGaW5kIGFsbCBwb3RlbnRpYWwgZHJvcCB0YXJnZXRzIChib3RoIGNvbnRlbnQgYmxvY2tzIGFuZCBoZWFkaW5ncylcblx0XHRjb25zdCBjb250ZW50VGFyZ2V0cyA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHR0eXBlID09PSAncGFyYWdyYXBoJyA/ICcuZm9ybmF4LXBhcmFncmFwaC1ibG9jaycgOiAnLmZvcm5heC1zZW50ZW5jZS1ibG9jaydcblx0XHQpO1xuXHRcdGNvbnN0IGhlYWRpbmdUYXJnZXRzID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmZvcm5heC1oZWFkaW5nLWJsb2NrJyk7XG5cdFx0Y29uc3QgYWxsVGFyZ2V0cyA9IFsuLi5BcnJheS5mcm9tKGNvbnRlbnRUYXJnZXRzKSwgLi4uQXJyYXkuZnJvbShoZWFkaW5nVGFyZ2V0cyldO1xuXG5cdFx0YWxsVGFyZ2V0cy5mb3JFYWNoKHRhcmdldCA9PiB7XG5cdFx0XHRpZiAodGFyZ2V0ID09PSBkcmFnZ2VkRWxlbWVudCkgcmV0dXJuO1xuXG5cdFx0XHRjb25zdCByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0Y29uc3QgbW91c2VZID0gZS5jbGllbnRZO1xuXG5cdFx0XHQvLyBDaGVjayBpZiBtb3VzZSBpcyBvdmVyIHRoaXMgdGFyZ2V0XG5cdFx0XHRpZiAobW91c2VZID49IHJlY3QudG9wICYmIG1vdXNlWSA8PSByZWN0LmJvdHRvbSkge1xuXHRcdFx0XHQvLyBEZXRlcm1pbmUgcG9zaXRpb24gZm9yIHZpc3VhbCBmZWVkYmFja1xuXHRcdFx0XHRjb25zdCBtaWRkbGVZID0gcmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDI7XG5cdFx0XHRcdGNvbnN0IHBvc2l0aW9uID0gbW91c2VZIDwgbWlkZGxlWSA/ICdiZWZvcmUnIDogJ2FmdGVyJztcblxuXHRcdFx0XHR0YXJnZXQuYWRkQ2xhc3MoJ2Zvcm5heC1kcm9wLXRhcmdldCcpO1xuXHRcdFx0XHR0YXJnZXQuYWRkQ2xhc3MoYGZvcm5heC1kcm9wLSR7cG9zaXRpb259YCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGZpbmREcm9wVGFyZ2V0KGU6IE1vdXNlRXZlbnQsIGRyYWdnZWRFbGVtZW50OiBIVE1MRWxlbWVudCwgdHlwZTogJ3BhcmFncmFwaCcgfCAnc2VudGVuY2UnKTogeyB0YXJnZXQ6IEhUTUxFbGVtZW50LCBwb3NpdGlvbjogJ2JlZm9yZScgfCAnYWZ0ZXInLCBpc0hlYWRpbmc/OiBib29sZWFuIH0gfCBudWxsIHtcblx0XHQvLyBGaW5kIGFsbCBwb3RlbnRpYWwgZHJvcCB0YXJnZXRzIChib3RoIGNvbnRlbnQgYmxvY2tzIGFuZCBoZWFkaW5ncylcblx0XHRjb25zdCBjb250ZW50VGFyZ2V0cyA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHR0eXBlID09PSAncGFyYWdyYXBoJyA/ICcuZm9ybmF4LXBhcmFncmFwaC1ibG9jaycgOiAnLmZvcm5heC1zZW50ZW5jZS1ibG9jaydcblx0XHQpO1xuXHRcdGNvbnN0IGhlYWRpbmdUYXJnZXRzID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmZvcm5heC1oZWFkaW5nLWJsb2NrJyk7XG5cdFx0Y29uc3QgYWxsVGFyZ2V0cyA9IFsuLi5BcnJheS5mcm9tKGNvbnRlbnRUYXJnZXRzKSwgLi4uQXJyYXkuZnJvbShoZWFkaW5nVGFyZ2V0cyldO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhbGxUYXJnZXRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCB0YXJnZXQgPSBhbGxUYXJnZXRzW2ldIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0aWYgKHRhcmdldCA9PT0gZHJhZ2dlZEVsZW1lbnQpIGNvbnRpbnVlO1xuXG5cdFx0XHRjb25zdCByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0Y29uc3QgbW91c2VZID0gZS5jbGllbnRZO1xuXG5cdFx0XHRpZiAobW91c2VZID49IHJlY3QudG9wICYmIG1vdXNlWSA8PSByZWN0LmJvdHRvbSkge1xuXHRcdFx0XHQvLyBEZXRlcm1pbmUgaWYgd2UncmUgaW5zZXJ0aW5nIGJlZm9yZSBvciBhZnRlciBiYXNlZCBvbiBtb3VzZSBwb3NpdGlvbiB3aXRoaW4gdGhlIGVsZW1lbnRcblx0XHRcdFx0Y29uc3QgbWlkZGxlWSA9IHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyO1xuXHRcdFx0XHRjb25zdCBwb3NpdGlvbiA9IG1vdXNlWSA8IG1pZGRsZVkgPyAnYmVmb3JlJyA6ICdhZnRlcic7XG5cdFx0XHRcdGNvbnN0IGlzSGVhZGluZyA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Zvcm5heC1oZWFkaW5nLWJsb2NrJyk7XG5cblx0XHRcdFx0cmV0dXJuIHsgdGFyZ2V0LCBwb3NpdGlvbiwgaXNIZWFkaW5nIH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRwcml2YXRlIGNsZWFyRHJvcFRhcmdldHModHlwZTogJ3BhcmFncmFwaCcgfCAnc2VudGVuY2UnKSB7XG5cdFx0Ly8gQ2xlYXIgaGlnaGxpZ2h0cyBmcm9tIGJvdGggY29udGVudCBibG9ja3MgYW5kIGhlYWRpbmdzXG5cdFx0Y29uc3QgY29udGVudFRhcmdldHMgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKFxuXHRcdFx0dHlwZSA9PT0gJ3BhcmFncmFwaCcgPyAnLmZvcm5heC1wYXJhZ3JhcGgtYmxvY2snIDogJy5mb3JuYXgtc2VudGVuY2UtYmxvY2snXG5cdFx0KTtcblx0XHRjb25zdCBoZWFkaW5nVGFyZ2V0cyA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JuYXgtaGVhZGluZy1ibG9jaycpO1xuXHRcdGNvbnN0IGFsbFRhcmdldHMgPSBbLi4uQXJyYXkuZnJvbShjb250ZW50VGFyZ2V0cyksIC4uLkFycmF5LmZyb20oaGVhZGluZ1RhcmdldHMpXTtcblxuXHRcdGFsbFRhcmdldHMuZm9yRWFjaCh0YXJnZXQgPT4ge1xuXHRcdFx0dGFyZ2V0LnJlbW92ZUNsYXNzKCdmb3JuYXgtZHJvcC10YXJnZXQnKTtcblx0XHRcdHRhcmdldC5yZW1vdmVDbGFzcygnZm9ybmF4LWRyb3AtYmVmb3JlJyk7XG5cdFx0XHR0YXJnZXQucmVtb3ZlQ2xhc3MoJ2Zvcm5heC1kcm9wLWFmdGVyJyk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGluc2VydEVsZW1lbnQoZHJhZ2dlZEVsZW1lbnQ6IEhUTUxFbGVtZW50LCBkcm9wVGFyZ2V0OiBIVE1MRWxlbWVudCwgcG9zaXRpb246ICdiZWZvcmUnIHwgJ2FmdGVyJywgdHlwZTogJ3BhcmFncmFwaCcgfCAnc2VudGVuY2UnLCBpc0hlYWRpbmdUYXJnZXQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuXHRcdGlmICh0eXBlID09PSAncGFyYWdyYXBoJykge1xuXHRcdFx0Y29uc3QgZHJhZ2dlZEluZGV4ID0gcGFyc2VJbnQoZHJhZ2dlZEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcmEtaW5kZXgnKSB8fCAnMCcpO1xuXHRcdFx0bGV0IGRyb3BJbmRleCA9IHBhcnNlSW50KGRyb3BUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcmEtaW5kZXgnKSB8fCAnMCcpO1xuXG5cdFx0XHQvLyBSZW1vdmUgdGhlIGRyYWdnZWQgcGFyYWdyYXBoIGFuZCBpdHMgc2VudGVuY2VzIGZyb20gdGhlaXIgY3VycmVudCBwb3NpdGlvbnNcblx0XHRcdGNvbnN0IGRyYWdnZWRQYXJhZ3JhcGggPSB0aGlzLmN1cnJlbnREb2N1bWVudC5wYXJhZ3JhcGhzLnNwbGljZShkcmFnZ2VkSW5kZXgsIDEpWzBdO1xuXHRcdFx0Y29uc3QgZHJhZ2dlZFNlbnRlbmNlcyA9IHRoaXMuY3VycmVudERvY3VtZW50LnNlbnRlbmNlcy5zcGxpY2UoZHJhZ2dlZEluZGV4LCAxKVswXTtcblxuXHRcdFx0Ly8gSU1QT1JUQU5UOiBBbHNvIG1vdmUgdGhlIHJhdyBwYXJhZ3JhcGggdG8gcHJlc2VydmUgc2VudGVuY2UgYmxvY2tzIHdpdGggY29tbWVudHNcblx0XHRcdGxldCBkcmFnZ2VkUmF3UGFyYWdyYXBoO1xuXHRcdFx0aWYgKHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHMpIHtcblx0XHRcdFx0ZHJhZ2dlZFJhd1BhcmFncmFwaCA9IHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHMuc3BsaWNlKGRyYWdnZWRJbmRleCwgMSlbMF07XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhbGN1bGF0ZSB0aGUgaW5zZXJ0aW9uIGluZGV4XG5cdFx0XHRsZXQgaW5zZXJ0SW5kZXggPSBkcm9wSW5kZXg7XG5cblx0XHRcdC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIGhlYWRpbmcgdGFyZ2V0c1xuXHRcdFx0aWYgKGlzSGVhZGluZ1RhcmdldCkge1xuXHRcdFx0XHQvLyBXaGVuIGRyb3BwaW5nIHJlbGF0aXZlIHRvIGEgaGVhZGluZywgd2UgbmVlZCB0byBiZSBtb3JlIGNhcmVmdWwgYWJvdXQgcG9zaXRpb25pbmdcblx0XHRcdFx0aWYgKHBvc2l0aW9uID09PSAnYmVmb3JlJykge1xuXHRcdFx0XHRcdC8vIEluc2VydCBiZWZvcmUgdGhlIGhlYWRpbmcgLSBubyBhZGp1c3RtZW50IG5lZWRlZFxuXHRcdFx0XHRcdGluc2VydEluZGV4ID0gZHJvcEluZGV4O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIEluc2VydCBhZnRlciB0aGUgaGVhZGluZyAtIHBvc2l0aW9uIGFmdGVyIHRoZSBoZWFkaW5nXG5cdFx0XHRcdFx0aW5zZXJ0SW5kZXggPSBkcm9wSW5kZXggKyAxO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBSZWd1bGFyIHBhcmFncmFwaCB0YXJnZXQgaGFuZGxpbmdcblx0XHRcdFx0Ly8gQWRqdXN0IGZvciB0aGUgcmVtb3ZhbCBpZiBkcmFnZ2VkIHdhcyBiZWZvcmUgdGhlIGRyb3AgdGFyZ2V0XG5cdFx0XHRcdGlmIChkcmFnZ2VkSW5kZXggPCBkcm9wSW5kZXgpIHtcblx0XHRcdFx0XHRpbnNlcnRJbmRleCA9IGRyb3BJbmRleCAtIDE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBZGp1c3QgZm9yIGJlZm9yZS9hZnRlciBwb3NpdGlvblxuXHRcdFx0XHRpZiAocG9zaXRpb24gPT09ICdhZnRlcicpIHtcblx0XHRcdFx0XHRpbnNlcnRJbmRleCArPSAxO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkanVzdCBmb3IgcmVtb3ZhbCBzaGlmdCBpZiBuZWVkZWRcblx0XHRcdGlmICghaXNIZWFkaW5nVGFyZ2V0ICYmIGRyYWdnZWRJbmRleCA8IGRyb3BJbmRleCkge1xuXHRcdFx0XHRpbnNlcnRJbmRleCA9IE1hdGgubWF4KDAsIGluc2VydEluZGV4KTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSW5zZXJ0IGF0IHRoZSBuZXcgcG9zaXRpb25cblx0XHRcdHRoaXMuY3VycmVudERvY3VtZW50LnBhcmFncmFwaHMuc3BsaWNlKGluc2VydEluZGV4LCAwLCBkcmFnZ2VkUGFyYWdyYXBoKTtcblx0XHRcdHRoaXMuY3VycmVudERvY3VtZW50LnNlbnRlbmNlcy5zcGxpY2UoaW5zZXJ0SW5kZXgsIDAsIGRyYWdnZWRTZW50ZW5jZXMpO1xuXG5cdFx0XHQvLyBBbHNvIGluc2VydCB0aGUgcmF3IHBhcmFncmFwaCB3aXRoIGNvbW1lbnRzXG5cdFx0XHRpZiAodGhpcy5jdXJyZW50RG9jdW1lbnQucmF3UGFyYWdyYXBocyAmJiBkcmFnZ2VkUmF3UGFyYWdyYXBoKSB7XG5cdFx0XHRcdHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHMuc3BsaWNlKGluc2VydEluZGV4LCAwLCBkcmFnZ2VkUmF3UGFyYWdyYXBoKTtcblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBNb3Zpbmcgc2VudGVuY2UgYmxvY2tzIGJldHdlZW4gcGFyYWdyYXBoc1xuXHRcdFx0Y29uc3QgZHJhZ2dlZFBhcmFJbmRleCA9IHBhcnNlSW50KGRyYWdnZWRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1wYXJhLWluZGV4JykgfHwgJzAnKTtcblx0XHRcdGNvbnN0IGRyYWdnZWRTZW50SW5kZXggPSBwYXJzZUludChkcmFnZ2VkRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VudC1pbmRleCcpIHx8ICcwJyk7XG5cdFx0XHRsZXQgZHJvcFBhcmFJbmRleCA9IHBhcnNlSW50KGRyb3BUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXBhcmEtaW5kZXgnKSB8fCAnMCcpO1xuXHRcdFx0bGV0IGRyb3BTZW50SW5kZXggPSBwYXJzZUludChkcm9wVGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zZW50LWluZGV4JykgfHwgJzAnKTtcblxuXHRcdFx0Ly8gU3BlY2lhbCBoYW5kbGluZyBmb3IgaGVhZGluZyB0YXJnZXRzIGluIHNlbnRlbmNlIHZpZXdcblx0XHRcdGlmIChpc0hlYWRpbmdUYXJnZXQgJiYgcG9zaXRpb24gPT09ICdhZnRlcicpIHtcblx0XHRcdFx0Ly8gV2hlbiBkcm9wcGluZyBBRlRFUiBhIGhlYWRpbmcsIHdlIHdhbnQgdG8gY3JlYXRlIGEgbmV3IHBhcmFncmFwaFxuXHRcdFx0XHQvLyBFeHRyYWN0IHRoZSBjb21wbGV0ZSBzZW50ZW5jZSBibG9jayAoaW5jbHVkaW5nIGFsbCBhbHRlcm5hdGl2ZXMvY29tbWVudHMpXG5cdFx0XHRcdGNvbnN0IGRyYWdnZWRTZW50ZW5jZSA9IHRoaXMuY3VycmVudERvY3VtZW50LnNlbnRlbmNlc1tkcmFnZ2VkUGFyYUluZGV4XVtkcmFnZ2VkU2VudEluZGV4XTtcblx0XHRcdFx0bGV0IGRyYWdnZWRTZW50ZW5jZUJsb2NrID0gW2RyYWdnZWRTZW50ZW5jZV07IC8vIERlZmF1bHQgdG8ganVzdCB0aGUgc2VudGVuY2VcblxuXHRcdFx0XHQvLyBFeHRyYWN0IHRoZSBjb21wbGV0ZSBzZW50ZW5jZSBibG9jayBmcm9tIHJhdyBwYXJhZ3JhcGhzIChpbmNsdWRpbmcgY29tbWVudHMpXG5cdFx0XHRcdGlmICh0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzKSB7XG5cdFx0XHRcdFx0Y29uc3QgZXh0cmFjdGVkQmxvY2sgPSB0aGlzLmV4dHJhY3RTZW50ZW5jZUJsb2NrKHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbZHJhZ2dlZFBhcmFJbmRleF0sIGRyYWdnZWRTZW50SW5kZXgpO1xuXHRcdFx0XHRcdGlmIChleHRyYWN0ZWRCbG9jay5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRkcmFnZ2VkU2VudGVuY2VCbG9jayA9IGV4dHJhY3RlZEJsb2NrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFJlbW92ZSB0aGUgY29tcGxldGUgYmxvY2sgZnJvbSBzb3VyY2UgcGFyYWdyYXBoXG5cdFx0XHRcdFx0Y29uc3QgdXBkYXRlZFNvdXJjZVBhcmFncmFwaCA9IHRoaXMucmVtb3ZlU2VudGVuY2VCbG9jayh0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzW2RyYWdnZWRQYXJhSW5kZXhdLCBkcmFnZ2VkU2VudEluZGV4KTtcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzW2RyYWdnZWRQYXJhSW5kZXhdID0gdXBkYXRlZFNvdXJjZVBhcmFncmFwaDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlbW92ZSBmcm9tIHNlbnRlbmNlcyBhcnJheVxuXHRcdFx0XHR0aGlzLmN1cnJlbnREb2N1bWVudC5zZW50ZW5jZXNbZHJhZ2dlZFBhcmFJbmRleF0uc3BsaWNlKGRyYWdnZWRTZW50SW5kZXgsIDEpO1xuXG5cdFx0XHRcdC8vIENyZWF0ZSBhIG5ldyBwYXJhZ3JhcGggYWZ0ZXIgdGhlIHRhcmdldCBoZWFkaW5nJ3MgcGFyYWdyYXBoXG5cdFx0XHRcdGNvbnN0IGluc2VydFBhcmFJbmRleCA9IGRyb3BQYXJhSW5kZXggKyAxO1xuXG5cdFx0XHRcdC8vIEluc2VydCBuZXcgcGFyYWdyYXBoIHdpdGggdGhlIGNvbXBsZXRlIHNlbnRlbmNlIGJsb2NrXG5cdFx0XHRcdHRoaXMuY3VycmVudERvY3VtZW50LnNlbnRlbmNlcy5zcGxpY2UoaW5zZXJ0UGFyYUluZGV4LCAwLCBbZHJhZ2dlZFNlbnRlbmNlXSk7XG5cblx0XHRcdFx0Ly8gSW5zZXJ0IG5ldyBwYXJhZ3JhcGggaW4gcmF3IHBhcmFncmFwaHMgYXJyYXkgd2l0aCBjb21wbGV0ZSBibG9ja1xuXHRcdFx0XHRpZiAodGhpcy5jdXJyZW50RG9jdW1lbnQucmF3UGFyYWdyYXBocykge1xuXHRcdFx0XHRcdGNvbnN0IG5ld1Jhd1BhcmFncmFwaCA9IGRyYWdnZWRTZW50ZW5jZUJsb2NrLmpvaW4oJ1xcbicpO1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHMuc3BsaWNlKGluc2VydFBhcmFJbmRleCwgMCwgbmV3UmF3UGFyYWdyYXBoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFVwZGF0ZSBjbGVhbiBwYXJhZ3JhcGhzIGFycmF5XG5cdFx0XHRcdHRoaXMuY3VycmVudERvY3VtZW50LnBhcmFncmFwaHMuc3BsaWNlKGluc2VydFBhcmFJbmRleCwgMCwgZHJhZ2dlZFNlbnRlbmNlKTtcblxuXHRcdFx0XHQvLyBSZS1zeW5jIHRoZSBkYXRhIHN0cnVjdHVyZXMgdG8gZW5zdXJlIGNvbnNpc3RlbmN5XG5cdFx0XHRcdHRoaXMuc3luY0Zyb21SYXdQYXJhZ3JhcGhzKCk7XG5cblx0XHRcdFx0Ly8gU2F2ZSBhbmQgcmUtcmVuZGVyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZUNoYW5nZXNUb0ZpbGUoKTtcblx0XHRcdFx0dGhpcy5yZW5kZXJDdXJyZW50Wm9vbSgpO1xuXHRcdFx0XHRyZXR1cm47IC8vIEV4aXQgZWFybHksIHdlJ3ZlIGhhbmRsZWQgdGhpcyBjYXNlXG5cdFx0XHR9IGVsc2UgaWYgKGlzSGVhZGluZ1RhcmdldCkge1xuXHRcdFx0XHQvLyBCZWZvcmUgaGVhZGluZyAtIG5vcm1hbCBpbnNlcnRpb24gbG9naWNcblx0XHRcdFx0aWYgKHBvc2l0aW9uID09PSAnYmVmb3JlJykge1xuXHRcdFx0XHRcdGRyb3BTZW50SW5kZXggPSBkcm9wU2VudEluZGV4O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEV4dHJhY3QgdGhlIGVudGlyZSBzZW50ZW5jZSBibG9jayAoc2VudGVuY2UgKyBjb21tZW50cykgZnJvbSByYXcgcGFyYWdyYXBoc1xuXHRcdFx0aWYgKHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHMpIHtcblx0XHRcdFx0aWYgKGRyYWdnZWRQYXJhSW5kZXggPT09IGRyb3BQYXJhSW5kZXgpIHtcblx0XHRcdFx0XHQvLyBNb3Zpbmcgd2l0aGluIHRoZSBzYW1lIHBhcmFncmFwaCAtIGhhbmRsZSBhcyBzaW5nbGUgb3BlcmF0aW9uXG5cdFx0XHRcdFx0Y29uc3QgcGFyYWdyYXBoID0gdGhpcy5jdXJyZW50RG9jdW1lbnQucmF3UGFyYWdyYXBoc1tkcmFnZ2VkUGFyYUluZGV4XTtcblx0XHRcdFx0XHRjb25zdCB1cGRhdGVkUGFyYWdyYXBoID0gdGhpcy5tb3ZlU2VudGVuY2VCbG9ja1dpdGhpblBhcmFncmFwaChcblx0XHRcdFx0XHRcdHBhcmFncmFwaCxcblx0XHRcdFx0XHRcdGRyYWdnZWRTZW50SW5kZXgsXG5cdFx0XHRcdFx0XHRkcm9wU2VudEluZGV4LFxuXHRcdFx0XHRcdFx0cG9zaXRpb25cblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbZHJhZ2dlZFBhcmFJbmRleF0gPSB1cGRhdGVkUGFyYWdyYXBoO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIE1vdmluZyBiZXR3ZWVuIGRpZmZlcmVudCBwYXJhZ3JhcGhzXG5cdFx0XHRcdFx0Y29uc3Qgc291cmNlUGFyYWdyYXBoID0gdGhpcy5jdXJyZW50RG9jdW1lbnQucmF3UGFyYWdyYXBoc1tkcmFnZ2VkUGFyYUluZGV4XTtcblx0XHRcdFx0XHRjb25zdCB0YXJnZXRQYXJhZ3JhcGggPSB0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzW2Ryb3BQYXJhSW5kZXhdO1xuXG5cdFx0XHRcdFx0Y29uc3QgZXh0cmFjdGVkQmxvY2sgPSB0aGlzLmV4dHJhY3RTZW50ZW5jZUJsb2NrKHNvdXJjZVBhcmFncmFwaCwgZHJhZ2dlZFNlbnRJbmRleCk7XG5cdFx0XHRcdFx0Y29uc3QgdXBkYXRlZFNvdXJjZVBhcmFncmFwaCA9IHRoaXMucmVtb3ZlU2VudGVuY2VCbG9jayhzb3VyY2VQYXJhZ3JhcGgsIGRyYWdnZWRTZW50SW5kZXgpO1xuXHRcdFx0XHRcdGNvbnN0IHVwZGF0ZWRUYXJnZXRQYXJhZ3JhcGggPSB0aGlzLmluc2VydFNlbnRlbmNlQmxvY2sodGFyZ2V0UGFyYWdyYXBoLCBkcm9wU2VudEluZGV4LCBleHRyYWN0ZWRCbG9jaywgcG9zaXRpb24pO1xuXG5cdFx0XHRcdFx0Ly8gVXBkYXRlIHRoZSByYXcgcGFyYWdyYXBoc1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbZHJhZ2dlZFBhcmFJbmRleF0gPSB1cGRhdGVkU291cmNlUGFyYWdyYXBoO1xuXHRcdFx0XHRcdHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbZHJvcFBhcmFJbmRleF0gPSB1cGRhdGVkVGFyZ2V0UGFyYWdyYXBoO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmUtcGFyc2UgdGhlIHVwZGF0ZWQgY29udGVudCB0byBzeW5jIGNsZWFuIGRhdGEgc3RydWN0dXJlc1xuXHRcdFx0XHR0aGlzLnN5bmNGcm9tUmF3UGFyYWdyYXBocygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRmFsbGJhY2s6IHNpbXBsZSBzZW50ZW5jZSBtb3Zpbmcgd2l0aG91dCBjb21tZW50IHByZXNlcnZhdGlvblxuXHRcdFx0XHRjb25zdCBkcmFnZ2VkU2VudGVuY2UgPSB0aGlzLmN1cnJlbnREb2N1bWVudC5zZW50ZW5jZXNbZHJhZ2dlZFBhcmFJbmRleF0uc3BsaWNlKGRyYWdnZWRTZW50SW5kZXgsIDEpWzBdO1xuXG5cdFx0XHRcdGxldCBpbnNlcnRJbmRleCA9IGRyb3BTZW50SW5kZXg7XG5cdFx0XHRcdGlmIChkcmFnZ2VkUGFyYUluZGV4ID09PSBkcm9wUGFyYUluZGV4ICYmIGRyYWdnZWRTZW50SW5kZXggPCBkcm9wU2VudEluZGV4KSB7XG5cdFx0XHRcdFx0aW5zZXJ0SW5kZXggPSBkcm9wU2VudEluZGV4IC0gMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocG9zaXRpb24gPT09ICdhZnRlcicpIHtcblx0XHRcdFx0XHRpbnNlcnRJbmRleCArPSAxO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5jdXJyZW50RG9jdW1lbnQuc2VudGVuY2VzW2Ryb3BQYXJhSW5kZXhdLnNwbGljZShpbnNlcnRJbmRleCwgMCwgZHJhZ2dlZFNlbnRlbmNlKTtcblx0XHRcdFx0dGhpcy51cGRhdGVQYXJhZ3JhcGhzRnJvbVNlbnRlbmNlcygpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNhdmUgY2hhbmdlcyB0byB0aGUgYWN0dWFsIGZpbGVcblx0XHRhd2FpdCB0aGlzLnNhdmVDaGFuZ2VzVG9GaWxlKCk7XG5cblx0XHQvLyBSZS1yZW5kZXIgdGhlIGN1cnJlbnQgdmlldyB0byByZWZsZWN0IHRoZSBjaGFuZ2VzXG5cdFx0dGhpcy5yZW5kZXJDdXJyZW50Wm9vbSgpO1xuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVQYXJhZ3JhcGhzRnJvbVNlbnRlbmNlcygpIHtcblx0XHQvLyBSZWNvbnN0cnVjdCBwYXJhZ3JhcGhzIGZyb20gc2VudGVuY2VzIGFmdGVyIHNlbnRlbmNlLWxldmVsIGVkaXRzXG5cdFx0dGhpcy5jdXJyZW50RG9jdW1lbnQucGFyYWdyYXBocyA9IHRoaXMuY3VycmVudERvY3VtZW50LnNlbnRlbmNlcy5tYXAoKHNlbnRlbmNlQXJyYXk6IHN0cmluZ1tdKSA9PlxuXHRcdFx0c2VudGVuY2VBcnJheS5qb2luKCcgJylcblx0XHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBleHRyYWN0U2VudGVuY2VCbG9jayhwYXJhZ3JhcGg6IHN0cmluZywgc2VudGVuY2VJbmRleDogbnVtYmVyKTogc3RyaW5nW10ge1xuXHRcdC8vIEV4dHJhY3QgYSBzZW50ZW5jZSBhbmQgYWxsIGl0cyBjb21tZW50cyBhcyBhIGJsb2NrXG5cdFx0Y29uc3QgbGluZXMgPSBwYXJhZ3JhcGguc3BsaXQoJ1xcbicpO1xuXHRcdGxldCBzZW50ZW5jZUxpbmVJbmRleCA9IC0xO1xuXHRcdGxldCBub25Db21tZW50TGluZUNvdW50ID0gMDtcblxuXHRcdC8vIEZpbmQgdGhlIHNlbnRlbmNlIGxpbmVcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xuXHRcdFx0aWYgKGxpbmUgJiYgIShsaW5lLnN0YXJ0c1dpdGgoJyUlJykgJiYgbGluZS5lbmRzV2l0aCgnJSUnKSkpIHtcblx0XHRcdFx0aWYgKG5vbkNvbW1lbnRMaW5lQ291bnQgPT09IHNlbnRlbmNlSW5kZXgpIHtcblx0XHRcdFx0XHRzZW50ZW5jZUxpbmVJbmRleCA9IGk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0bm9uQ29tbWVudExpbmVDb3VudCsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChzZW50ZW5jZUxpbmVJbmRleCA9PT0gLTEpIHJldHVybiBbXTtcblxuXHRcdC8vIEV4dHJhY3QgdGhlIHNlbnRlbmNlIGFuZCBpdHMgZm9sbG93aW5nIGNvbW1lbnRzXG5cdFx0Y29uc3QgYmxvY2sgPSBbbGluZXNbc2VudGVuY2VMaW5lSW5kZXhdXTtcblxuXHRcdGZvciAobGV0IGkgPSBzZW50ZW5jZUxpbmVJbmRleCArIDE7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcblx0XHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoJyUlJykgJiYgbGluZS5lbmRzV2l0aCgnJSUnKSkge1xuXHRcdFx0XHRibG9jay5wdXNoKGxpbmVzW2ldKTtcblx0XHRcdH0gZWxzZSBpZiAobGluZSkge1xuXHRcdFx0XHQvLyBIaXQgbmV4dCBzZW50ZW5jZSwgc3RvcFxuXHRcdFx0XHRicmVhaztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEVtcHR5IGxpbmUsIGluY2x1ZGUgaXRcblx0XHRcdFx0YmxvY2sucHVzaChsaW5lc1tpXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGJsb2NrO1xuXHR9XG5cblx0cHJpdmF0ZSByZW1vdmVTZW50ZW5jZUJsb2NrKHBhcmFncmFwaDogc3RyaW5nLCBzZW50ZW5jZUluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xuXHRcdC8vIFJlbW92ZSBhIHNlbnRlbmNlIGJsb2NrIGZyb20gYSBwYXJhZ3JhcGhcblx0XHRjb25zdCBsaW5lcyA9IHBhcmFncmFwaC5zcGxpdCgnXFxuJyk7XG5cdFx0bGV0IHNlbnRlbmNlTGluZUluZGV4ID0gLTE7XG5cdFx0bGV0IG5vbkNvbW1lbnRMaW5lQ291bnQgPSAwO1xuXG5cdFx0Ly8gRmluZCB0aGUgc2VudGVuY2UgbGluZVxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cdFx0XHRpZiAobGluZSAmJiAhKGxpbmUuc3RhcnRzV2l0aCgnJSUnKSAmJiBsaW5lLmVuZHNXaXRoKCclJScpKSkge1xuXHRcdFx0XHRpZiAobm9uQ29tbWVudExpbmVDb3VudCA9PT0gc2VudGVuY2VJbmRleCkge1xuXHRcdFx0XHRcdHNlbnRlbmNlTGluZUluZGV4ID0gaTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRub25Db21tZW50TGluZUNvdW50Kys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHNlbnRlbmNlTGluZUluZGV4ID09PSAtMSkgcmV0dXJuIHBhcmFncmFwaDtcblxuXHRcdC8vIFJlbW92ZSB0aGUgc2VudGVuY2UgYW5kIGl0cyBmb2xsb3dpbmcgY29tbWVudHNcblx0XHRjb25zdCBuZXdMaW5lcyA9IFsuLi5saW5lc107XG5cdFx0bGV0IHJlbW92ZUNvdW50ID0gMTsgLy8gU3RhcnQgd2l0aCB0aGUgc2VudGVuY2UgaXRzZWxmXG5cblx0XHRmb3IgKGxldCBpID0gc2VudGVuY2VMaW5lSW5kZXggKyAxOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cdFx0XHRpZiAobGluZS5zdGFydHNXaXRoKCclJScpICYmIGxpbmUuZW5kc1dpdGgoJyUlJykpIHtcblx0XHRcdFx0cmVtb3ZlQ291bnQrKztcblx0XHRcdH0gZWxzZSBpZiAobGluZSkge1xuXHRcdFx0XHQvLyBIaXQgbmV4dCBzZW50ZW5jZSwgc3RvcFxuXHRcdFx0XHRicmVhaztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEVtcHR5IGxpbmUsIGluY2x1ZGUgaW4gcmVtb3ZhbFxuXHRcdFx0XHRyZW1vdmVDb3VudCsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdG5ld0xpbmVzLnNwbGljZShzZW50ZW5jZUxpbmVJbmRleCwgcmVtb3ZlQ291bnQpO1xuXHRcdHJldHVybiBuZXdMaW5lcy5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHByaXZhdGUgaW5zZXJ0U2VudGVuY2VCbG9jayhwYXJhZ3JhcGg6IHN0cmluZywgdGFyZ2V0U2VudGVuY2VJbmRleDogbnVtYmVyLCBibG9jazogc3RyaW5nW10sIHBvc2l0aW9uOiAnYmVmb3JlJyB8ICdhZnRlcicpOiBzdHJpbmcge1xuXHRcdC8vIEluc2VydCBhIHNlbnRlbmNlIGJsb2NrIGludG8gYSBwYXJhZ3JhcGhcblx0XHRjb25zdCBsaW5lcyA9IHBhcmFncmFwaC5zcGxpdCgnXFxuJyk7XG5cdFx0bGV0IGluc2VydExpbmVJbmRleCA9IDA7XG5cdFx0bGV0IG5vbkNvbW1lbnRMaW5lQ291bnQgPSAwO1xuXG5cdFx0Ly8gRmluZCB0aGUgdGFyZ2V0IHNlbnRlbmNlIGxpbmVcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xuXHRcdFx0aWYgKGxpbmUgJiYgIShsaW5lLnN0YXJ0c1dpdGgoJyUlJykgJiYgbGluZS5lbmRzV2l0aCgnJSUnKSkpIHtcblx0XHRcdFx0aWYgKG5vbkNvbW1lbnRMaW5lQ291bnQgPT09IHRhcmdldFNlbnRlbmNlSW5kZXgpIHtcblx0XHRcdFx0XHRpbnNlcnRMaW5lSW5kZXggPSBpO1xuXG5cdFx0XHRcdFx0Ly8gSWYgcG9zaXRpb24gaXMgJ2FmdGVyJywgZmluZCB0aGUgZW5kIG9mIHRoaXMgc2VudGVuY2UgYmxvY2tcblx0XHRcdFx0XHRpZiAocG9zaXRpb24gPT09ICdhZnRlcicpIHtcblx0XHRcdFx0XHRcdGxldCBqID0gaSArIDE7XG5cdFx0XHRcdFx0XHQvLyBTa2lwIHBhc3QgYWxsIGNvbW1lbnRzIGJlbG9uZ2luZyB0byB0aGlzIHNlbnRlbmNlXG5cdFx0XHRcdFx0XHR3aGlsZSAoaiA8IGxpbmVzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXh0TGluZSA9IGxpbmVzW2pdLnRyaW0oKTtcblx0XHRcdFx0XHRcdFx0aWYgKG5leHRMaW5lLnN0YXJ0c1dpdGgoJyUlJykgJiYgbmV4dExpbmUuZW5kc1dpdGgoJyUlJykpIHtcblx0XHRcdFx0XHRcdFx0XHRqKys7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobmV4dExpbmUpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBIaXQgbmV4dCBzZW50ZW5jZSwgc3RvcCBoZXJlXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRW1wdHkgbGluZSwgc2tpcCBpdFxuXHRcdFx0XHRcdFx0XHRcdGorKztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aW5zZXJ0TGluZUluZGV4ID0gajtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0bm9uQ29tbWVudExpbmVDb3VudCsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEluc2VydCB0aGUgYmxvY2tcblx0XHRjb25zdCBuZXdMaW5lcyA9IFsuLi5saW5lc107XG5cdFx0bmV3TGluZXMuc3BsaWNlKGluc2VydExpbmVJbmRleCwgMCwgLi4uYmxvY2spO1xuXHRcdHJldHVybiBuZXdMaW5lcy5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHByaXZhdGUgc3luY0Zyb21SYXdQYXJhZ3JhcGhzKCkge1xuXHRcdC8vIFJlLXBhcnNlIHRoZSByYXcgcGFyYWdyYXBocyB0byBzeW5jIGNsZWFuIGRhdGEgc3RydWN0dXJlc1xuXHRcdGlmICghdGhpcy5jdXJyZW50RG9jdW1lbnQucmF3UGFyYWdyYXBocykgcmV0dXJuO1xuXG5cdFx0Y29uc3Qgc2VudGVuY2VzID0gdGhpcy5jdXJyZW50RG9jdW1lbnQucmF3UGFyYWdyYXBocy5tYXAoKHBhcmE6IHN0cmluZykgPT4ge1xuXHRcdFx0Y29uc3QgbGluZXMgPSBwYXJhLnNwbGl0KCdcXG4nKTtcblx0XHRcdHJldHVybiBsaW5lcy5maWx0ZXIoKGxpbmU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XG5cdFx0XHRcdHJldHVybiB0cmltbWVkICYmICEodHJpbW1lZC5zdGFydHNXaXRoKCclJScpICYmIHRyaW1tZWQuZW5kc1dpdGgoJyUlJykpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRjb25zdCBwYXJhZ3JhcGhzID0gc2VudGVuY2VzLm1hcCgoc2VudGVuY2VBcnJheTogc3RyaW5nW10pID0+IHNlbnRlbmNlQXJyYXkuam9pbignXFxuJykpO1xuXG5cdFx0dGhpcy5jdXJyZW50RG9jdW1lbnQuc2VudGVuY2VzID0gc2VudGVuY2VzO1xuXHRcdHRoaXMuY3VycmVudERvY3VtZW50LnBhcmFncmFwaHMgPSBwYXJhZ3JhcGhzO1xuXHR9XG5cblx0cHJpdmF0ZSBzZW50ZW5jZUhhc0FsdGVybmF0aXZlcyhwYXJhSW5kZXg6IG51bWJlciwgc2VudEluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcblx0XHQvLyBDaGVjayBpZiBhIHNlbnRlbmNlIGhhcyBhbHRlcm5hdGl2ZXMgc3RvcmVkIGluIGNvbW1lbnRzXG5cdFx0aWYgKCF0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzIHx8IHBhcmFJbmRleCA+PSB0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGNvbnN0IHBhcmFncmFwaCA9IHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbcGFyYUluZGV4XTtcblx0XHRjb25zdCBsaW5lcyA9IHBhcmFncmFwaC5zcGxpdCgnXFxuJyk7XG5cdFx0bGV0IHNlbnRlbmNlTGluZUluZGV4ID0gLTE7XG5cdFx0bGV0IG5vbkNvbW1lbnRMaW5lQ291bnQgPSAwO1xuXG5cdFx0Ly8gRmluZCB0aGUgc2VudGVuY2UgbGluZVxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cdFx0XHRpZiAobGluZSAmJiAhKGxpbmUuc3RhcnRzV2l0aCgnJSUnKSAmJiBsaW5lLmVuZHNXaXRoKCclJScpKSkge1xuXHRcdFx0XHRpZiAobm9uQ29tbWVudExpbmVDb3VudCA9PT0gc2VudEluZGV4KSB7XG5cdFx0XHRcdFx0c2VudGVuY2VMaW5lSW5kZXggPSBpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5vbkNvbW1lbnRMaW5lQ291bnQrKztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoc2VudGVuY2VMaW5lSW5kZXggPT09IC0xKSByZXR1cm4gZmFsc2U7XG5cblx0XHQvLyBDaGVjayBmb3IgYWx0ZXJuYXRpdmVzIGltbWVkaWF0ZWx5IGZvbGxvd2luZyB0aGUgc2VudGVuY2Vcblx0XHRmb3IgKGxldCBpID0gc2VudGVuY2VMaW5lSW5kZXggKyAxOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cdFx0XHRpZiAobGluZS5zdGFydHNXaXRoKCclJScpICYmIGxpbmUuZW5kc1dpdGgoJyUlJykpIHtcblx0XHRcdFx0Y29uc3QgY29tbWVudENvbnRlbnQgPSBsaW5lLnNsaWNlKDIsIC0yKS50cmltKCk7XG5cdFx0XHRcdC8vIElmIHdlIGZpbmQgYW55IGNvbW1lbnQgdGhhdCdzIG5vdCBqdXN0IFNFTEVDVEVELCB0aGVyZSBhcmUgYWx0ZXJuYXRpdmVzXG5cdFx0XHRcdGlmICghY29tbWVudENvbnRlbnQuc3RhcnRzV2l0aCgnU0VMRUNURUQ6JykpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChsaW5lKSB7XG5cdFx0XHRcdC8vIEhpdCBuZXh0IHNlbnRlbmNlLCBzdG9wIGxvb2tpbmdcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRTZW50ZW5jZUFsdGVybmF0aXZlcyhwYXJhSW5kZXg6IG51bWJlciwgc2VudEluZGV4OiBudW1iZXIpOiB7IGFsdGVybmF0aXZlczogc3RyaW5nW10sIHNlbGVjdGVkSW5kZXg6IG51bWJlciwgb3JpZ2luYWw6IHN0cmluZyB9IHtcblx0XHQvLyBHZXQgc2VudGVuY2UgYWx0ZXJuYXRpdmVzIHdpdGggc2VsZWN0aW9uIGluZm9ybWF0aW9uXG5cdFx0aWYgKCF0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzIHx8IHBhcmFJbmRleCA+PSB0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIHsgYWx0ZXJuYXRpdmVzOiBbXSwgc2VsZWN0ZWRJbmRleDogLTEsIG9yaWdpbmFsOiAnJyB9O1xuXHRcdH1cblxuXHRcdGNvbnN0IHBhcmFncmFwaCA9IHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbcGFyYUluZGV4XTtcblx0XHRjb25zdCBsaW5lcyA9IHBhcmFncmFwaC5zcGxpdCgnXFxuJyk7XG5cdFx0bGV0IHNlbnRlbmNlTGluZUluZGV4ID0gLTE7XG5cdFx0bGV0IG5vbkNvbW1lbnRMaW5lQ291bnQgPSAwO1xuXG5cdFx0Ly8gRmluZCB0aGUgc2VudGVuY2UgbGluZVxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cdFx0XHRpZiAobGluZSAmJiAhKGxpbmUuc3RhcnRzV2l0aCgnJSUnKSAmJiBsaW5lLmVuZHNXaXRoKCclJScpKSkge1xuXHRcdFx0XHRpZiAobm9uQ29tbWVudExpbmVDb3VudCA9PT0gc2VudEluZGV4KSB7XG5cdFx0XHRcdFx0c2VudGVuY2VMaW5lSW5kZXggPSBpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5vbkNvbW1lbnRMaW5lQ291bnQrKztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoc2VudGVuY2VMaW5lSW5kZXggPT09IC0xKSB7XG5cdFx0XHRyZXR1cm4geyBhbHRlcm5hdGl2ZXM6IFtdLCBzZWxlY3RlZEluZGV4OiAtMSwgb3JpZ2luYWw6ICcnIH07XG5cdFx0fVxuXG5cdFx0Y29uc3QgYWx0ZXJuYXRpdmVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGxldCBzZWxlY3RlZEluZGV4ID0gLTE7XG5cdFx0bGV0IGZvdW5kT3JpZ2luYWwgPSAnJztcblx0XHRjb25zdCBjdXJyZW50U2VudGVuY2UgPSBsaW5lc1tzZW50ZW5jZUxpbmVJbmRleF0udHJpbSgpO1xuXG5cdFx0Ly8gTG9vayBmb3IgYWx0ZXJuYXRpdmVzIGFuZCBvcmlnaW5hbCBpbW1lZGlhdGVseSBmb2xsb3dpbmcgdGhlIHNlbnRlbmNlXG5cdFx0Zm9yIChsZXQgaSA9IHNlbnRlbmNlTGluZUluZGV4ICsgMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xuXHRcdFx0aWYgKGxpbmUuc3RhcnRzV2l0aCgnJSUnKSAmJiBsaW5lLmVuZHNXaXRoKCclJScpKSB7XG5cdFx0XHRcdGNvbnN0IGNvbW1lbnRDb250ZW50ID0gbGluZS5zbGljZSgyLCAtMikudHJpbSgpO1xuXHRcdFx0XHRpZiAoY29tbWVudENvbnRlbnQuc3RhcnRzV2l0aCgnU0VMRUNURUQ6JykpIHtcblx0XHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gcGFyc2VJbnQoY29tbWVudENvbnRlbnQuc3BsaXQoJzonKVsxXSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY29tbWVudENvbnRlbnQuc3RhcnRzV2l0aCgnT1JJR0lOQUw6JykpIHtcblx0XHRcdFx0XHRmb3VuZE9yaWdpbmFsID0gY29tbWVudENvbnRlbnQuc2xpY2UoOSkudHJpbSgpOyAvLyBSZW1vdmUgXCJPUklHSU5BTDogXCJcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRhbHRlcm5hdGl2ZXMucHVzaChjb21tZW50Q29udGVudCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAobGluZSkge1xuXHRcdFx0XHQvLyBIaXQgbmV4dCBzZW50ZW5jZSwgc3RvcCBsb29raW5nXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIHdlIGZvdW5kIGFuIG9yaWdpbmFsLCB0aGUgY3VycmVudCBzZW50ZW5jZSBpcyBhIHNlbGVjdGVkIGFsdGVybmF0aXZlXG5cdFx0Y29uc3Qgb3JpZ2luYWwgPSBmb3VuZE9yaWdpbmFsIHx8IGN1cnJlbnRTZW50ZW5jZTtcblxuXHRcdHJldHVybiB7IGFsdGVybmF0aXZlcywgc2VsZWN0ZWRJbmRleCwgb3JpZ2luYWwgfTtcblx0fVxuXG5cdHByaXZhdGUgcGFyYWdyYXBoSGFzQ29tbWVudHMocGFyYUluZGV4OiBudW1iZXIpOiBib29sZWFuIHtcblx0XHQvLyBDaGVjayBpZiBhIHBhcmFncmFwaCBjb250YWlucyBhbnkgJSUgJSUgY29tbWVudHMgKGV4Y2x1ZGluZyBQQVJBR1JBUEhfQ09NUExFVEUpXG5cdFx0aWYgKCF0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzIHx8IHBhcmFJbmRleCA+PSB0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGNvbnN0IHBhcmFncmFwaCA9IHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbcGFyYUluZGV4XTtcblx0XHRjb25zdCBsaW5lcyA9IHBhcmFncmFwaC5zcGxpdCgnXFxuJyk7XG5cblx0XHQvLyBMb29rIGZvciBhbnkgJSUgJSUgY29tbWVudCBsaW5lcyB0aGF0IGFyZSBOT1QgUEFSQUdSQVBIX0NPTVBMRVRFXG5cdFx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0XHRjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XG5cdFx0XHRpZiAodHJpbW1lZC5zdGFydHNXaXRoKCclJScpICYmIHRyaW1tZWQuZW5kc1dpdGgoJyUlJykpIHtcblx0XHRcdFx0Y29uc3QgY29tbWVudENvbnRlbnQgPSB0cmltbWVkLnNsaWNlKDIsIC0yKS50cmltKCk7XG5cdFx0XHRcdC8vIElnbm9yZSBQQVJBR1JBUEhfQ09NUExFVEUgY29tbWVudHMsIG9ubHkgY291bnQgYWx0ZXJuYXRpdmVzXG5cdFx0XHRcdGlmIChjb21tZW50Q29udGVudCAhPT0gJ1BBUkFHUkFQSF9DT01QTEVURScpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHByaXZhdGUgcGFyYWdyYXBoSXNDb21wbGV0ZShwYXJhSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdC8vIENoZWNrIGlmIGEgcGFyYWdyYXBoIGlzIG1hcmtlZCBhcyBjb21wbGV0ZSB3aXRoIFBBUkFHUkFQSF9DT01QTEVURSBjb21tZW50XG5cdFx0aWYgKCF0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzIHx8IHBhcmFJbmRleCA+PSB0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGNvbnN0IHBhcmFncmFwaCA9IHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbcGFyYUluZGV4XTtcblx0XHRjb25zdCBsaW5lcyA9IHBhcmFncmFwaC5zcGxpdCgnXFxuJyk7XG5cblx0XHQvLyBMb29rIGZvciBQQVJBR1JBUEhfQ09NUExFVEUgY29tbWVudCBhbnl3aGVyZSBpbiB0aGUgcGFyYWdyYXBoXG5cdFx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0XHRjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XG5cdFx0XHRpZiAodHJpbW1lZC5zdGFydHNXaXRoKCclJScpICYmIHRyaW1tZWQuZW5kc1dpdGgoJyUlJykpIHtcblx0XHRcdFx0Y29uc3QgY29tbWVudENvbnRlbnQgPSB0cmltbWVkLnNsaWNlKDIsIC0yKS50cmltKCk7XG5cdFx0XHRcdGlmIChjb21tZW50Q29udGVudCA9PT0gJ1BBUkFHUkFQSF9DT01QTEVURScpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdG9nZ2xlUGFyYWdyYXBoQ29tcGxldGlvbihwYXJhSW5kZXg6IG51bWJlcikge1xuXHRcdC8vIFRvZ2dsZSB0aGUgY29tcGxldGlvbiBzdGF0dXMgb2YgYSBwYXJhZ3JhcGhcblx0XHRpZiAoIXRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHMgfHwgcGFyYUluZGV4ID49IHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHMubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgaWYgdGhpcyBwYXJhZ3JhcGggaGFzIGFsdGVybmF0aXZlcyAtIGlmIHNvLCBibG9jayBjb21wbGV0aW9uIGFuZCByZW1vdmUgYW55IGV4aXN0aW5nIGNvbXBsZXRpb24gbWFya2Vyc1xuXHRcdGNvbnN0IGhhc0FsdGVybmF0aXZlcyA9IHRoaXMucGFyYWdyYXBoSGFzQ29tbWVudHMocGFyYUluZGV4KTtcblxuXHRcdGNvbnN0IHBhcmFncmFwaCA9IHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbcGFyYUluZGV4XTtcblx0XHRjb25zdCBsaW5lcyA9IHBhcmFncmFwaC5zcGxpdCgnXFxuJyk7XG5cdFx0bGV0IGhhc0NvbXBsZXRpb25Db21tZW50ID0gZmFsc2U7XG5cdFx0bGV0IG5ld0xpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG5cdFx0Ly8gUmVtb3ZlIGV4aXN0aW5nIFBBUkFHUkFQSF9DT01QTEVURSBjb21tZW50IGlmIGZvdW5kXG5cdFx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG5cdFx0XHRjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XG5cdFx0XHRpZiAodHJpbW1lZC5zdGFydHNXaXRoKCclJScpICYmIHRyaW1tZWQuZW5kc1dpdGgoJyUlJykpIHtcblx0XHRcdFx0Y29uc3QgY29tbWVudENvbnRlbnQgPSB0cmltbWVkLnNsaWNlKDIsIC0yKS50cmltKCk7XG5cdFx0XHRcdGlmIChjb21tZW50Q29udGVudCA9PT0gJ1BBUkFHUkFQSF9DT01QTEVURScpIHtcblx0XHRcdFx0XHRoYXNDb21wbGV0aW9uQ29tbWVudCA9IHRydWU7XG5cdFx0XHRcdFx0Y29udGludWU7IC8vIFNraXAgdGhpcyBsaW5lIChyZW1vdmUgaXQpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG5ld0xpbmVzLnB1c2gobGluZSk7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgcGFyYWdyYXBoIGhhcyBhbHRlcm5hdGl2ZXMsIGRvbid0IGFsbG93IGNvbXBsZXRpb24gKG9ubHkgcmVtb3ZlIGV4aXN0aW5nIG1hcmtlcnMpXG5cdFx0aWYgKGhhc0FsdGVybmF0aXZlcykge1xuXHRcdFx0Ly8gRG9uJ3QgYWRkIGNvbXBsZXRpb24gbWFya2VyLCBqdXN0IHJlbW92ZSBhbnkgZXhpc3Rpbmcgb25lc1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBJZiB3YXNuJ3QgY29tcGxldGUgYW5kIG5vIGFsdGVybmF0aXZlcywgYWRkIGNvbXBsZXRpb24gY29tbWVudCBhdCB0aGUgYmVnaW5uaW5nXG5cdFx0XHRpZiAoIWhhc0NvbXBsZXRpb25Db21tZW50KSB7XG5cdFx0XHRcdG5ld0xpbmVzLnVuc2hpZnQoJyUlIFBBUkFHUkFQSF9DT01QTEVURSAlJScpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFVwZGF0ZSB0aGUgcmF3IHBhcmFncmFwaFxuXHRcdHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbcGFyYUluZGV4XSA9IG5ld0xpbmVzLmpvaW4oJ1xcbicpO1xuXG5cdFx0Ly8gUmUtc3luYyB0aGUgY2xlYW4gZGF0YSBzdHJ1Y3R1cmVzXG5cdFx0dGhpcy5zeW5jRnJvbVJhd1BhcmFncmFwaHMoKTtcblxuXHRcdC8vIFNhdmUgY2hhbmdlcyB0byBmaWxlXG5cdFx0YXdhaXQgdGhpcy5zYXZlQ2hhbmdlc1RvRmlsZSgpO1xuXG5cdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cgdGhlIGNoYW5nZVxuXHRcdHRoaXMucmVuZGVyQ3VycmVudFpvb20oKTtcblx0fVxuXG5cdHByaXZhdGUgbW92ZVNlbnRlbmNlQmxvY2tXaXRoaW5QYXJhZ3JhcGgoXG5cdFx0cGFyYWdyYXBoOiBzdHJpbmcsXG5cdFx0ZnJvbUluZGV4OiBudW1iZXIsXG5cdFx0dG9JbmRleDogbnVtYmVyLFxuXHRcdHBvc2l0aW9uOiAnYmVmb3JlJyB8ICdhZnRlcidcblx0KTogc3RyaW5nIHtcblx0XHQvLyBIYW5kbGUgbW92aW5nIGEgc2VudGVuY2UgYmxvY2sgd2l0aGluIHRoZSBzYW1lIHBhcmFncmFwaCB3aXRob3V0IGR1cGxpY2F0aW9uXG5cdFx0Y29uc3QgbGluZXMgPSBwYXJhZ3JhcGguc3BsaXQoJ1xcbicpO1xuXG5cdFx0Ly8gRXh0cmFjdCB0aGUgc2VudGVuY2UgYmxvY2sgdG8gbW92ZVxuXHRcdGNvbnN0IGV4dHJhY3RlZEJsb2NrID0gdGhpcy5leHRyYWN0U2VudGVuY2VCbG9jayhwYXJhZ3JhcGgsIGZyb21JbmRleCk7XG5cdFx0aWYgKGV4dHJhY3RlZEJsb2NrLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHBhcmFncmFwaDtcblxuXHRcdC8vIFJlbW92ZSB0aGUgb3JpZ2luYWwgYmxvY2tcblx0XHRjb25zdCB3aXRob3V0U291cmNlID0gdGhpcy5yZW1vdmVTZW50ZW5jZUJsb2NrKHBhcmFncmFwaCwgZnJvbUluZGV4KTtcblxuXHRcdC8vIEFkanVzdCB0YXJnZXQgaW5kZXggaWYgdGhlIHNvdXJjZSB3YXMgYmVmb3JlIHRoZSB0YXJnZXRcblx0XHRsZXQgYWRqdXN0ZWRUb0luZGV4ID0gdG9JbmRleDtcblx0XHRpZiAoZnJvbUluZGV4IDwgdG9JbmRleCkge1xuXHRcdFx0YWRqdXN0ZWRUb0luZGV4ID0gdG9JbmRleCAtIDE7XG5cdFx0fVxuXG5cdFx0Ly8gSW5zZXJ0IGF0IHRoZSBhZGp1c3RlZCBwb3NpdGlvblxuXHRcdHJldHVybiB0aGlzLmluc2VydFNlbnRlbmNlQmxvY2sod2l0aG91dFNvdXJjZSwgYWRqdXN0ZWRUb0luZGV4LCBleHRyYWN0ZWRCbG9jaywgcG9zaXRpb24pO1xuXHR9XG5cblx0YXN5bmMgc2F2ZUNoYW5nZXNUb0ZpbGUoKSB7XG5cdFx0Ly8gR2V0IHRoZSBjdXJyZW50IGZpbGUgZnJvbSB0aGUgcGx1Z2luXG5cdFx0Y29uc3QgY3VycmVudEZpbGUgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRpZiAoIWN1cnJlbnRGaWxlKSByZXR1cm47XG5cblx0XHQvLyBSZWNvbnN0cnVjdCB0aGUgbWFya2Rvd24gY29udGVudFxuXHRcdGNvbnN0IG5ld0NvbnRlbnQgPSB0aGlzLnJlY29uc3RydWN0TWFya2Rvd24oKTtcblxuXHRcdC8vIE1hcmsgdGhpcyBhcyBhbiBpbnRlcm5hbCB1cGRhdGUgdG8gcHJldmVudCByZWxvYWRcblx0XHR0aGlzLmlzSW50ZXJuYWxVcGRhdGUgPSB0cnVlO1xuXG5cdFx0Ly8gU2F2ZSB0byBmaWxlXG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShjdXJyZW50RmlsZSwgbmV3Q29udGVudCk7XG5cdH1cblxuXHRyZWNvbnN0cnVjdE1hcmtkb3duKCk6IHN0cmluZyB7XG5cdFx0Ly8gVXNlIHJhdyBwYXJhZ3JhcGhzIGlmIGF2YWlsYWJsZSB0byBwcmVzZXJ2ZSBjb21tZW50cywgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBjbGVhbiByZWNvbnN0cnVjdGlvblxuXHRcdGlmICh0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lbnN1cmVQcm9wZXJIZWFkaW5nU3BhY2luZyh0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzLmpvaW4oJ1xcblxcbicpKTtcblx0XHR9XG5cblx0XHQvLyBGYWxsYmFjazogcmVjb25zdHJ1Y3QgZnJvbSBjbGVhbiBzZW50ZW5jZXMgKGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSlcblx0XHRjb25zdCBwYXJhZ3JhcGhzV2l0aExpbmVzID0gdGhpcy5jdXJyZW50RG9jdW1lbnQuc2VudGVuY2VzLm1hcCgoc2VudGVuY2VBcnJheTogc3RyaW5nW10pID0+IHtcblx0XHRcdHJldHVybiBzZW50ZW5jZUFycmF5LmpvaW4oJ1xcbicpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHRoaXMuZW5zdXJlUHJvcGVySGVhZGluZ1NwYWNpbmcocGFyYWdyYXBoc1dpdGhMaW5lcy5qb2luKCdcXG5cXG4nKSk7XG5cdH1cblxuXHRwcml2YXRlIGVuc3VyZVByb3BlckhlYWRpbmdTcGFjaW5nKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0Ly8gRW5zdXJlIHByb3BlciBzcGFjaW5nIGFyb3VuZCBoZWFkaW5ncyAtIGhlYWRpbmdzIHNob3VsZCBoYXZlIGJsYW5rIGxpbmVzIGJlZm9yZSBhbmQgYWZ0ZXJcblx0XHRyZXR1cm4gY29udGVudFxuXHRcdFx0Ly8gRml4IHNwYWNpbmcgYmVmb3JlIGhlYWRpbmdzOiBlbnN1cmUgdGhlcmUncyBhIGJsYW5rIGxpbmUgYmVmb3JlIGFueSBoZWFkaW5nIHRoYXQgZm9sbG93cyBjb250ZW50XG5cdFx0XHQucmVwbGFjZSgvKFteXFxuXSlcXG4oI3sxLDZ9XFxzKS9nLCAnJDFcXG5cXG4kMicpXG5cdFx0XHQvLyBGaXggc3BhY2luZyBhZnRlciBoZWFkaW5nczogZW5zdXJlIHRoZXJlJ3MgYSBibGFuayBsaW5lIGFmdGVyIGFueSBoZWFkaW5nIHRoYXQncyBmb2xsb3dlZCBieSBjb250ZW50XG5cdFx0XHQucmVwbGFjZSgvKCN7MSw2fVxcc1teXFxuXSopXFxuKFteI1xcbl0pL2csICckMVxcblxcbiQyJylcblx0XHRcdC8vIENsZWFuIHVwIG11bHRpcGxlIGNvbnNlY3V0aXZlIGJsYW5rIGxpbmVzIChtb3JlIHRoYW4gMiBuZXdsaW5lcyBiZWNvbWVzIGV4YWN0bHkgMilcblx0XHRcdC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKTtcblx0fVxuXG5cdHByaXZhdGUgb3BlblNlbnRlbmNlRWRpdG9yKHBhcmFJbmRleDogbnVtYmVyLCBzZW50SW5kZXg6IG51bWJlciwgc2VudGVuY2U6IHN0cmluZykge1xuXHRcdC8vIENyZWF0ZSBtb2RhbCBmb3Igc2VudGVuY2UgZWRpdGluZ1xuXHRcdGNvbnN0IG1vZGFsID0gbmV3IFNlbnRlbmNlRWRpdE1vZGFsKHRoaXMucGx1Z2luLmFwcCwgc2VudGVuY2UsIHBhcmFJbmRleCwgc2VudEluZGV4LCB0aGlzKTtcblx0XHRtb2RhbC5vcGVuKCk7XG5cdH1cblxuXG5cdHByaXZhdGUgc2hvd1NlbnRlbmNlQWx0ZXJuYXRpdmVzKHNlbnRCbG9jazogSFRNTEVsZW1lbnQsIHBhcmFJbmRleDogbnVtYmVyLCBzZW50SW5kZXg6IG51bWJlcikge1xuXHRcdGNvbnN0IGFsdGVybmF0aXZlc0RhdGEgPSB0aGlzLmdldFNlbnRlbmNlQWx0ZXJuYXRpdmVzKHBhcmFJbmRleCwgc2VudEluZGV4KTtcblx0XHRjb25zdCB7IGFsdGVybmF0aXZlcywgc2VsZWN0ZWRJbmRleCwgb3JpZ2luYWwgfSA9IGFsdGVybmF0aXZlc0RhdGE7XG5cblx0XHQvLyBDcmVhdGUgYWx0ZXJuYXRpdmVzIGNvbnRhaW5lclxuXHRcdGNvbnN0IGFsdGVybmF0aXZlc0NvbnRhaW5lciA9IHNlbnRCbG9jay5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JuYXgtYWx0ZXJuYXRpdmVzLWNvbnRhaW5lcicgfSk7XG5cblx0XHQvLyBTaG93IG9yaWdpbmFsIHNlbnRlbmNlIGZpcnN0IChpZiBkaWZmZXJlbnQgZnJvbSBjdXJyZW50KVxuXHRcdGNvbnN0IGN1cnJlbnRTZW50ZW5jZSA9IHRoaXMuY3VycmVudERvY3VtZW50LnNlbnRlbmNlc1twYXJhSW5kZXhdW3NlbnRJbmRleF07XG5cdFx0aWYgKG9yaWdpbmFsICYmIG9yaWdpbmFsICE9PSBjdXJyZW50U2VudGVuY2UpIHtcblx0XHRcdGNvbnN0IG9yaWdpbmFsSXRlbSA9IHRoaXMuY3JlYXRlQWx0ZXJuYXRpdmVJdGVtKGFsdGVybmF0aXZlc0NvbnRhaW5lciwgb3JpZ2luYWwsIHBhcmFJbmRleCwgc2VudEluZGV4LCAtMSwgc2VsZWN0ZWRJbmRleCA9PT0gLTEpO1xuXHRcdFx0b3JpZ2luYWxJdGVtLmFkZENsYXNzKCdmb3JuYXgtb3JpZ2luYWwtc2VudGVuY2UnKTtcblx0XHR9XG5cblx0XHQvLyBTaG93IGFsbCBhbHRlcm5hdGl2ZXNcblx0XHRhbHRlcm5hdGl2ZXMuZm9yRWFjaCgoYWx0ZXJuYXRpdmUsIGFsdEluZGV4KSA9PiB7XG5cdFx0XHR0aGlzLmNyZWF0ZUFsdGVybmF0aXZlSXRlbShhbHRlcm5hdGl2ZXNDb250YWluZXIsIGFsdGVybmF0aXZlLCBwYXJhSW5kZXgsIHNlbnRJbmRleCwgYWx0SW5kZXgsIHNlbGVjdGVkSW5kZXggPT09IGFsdEluZGV4KTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgY3JlYXRlQWx0ZXJuYXRpdmVJdGVtKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHRleHQ6IHN0cmluZywgcGFyYUluZGV4OiBudW1iZXIsIHNlbnRJbmRleDogbnVtYmVyLCBhbHRJbmRleDogbnVtYmVyLCBpc1NlbGVjdGVkOiBib29sZWFuKTogSFRNTEVsZW1lbnQge1xuXHRcdGNvbnN0IGl0ZW0gPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnZm9ybmF4LWFsdGVybmF0aXZlLWl0ZW0nIH0pO1xuXG5cdFx0Ly8gUmFkaW8gYnV0dG9uIGZvciBzZWxlY3Rpb25cblx0XHRjb25zdCByYWRpbyA9IGl0ZW0uY3JlYXRlRWwoJ2lucHV0Jywge1xuXHRcdFx0dHlwZTogJ3JhZGlvJyxcblx0XHRcdGNsczogJ2Zvcm5heC1hbHRlcm5hdGl2ZS1yYWRpbycsXG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRcdG5hbWU6IGBzZW50ZW5jZS0ke3BhcmFJbmRleH0tJHtzZW50SW5kZXh9YCxcblx0XHRcdFx0dmFsdWU6IGFsdEluZGV4LnRvU3RyaW5nKClcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmIChpc1NlbGVjdGVkKSB7XG5cdFx0XHRyYWRpby5jaGVja2VkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRyYWRpby5vbmNoYW5nZSA9ICgpID0+IHRoaXMuc2VsZWN0U2VudGVuY2VBbHRlcm5hdGl2ZShwYXJhSW5kZXgsIHNlbnRJbmRleCwgYWx0SW5kZXgpO1xuXG5cdFx0Ly8gQWx0ZXJuYXRpdmUgdGV4dFxuXHRcdGNvbnN0IHRleHRFbCA9IGl0ZW0uY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGNsczogJ2Zvcm5heC1hbHRlcm5hdGl2ZS10ZXh0Jyxcblx0XHRcdHRleHQ6IHRleHRcblx0XHR9KTtcblxuXHRcdC8vIERlbGV0ZSBidXR0b24gKGV4Y2VwdCBmb3Igb3JpZ2luYWwpXG5cdFx0aWYgKGFsdEluZGV4ID49IDApIHtcblx0XHRcdGNvbnN0IGRlbGV0ZUJ0biA9IGl0ZW0uY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdFx0Y2xzOiAnZm9ybmF4LWRlbGV0ZS1hbHRlcm5hdGl2ZS1idG4nLFxuXHRcdFx0XHR0ZXh0OiAnXHUwMEQ3J1xuXHRcdFx0fSk7XG5cblx0XHRcdGRlbGV0ZUJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5kZWxldGVBbHRlcm5hdGl2ZShwYXJhSW5kZXgsIHNlbnRJbmRleCwgYWx0SW5kZXgpO1xuXHRcdH1cblxuXHRcdHJldHVybiBpdGVtO1xuXHR9XG5cblx0cHJpdmF0ZSBzaG93QWRkQWx0ZXJuYXRpdmVJbnB1dChzZW50QmxvY2s6IEhUTUxFbGVtZW50LCBwYXJhSW5kZXg6IG51bWJlciwgc2VudEluZGV4OiBudW1iZXIpIHtcblx0XHQvLyBDaGVjayBpZiBpbnB1dCBhbHJlYWR5IGV4aXN0c1xuXHRcdGNvbnN0IGV4aXN0aW5nSW5wdXQgPSBzZW50QmxvY2sucXVlcnlTZWxlY3RvcignLmZvcm5heC1hZGQtaW5wdXQnKTtcblx0XHRpZiAoZXhpc3RpbmdJbnB1dCkgcmV0dXJuO1xuXG5cdFx0Y29uc3Qgc2VudGVuY2VSb3cgPSBzZW50QmxvY2sucXVlcnlTZWxlY3RvcignLmZvcm5heC1zZW50ZW5jZS1yb3cnKTtcblx0XHRjb25zdCBpbnB1dENvbnRhaW5lciA9IHNlbnRCbG9jay5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdmb3JuYXgtYWRkLWlucHV0JyB9KTtcblxuXHRcdGNvbnN0IHRleHRBcmVhID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuXHRcdFx0Y2xzOiAnZm9ybmF4LWFsdGVybmF0aXZlLWlucHV0Jyxcblx0XHRcdGF0dHI6IHsgcGxhY2Vob2xkZXI6ICdFbnRlciBuZXcgYWx0ZXJuYXRpdmUuLi4nIH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2Zvcm5heC1pbnB1dC1idXR0b25zJyB9KTtcblxuXHRcdGNvbnN0IHNhdmVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdGNsczogJ2Zvcm5heC1zYXZlLWFsdGVybmF0aXZlLWJ0bicsXG5cdFx0XHR0ZXh0OiAnU2F2ZSdcblx0XHR9KTtcblxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0Y2xzOiAnZm9ybmF4LWNhbmNlbC1hbHRlcm5hdGl2ZS1idG4nLFxuXHRcdFx0dGV4dDogJ0NhbmNlbCdcblx0XHR9KTtcblxuXHRcdHNhdmVCdG4ub25jbGljayA9ICgpID0+IHRoaXMuc2F2ZU5ld0FsdGVybmF0aXZlKHBhcmFJbmRleCwgc2VudEluZGV4LCB0ZXh0QXJlYS52YWx1ZSwgc2VudEJsb2NrKTtcblx0XHRjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IGlucHV0Q29udGFpbmVyLnJlbW92ZSgpO1xuXG5cdFx0dGV4dEFyZWEuZm9jdXMoKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgY29tbWl0U2VudGVuY2VDaG9pY2UocGFyYUluZGV4OiBudW1iZXIsIHNlbnRJbmRleDogbnVtYmVyKSB7XG5cdFx0Ly8gRmluYWxpemUgdGhlIGN1cnJlbnQgc2VudGVuY2UgY2hvaWNlIGFuZCByZW1vdmUgYWxsIGFsdGVybmF0aXZlIGNvbW1lbnRzXG5cdFx0aWYgKCF0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzKSByZXR1cm47XG5cblx0XHRjb25zdCBwYXJhZ3JhcGggPSB0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzW3BhcmFJbmRleF07XG5cdFx0Y29uc3QgbGluZXMgPSBwYXJhZ3JhcGguc3BsaXQoJ1xcbicpO1xuXHRcdGxldCBzZW50ZW5jZUxpbmVJbmRleCA9IC0xO1xuXHRcdGxldCBub25Db21tZW50TGluZUNvdW50ID0gMDtcblxuXHRcdC8vIEZpbmQgdGhlIHNlbnRlbmNlIGxpbmVcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xuXHRcdFx0aWYgKGxpbmUgJiYgIShsaW5lLnN0YXJ0c1dpdGgoJyUlJykgJiYgbGluZS5lbmRzV2l0aCgnJSUnKSkpIHtcblx0XHRcdFx0aWYgKG5vbkNvbW1lbnRMaW5lQ291bnQgPT09IHNlbnRJbmRleCkge1xuXHRcdFx0XHRcdHNlbnRlbmNlTGluZUluZGV4ID0gaTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRub25Db21tZW50TGluZUNvdW50Kys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHNlbnRlbmNlTGluZUluZGV4ID09PSAtMSkgcmV0dXJuO1xuXG5cdFx0Ly8gUmVtb3ZlIGFsbCBhbHRlcm5hdGl2ZSBjb21tZW50cyBmb2xsb3dpbmcgdGhpcyBzZW50ZW5jZVxuXHRcdGNvbnN0IGluZGljZXNUb1JlbW92ZTogbnVtYmVyW10gPSBbXTtcblx0XHRmb3IgKGxldCBpID0gc2VudGVuY2VMaW5lSW5kZXggKyAxOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cdFx0XHRpZiAobGluZS5zdGFydHNXaXRoKCclJScpICYmIGxpbmUuZW5kc1dpdGgoJyUlJykpIHtcblx0XHRcdFx0Y29uc3QgY29tbWVudENvbnRlbnQgPSBsaW5lLnNsaWNlKDIsIC0yKS50cmltKCk7XG5cdFx0XHRcdC8vIFJlbW92ZSBPUklHSU5BTCwgU0VMRUNURUQsIGFuZCBhbHRlcm5hdGl2ZSBjb21tZW50c1xuXHRcdFx0XHRpZiAoY29tbWVudENvbnRlbnQuc3RhcnRzV2l0aCgnT1JJR0lOQUw6JykgfHxcblx0XHRcdFx0XHRjb21tZW50Q29udGVudC5zdGFydHNXaXRoKCdTRUxFQ1RFRDonKSB8fFxuXHRcdFx0XHRcdCghY29tbWVudENvbnRlbnQuc3RhcnRzV2l0aCgnUEFSQUdSQVBIX0NPTVBMRVRFJykgJiYgY29tbWVudENvbnRlbnQgIT09ICdQQVJBR1JBUEhfQ09NUExFVEUnKSkge1xuXHRcdFx0XHRcdGluZGljZXNUb1JlbW92ZS5wdXNoKGkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGxpbmUpIHtcblx0XHRcdFx0Ly8gSGl0IG5leHQgc2VudGVuY2UsIHN0b3AgbG9va2luZ1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgY29tbWVudHMgaW4gcmV2ZXJzZSBvcmRlciB0byBtYWludGFpbiBpbmRpY2VzXG5cdFx0Zm9yIChsZXQgaSA9IGluZGljZXNUb1JlbW92ZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0bGluZXMuc3BsaWNlKGluZGljZXNUb1JlbW92ZVtpXSwgMSk7XG5cdFx0fVxuXG5cdFx0Ly8gVXBkYXRlIHRoZSBwYXJhZ3JhcGhcblx0XHR0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzW3BhcmFJbmRleF0gPSBsaW5lcy5qb2luKCdcXG4nKTtcblxuXHRcdC8vIFN5bmMgY2hhbmdlcyBhbmQgc2F2ZVxuXHRcdHRoaXMuc3luY0Zyb21SYXdQYXJhZ3JhcGhzKCk7XG5cdFx0YXdhaXQgdGhpcy5zYXZlQ2hhbmdlc1RvRmlsZSgpO1xuXG5cdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cgdXBkYXRlZCBjb250ZW50IChzZW50ZW5jZSBzaG91bGQgbm8gbG9uZ2VyIHNob3cgYWx0ZXJuYXRpdmVzKVxuXHRcdHRoaXMucmVuZGVyQ3VycmVudFpvb20oKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc2VsZWN0U2VudGVuY2VBbHRlcm5hdGl2ZShwYXJhSW5kZXg6IG51bWJlciwgc2VudEluZGV4OiBudW1iZXIsIGFsdEluZGV4OiBudW1iZXIpIHtcblx0XHQvLyBTZWxlY3QgYSBkaWZmZXJlbnQgYWx0ZXJuYXRpdmUgZm9yIHRoaXMgc2VudGVuY2Vcblx0XHRjb25zdCBhbHRlcm5hdGl2ZXNEYXRhID0gdGhpcy5nZXRTZW50ZW5jZUFsdGVybmF0aXZlcyhwYXJhSW5kZXgsIHNlbnRJbmRleCk7XG5cdFx0Y29uc3QgeyBhbHRlcm5hdGl2ZXMsIG9yaWdpbmFsIH0gPSBhbHRlcm5hdGl2ZXNEYXRhO1xuXG5cdFx0aWYgKCF0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzKSByZXR1cm47XG5cblx0XHRsZXQgbmV3U2VudGVuY2VUZXh0ID0gJyc7XG5cdFx0aWYgKGFsdEluZGV4ID09PSAtMSkge1xuXHRcdFx0Ly8gU2VsZWN0aW5nIG9yaWdpbmFsXG5cdFx0XHRuZXdTZW50ZW5jZVRleHQgPSBvcmlnaW5hbDtcblx0XHR9IGVsc2UgaWYgKGFsdEluZGV4IDwgYWx0ZXJuYXRpdmVzLmxlbmd0aCkge1xuXHRcdFx0Ly8gU2VsZWN0aW5nIGFuIGFsdGVybmF0aXZlXG5cdFx0XHRuZXdTZW50ZW5jZVRleHQgPSBhbHRlcm5hdGl2ZXNbYWx0SW5kZXhdO1xuXHRcdH1cblxuXHRcdGlmICghbmV3U2VudGVuY2VUZXh0KSByZXR1cm47XG5cblx0XHQvLyBVcGRhdGUgdGhlIHNlbnRlbmNlIGluIHJhdyBwYXJhZ3JhcGhzIHdoaWxlIHByZXNlcnZpbmcgY29tbWVudCBzdHJ1Y3R1cmVcblx0XHRjb25zdCBwYXJhZ3JhcGggPSB0aGlzLmN1cnJlbnREb2N1bWVudC5yYXdQYXJhZ3JhcGhzW3BhcmFJbmRleF07XG5cdFx0Y29uc3QgbGluZXMgPSBwYXJhZ3JhcGguc3BsaXQoJ1xcbicpO1xuXHRcdGxldCBzZW50ZW5jZUxpbmVJbmRleCA9IC0xO1xuXHRcdGxldCBub25Db21tZW50TGluZUNvdW50ID0gMDtcblxuXHRcdC8vIEZpbmQgdGhlIHNlbnRlbmNlIGxpbmVcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xuXHRcdFx0aWYgKGxpbmUgJiYgIShsaW5lLnN0YXJ0c1dpdGgoJyUlJykgJiYgbGluZS5lbmRzV2l0aCgnJSUnKSkpIHtcblx0XHRcdFx0aWYgKG5vbkNvbW1lbnRMaW5lQ291bnQgPT09IHNlbnRJbmRleCkge1xuXHRcdFx0XHRcdHNlbnRlbmNlTGluZUluZGV4ID0gaTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRub25Db21tZW50TGluZUNvdW50Kys7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHNlbnRlbmNlTGluZUluZGV4ICE9PSAtMSkge1xuXHRcdFx0Y29uc3Qgb3JpZ2luYWxMaW5lID0gbGluZXNbc2VudGVuY2VMaW5lSW5kZXhdO1xuXHRcdFx0Y29uc3QgbGVhZGluZ1NwYWNlcyA9IG9yaWdpbmFsTGluZS5tYXRjaCgvXlxccyovKT8uWzBdIHx8ICcnO1xuXHRcdFx0Y29uc3QgY3VycmVudFNlbnRlbmNlVGV4dCA9IG9yaWdpbmFsTGluZS50cmltKCk7XG5cblx0XHRcdC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gcHJlc2VydmUgdGhlIG9yaWdpbmFsIHNlbnRlbmNlXG5cdFx0XHRsZXQgb3JpZ2luYWxDb21tZW50RXhpc3RzID0gZmFsc2U7XG5cdFx0XHRsZXQgc2VsZWN0ZWRDb21tZW50Rm91bmQgPSBmYWxzZTtcblx0XHRcdGxldCBzZWxlY3RlZENvbW1lbnRJbmRleCA9IC0xO1xuXG5cdFx0XHQvLyBDaGVjayBleGlzdGluZyBjb21tZW50cyB0byBzZWUgaWYgT1JJR0lOQUwgYWxyZWFkeSBleGlzdHNcblx0XHRcdGZvciAobGV0IGkgPSBzZW50ZW5jZUxpbmVJbmRleCArIDE7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb25zdCBsaW5lID0gbGluZXNbaV0udHJpbSgpO1xuXHRcdFx0XHRpZiAobGluZS5zdGFydHNXaXRoKCclJScpICYmIGxpbmUuZW5kc1dpdGgoJyUlJykpIHtcblx0XHRcdFx0XHRjb25zdCBjb21tZW50Q29udGVudCA9IGxpbmUuc2xpY2UoMiwgLTIpLnRyaW0oKTtcblx0XHRcdFx0XHRpZiAoY29tbWVudENvbnRlbnQuc3RhcnRzV2l0aCgnT1JJR0lOQUw6JykpIHtcblx0XHRcdFx0XHRcdG9yaWdpbmFsQ29tbWVudEV4aXN0cyA9IHRydWU7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjb21tZW50Q29udGVudC5zdGFydHNXaXRoKCdTRUxFQ1RFRDonKSkge1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWRDb21tZW50Rm91bmQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWRDb21tZW50SW5kZXggPSBpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChsaW5lKSB7XG5cdFx0XHRcdFx0Ly8gSGl0IG5leHQgc2VudGVuY2UsIHN0b3AgbG9va2luZ1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgc2VsZWN0aW5nIGFuIGFsdGVybmF0aXZlIGFuZCBubyBPUklHSU5BTCBjb21tZW50IGV4aXN0cyxcblx0XHRcdC8vIHdlIG5lZWQgdG8gcHJlc2VydmUgdGhlIGN1cnJlbnQgc2VudGVuY2UgYXMgdGhlIG9yaWdpbmFsXG5cdFx0XHRpZiAoIW9yaWdpbmFsQ29tbWVudEV4aXN0cyAmJiBhbHRJbmRleCAhPT0gLTEpIHtcblx0XHRcdFx0Ly8gSW5zZXJ0IE9SSUdJTkFMIGNvbW1lbnQgYWZ0ZXIgdGhlIHNlbnRlbmNlXG5cdFx0XHRcdGNvbnN0IGNvbW1lbnRJbmRlbnQgPSBsZWFkaW5nU3BhY2VzO1xuXHRcdFx0XHRsaW5lcy5zcGxpY2Uoc2VudGVuY2VMaW5lSW5kZXggKyAxLCAwLCBgJHtjb21tZW50SW5kZW50fSUlIE9SSUdJTkFMOiAke2N1cnJlbnRTZW50ZW5jZVRleHR9ICUlYCk7XG5cblx0XHRcdFx0Ly8gQWRqdXN0IHNlbGVjdGVkQ29tbWVudEluZGV4IGlmIGl0IGV4aXN0ZWRcblx0XHRcdFx0aWYgKHNlbGVjdGVkQ29tbWVudEluZGV4ICE9PSAtMSkge1xuXHRcdFx0XHRcdHNlbGVjdGVkQ29tbWVudEluZGV4Kys7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVwbGFjZSB0aGUgc2VudGVuY2UgdGV4dCB3aXRoIHRoZSBzZWxlY3RlZCBhbHRlcm5hdGl2ZS9vcmlnaW5hbFxuXHRcdFx0bGluZXNbc2VudGVuY2VMaW5lSW5kZXhdID0gbGVhZGluZ1NwYWNlcyArIG5ld1NlbnRlbmNlVGV4dDtcblxuXHRcdFx0Ly8gVXBkYXRlIG9yIGFkZCBTRUxFQ1RFRCBjb21tZW50XG5cdFx0XHRpZiAoc2VsZWN0ZWRDb21tZW50Rm91bmQgJiYgc2VsZWN0ZWRDb21tZW50SW5kZXggIT09IC0xKSB7XG5cdFx0XHRcdC8vIFVwZGF0ZSBleGlzdGluZyBTRUxFQ1RFRCBjb21tZW50XG5cdFx0XHRcdGNvbnN0IGNvbW1lbnRMZWFkaW5nU3BhY2VzID0gbGluZXNbc2VsZWN0ZWRDb21tZW50SW5kZXhdLm1hdGNoKC9eXFxzKi8pPy5bMF0gfHwgJyc7XG5cdFx0XHRcdGxpbmVzW3NlbGVjdGVkQ29tbWVudEluZGV4XSA9IGAke2NvbW1lbnRMZWFkaW5nU3BhY2VzfSUlIFNFTEVDVEVEOiR7YWx0SW5kZXh9ICUlYDtcblx0XHRcdH0gZWxzZSBpZiAoYWx0SW5kZXggIT09IC0xKSB7XG5cdFx0XHRcdC8vIEFkZCBuZXcgU0VMRUNURUQgY29tbWVudFxuXHRcdFx0XHRjb25zdCBjb21tZW50SW5kZW50ID0gbGVhZGluZ1NwYWNlcztcblx0XHRcdFx0Y29uc3QgaW5zZXJ0SW5kZXggPSBvcmlnaW5hbENvbW1lbnRFeGlzdHMgPyBzZW50ZW5jZUxpbmVJbmRleCArIDIgOiBzZW50ZW5jZUxpbmVJbmRleCArIDE7XG5cdFx0XHRcdGxpbmVzLnNwbGljZShpbnNlcnRJbmRleCwgMCwgYCR7Y29tbWVudEluZGVudH0lJSBTRUxFQ1RFRDoke2FsdEluZGV4fSAlJWApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBzZWxlY3Rpbmcgb3JpZ2luYWwgKGFsdEluZGV4ID09PSAtMSksIHJlbW92ZSBTRUxFQ1RFRCBjb21tZW50XG5cdFx0XHRpZiAoYWx0SW5kZXggPT09IC0xICYmIHNlbGVjdGVkQ29tbWVudEZvdW5kICYmIHNlbGVjdGVkQ29tbWVudEluZGV4ICE9PSAtMSkge1xuXHRcdFx0XHRsaW5lcy5zcGxpY2Uoc2VsZWN0ZWRDb21tZW50SW5kZXgsIDEpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBVcGRhdGUgdGhlIHBhcmFncmFwaFxuXHRcdFx0dGhpcy5jdXJyZW50RG9jdW1lbnQucmF3UGFyYWdyYXBoc1twYXJhSW5kZXhdID0gbGluZXMuam9pbignXFxuJyk7XG5cblx0XHRcdC8vIFN5bmMgY2hhbmdlcyBhbmQgc2F2ZVxuXHRcdFx0dGhpcy5zeW5jRnJvbVJhd1BhcmFncmFwaHMoKTtcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZUNoYW5nZXNUb0ZpbGUoKTtcblxuXHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cgdXBkYXRlZCBjb250ZW50XG5cdFx0XHR0aGlzLnJlbmRlckN1cnJlbnRab29tKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBkZWxldGVBbHRlcm5hdGl2ZShwYXJhSW5kZXg6IG51bWJlciwgc2VudEluZGV4OiBudW1iZXIsIGFsdEluZGV4OiBudW1iZXIpIHtcblx0XHQvLyBEZWxldGUgYSBzcGVjaWZpYyBhbHRlcm5hdGl2ZVxuXHRcdGlmICghdGhpcy5jdXJyZW50RG9jdW1lbnQucmF3UGFyYWdyYXBocyB8fCBhbHRJbmRleCA8IDApIHJldHVybjtcblxuXHRcdGNvbnN0IHBhcmFncmFwaCA9IHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbcGFyYUluZGV4XTtcblx0XHRjb25zdCBsaW5lcyA9IHBhcmFncmFwaC5zcGxpdCgnXFxuJyk7XG5cdFx0bGV0IHNlbnRlbmNlTGluZUluZGV4ID0gLTE7XG5cdFx0bGV0IG5vbkNvbW1lbnRMaW5lQ291bnQgPSAwO1xuXG5cdFx0Ly8gRmluZCB0aGUgc2VudGVuY2UgbGluZVxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cdFx0XHRpZiAobGluZSAmJiAhKGxpbmUuc3RhcnRzV2l0aCgnJSUnKSAmJiBsaW5lLmVuZHNXaXRoKCclJScpKSkge1xuXHRcdFx0XHRpZiAobm9uQ29tbWVudExpbmVDb3VudCA9PT0gc2VudEluZGV4KSB7XG5cdFx0XHRcdFx0c2VudGVuY2VMaW5lSW5kZXggPSBpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5vbkNvbW1lbnRMaW5lQ291bnQrKztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoc2VudGVuY2VMaW5lSW5kZXggPT09IC0xKSByZXR1cm47XG5cblx0XHQvLyBGaW5kIGFuZCByZW1vdmUgdGhlIGFsdGVybmF0aXZlIGNvbW1lbnRcblx0XHRsZXQgY3VycmVudEFsdEluZGV4ID0gMDtcblx0XHRmb3IgKGxldCBpID0gc2VudGVuY2VMaW5lSW5kZXggKyAxOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cdFx0XHRpZiAobGluZS5zdGFydHNXaXRoKCclJScpICYmIGxpbmUuZW5kc1dpdGgoJyUlJykpIHtcblx0XHRcdFx0Y29uc3QgY29tbWVudENvbnRlbnQgPSBsaW5lLnNsaWNlKDIsIC0yKS50cmltKCk7XG5cdFx0XHRcdGlmICghY29tbWVudENvbnRlbnQuc3RhcnRzV2l0aCgnU0VMRUNURUQ6JykgJiYgIWNvbW1lbnRDb250ZW50LnN0YXJ0c1dpdGgoJ09SSUdJTkFMOicpKSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyBpcyBhbiBhbHRlcm5hdGl2ZVxuXHRcdFx0XHRcdGlmIChjdXJyZW50QWx0SW5kZXggPT09IGFsdEluZGV4KSB7XG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgdGhpcyBsaW5lXG5cdFx0XHRcdFx0XHRsaW5lcy5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y3VycmVudEFsdEluZGV4Kys7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAobGluZSkge1xuXHRcdFx0XHQvLyBIaXQgbmV4dCBzZW50ZW5jZSwgc3RvcCBsb29raW5nXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFVwZGF0ZSB0aGUgcGFyYWdyYXBoXG5cdFx0dGhpcy5jdXJyZW50RG9jdW1lbnQucmF3UGFyYWdyYXBoc1twYXJhSW5kZXhdID0gbGluZXMuam9pbignXFxuJyk7XG5cblx0XHQvLyBTeW5jIGNoYW5nZXMgYW5kIHNhdmVcblx0XHR0aGlzLnN5bmNGcm9tUmF3UGFyYWdyYXBocygpO1xuXHRcdGF3YWl0IHRoaXMuc2F2ZUNoYW5nZXNUb0ZpbGUoKTtcblxuXHRcdC8vIFJlLXJlbmRlciB0byBzaG93IHVwZGF0ZWQgY29udGVudFxuXHRcdHRoaXMucmVuZGVyQ3VycmVudFpvb20oKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc2F2ZU5ld0FsdGVybmF0aXZlKHBhcmFJbmRleDogbnVtYmVyLCBzZW50SW5kZXg6IG51bWJlciwgbmV3VGV4dDogc3RyaW5nLCBzZW50QmxvY2s6IEhUTUxFbGVtZW50KSB7XG5cdFx0Ly8gU2F2ZSBhIG5ldyBhbHRlcm5hdGl2ZSBmb3IgdGhpcyBzZW50ZW5jZVxuXHRcdGlmICghbmV3VGV4dC50cmltKCkgfHwgIXRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHMpIHJldHVybjtcblxuXHRcdGNvbnN0IHBhcmFncmFwaCA9IHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbcGFyYUluZGV4XTtcblx0XHRjb25zdCBsaW5lcyA9IHBhcmFncmFwaC5zcGxpdCgnXFxuJyk7XG5cdFx0bGV0IHNlbnRlbmNlTGluZUluZGV4ID0gLTE7XG5cdFx0bGV0IG5vbkNvbW1lbnRMaW5lQ291bnQgPSAwO1xuXG5cdFx0Ly8gRmluZCB0aGUgc2VudGVuY2UgbGluZVxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXS50cmltKCk7XG5cdFx0XHRpZiAobGluZSAmJiAhKGxpbmUuc3RhcnRzV2l0aCgnJSUnKSAmJiBsaW5lLmVuZHNXaXRoKCclJScpKSkge1xuXHRcdFx0XHRpZiAobm9uQ29tbWVudExpbmVDb3VudCA9PT0gc2VudEluZGV4KSB7XG5cdFx0XHRcdFx0c2VudGVuY2VMaW5lSW5kZXggPSBpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5vbkNvbW1lbnRMaW5lQ291bnQrKztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoc2VudGVuY2VMaW5lSW5kZXggPT09IC0xKSByZXR1cm47XG5cblx0XHQvLyBGaW5kIHdoZXJlIHRvIGluc2VydCB0aGUgbmV3IGFsdGVybmF0aXZlIChhZnRlciBleGlzdGluZyBhbHRlcm5hdGl2ZXMpXG5cdFx0bGV0IGluc2VydEluZGV4ID0gc2VudGVuY2VMaW5lSW5kZXggKyAxO1xuXHRcdGZvciAobGV0IGkgPSBzZW50ZW5jZUxpbmVJbmRleCArIDE7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcblx0XHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoJyUlJykgJiYgbGluZS5lbmRzV2l0aCgnJSUnKSkge1xuXHRcdFx0XHRpbnNlcnRJbmRleCA9IGkgKyAxO1xuXHRcdFx0fSBlbHNlIGlmIChsaW5lKSB7XG5cdFx0XHRcdC8vIEhpdCBuZXh0IHNlbnRlbmNlLCBzdG9wIGxvb2tpbmdcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSW5zZXJ0IHRoZSBuZXcgYWx0ZXJuYXRpdmVcblx0XHRjb25zdCBjb21tZW50SW5kZW50ID0gbGluZXNbc2VudGVuY2VMaW5lSW5kZXhdLm1hdGNoKC9eXFxzKi8pPy5bMF0gfHwgJyc7XG5cdFx0bGluZXMuc3BsaWNlKGluc2VydEluZGV4LCAwLCBgJHtjb21tZW50SW5kZW50fSUlICR7bmV3VGV4dC50cmltKCl9ICUlYCk7XG5cblx0XHQvLyBVcGRhdGUgdGhlIHBhcmFncmFwaFxuXHRcdHRoaXMuY3VycmVudERvY3VtZW50LnJhd1BhcmFncmFwaHNbcGFyYUluZGV4XSA9IGxpbmVzLmpvaW4oJ1xcbicpO1xuXG5cdFx0Ly8gU3luYyBjaGFuZ2VzIGFuZCBzYXZlXG5cdFx0dGhpcy5zeW5jRnJvbVJhd1BhcmFncmFwaHMoKTtcblx0XHRhd2FpdCB0aGlzLnNhdmVDaGFuZ2VzVG9GaWxlKCk7XG5cblx0XHQvLyBSZW1vdmUgdGhlIGlucHV0IGNvbnRhaW5lclxuXHRcdGNvbnN0IGlucHV0Q29udGFpbmVyID0gc2VudEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5mb3JuYXgtYWRkLWlucHV0Jyk7XG5cdFx0aWYgKGlucHV0Q29udGFpbmVyKSB7XG5cdFx0XHRpbnB1dENvbnRhaW5lci5yZW1vdmUoKTtcblx0XHR9XG5cblx0XHQvLyBSZS1yZW5kZXIgdG8gc2hvdyB1cGRhdGVkIGNvbnRlbnRcblx0XHR0aGlzLnJlbmRlckN1cnJlbnRab29tKCk7XG5cdH1cblxuXHRwcml2YXRlIGFkZFN0eWxlcygpIHtcblx0XHQvLyBBZGQgQ1NTIHN0eWxlcyBmb3IgdGhlIHRlbGVzY29wZSBpbnRlcmZhY2Vcblx0XHRpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JuYXgtc3R5bGVzJykpIHtcblx0XHRcdGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblx0XHRcdHN0eWxlLmlkID0gJ2Zvcm5heC1zdHlsZXMnO1xuXHRcdFx0c3R5bGUudGV4dENvbnRlbnQgPSBgXG5cdFx0XHRcdC5mb3JuYXgtdGVsZXNjb3BlIHtcblx0XHRcdFx0XHRoZWlnaHQ6IDEwMCU7XG5cdFx0XHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdFx0XHRmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuXHRcdFx0XHRcdGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LWludGVyZmFjZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LXpvb20tY29udHJvbHMge1xuXHRcdFx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRcdFx0Z2FwOiA4cHg7XG5cdFx0XHRcdFx0cGFkZGluZzogMTZweDtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG5cdFx0XHRcdFx0Ym9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtem9vbS1idG4ge1xuXHRcdFx0XHRcdHBhZGRpbmc6IDhweCAxNnB4O1xuXHRcdFx0XHRcdGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuXHRcdFx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG5cdFx0XHRcdFx0Ym9yZGVyLXJhZGl1czogNnB4O1xuXHRcdFx0XHRcdGN1cnNvcjogcG9pbnRlcjtcblx0XHRcdFx0XHR0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC16b29tLWJ0bjpob3ZlciB7XG5cdFx0XHRcdFx0YmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC16b29tLWJ0bi5hY3RpdmUge1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG5cdFx0XHRcdFx0Y29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcblx0XHRcdFx0XHRib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWNvbnRlbnQge1xuXHRcdFx0XHRcdGZsZXg6IDE7XG5cdFx0XHRcdFx0b3ZlcmZsb3cteTogYXV0bztcblx0XHRcdFx0XHRwYWRkaW5nOiAxNnB4O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1wbGFjZWhvbGRlciB7XG5cdFx0XHRcdFx0dGV4dC1hbGlnbjogY2VudGVyO1xuXHRcdFx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcblx0XHRcdFx0XHRtYXJnaW4tdG9wOiA0MHB4O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1wYXJhZ3JhcGgtYmxvY2ssIC5mb3JuYXgtc2VudGVuY2UtYmxvY2sge1xuXHRcdFx0XHRcdHBvc2l0aW9uOiByZWxhdGl2ZTtcblx0XHRcdFx0XHRtYXJnaW46IDEycHggMCAxMnB4IDMycHg7XG5cdFx0XHRcdFx0cGFkZGluZzogMTZweDtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuXHRcdFx0XHRcdGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcblx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiA4cHg7XG5cdFx0XHRcdFx0dHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtcGFyYWdyYXBoLWJsb2NrOmhvdmVyLCAuZm9ybmF4LXNlbnRlbmNlLWJsb2NrOmhvdmVyIHtcblx0XHRcdFx0XHRib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG5cdFx0XHRcdFx0Ym94LXNoYWRvdzogMCAycHggOHB4IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm94LXNoYWRvdyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWRyYWctaGFuZGxlIHtcblx0XHRcdFx0XHRwb3NpdGlvbjogYWJzb2x1dGU7XG5cdFx0XHRcdFx0bGVmdDogLTIwcHg7XG5cdFx0XHRcdFx0dG9wOiA1MCU7XG5cdFx0XHRcdFx0dHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xuXHRcdFx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcblx0XHRcdFx0XHRjdXJzb3I6IGdyYWI7XG5cdFx0XHRcdFx0Zm9udC1zaXplOiAxNnB4O1xuXHRcdFx0XHRcdG9wYWNpdHk6IDAuNjtcblx0XHRcdFx0XHRwYWRkaW5nOiA0cHg7XG5cdFx0XHRcdFx0ei1pbmRleDogMTA7XG5cdFx0XHRcdFx0Zm9udC13ZWlnaHQ6IGJvbGQ7XG5cdFx0XHRcdFx0dXNlci1zZWxlY3Q6IG5vbmU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LXBhcmFncmFwaC1ibG9jazpob3ZlciAuZm9ybmF4LWRyYWctaGFuZGxlLFxuXHRcdFx0XHQuZm9ybmF4LXNlbnRlbmNlLWJsb2NrOmhvdmVyIC5mb3JuYXgtZHJhZy1oYW5kbGUge1xuXHRcdFx0XHRcdG9wYWNpdHk6IDE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWRyYWctaGFuZGxlOmFjdGl2ZSB7XG5cdFx0XHRcdFx0Y3Vyc29yOiBncmFiYmluZztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtcGFyYWdyYXBoLWNvbnRlbnQsIC5mb3JuYXgtc2VudGVuY2UtY29udGVudCB7XG5cdFx0XHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdFx0XHRcdGxpbmUtaGVpZ2h0OiAxLjY7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LXNlbnRlbmNlLWNvdW50IHtcblx0XHRcdFx0XHRwb3NpdGlvbjogYWJzb2x1dGU7XG5cdFx0XHRcdFx0dG9wOiA4cHg7XG5cdFx0XHRcdFx0cmlnaHQ6IDhweDtcblx0XHRcdFx0XHRmb250LXNpemU6IDExcHg7XG5cdFx0XHRcdFx0Y29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcblx0XHRcdFx0XHRwYWRkaW5nOiAycHggNnB4O1xuXHRcdFx0XHRcdGJvcmRlci1yYWRpdXM6IDEwcHg7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWVkaXQtc2VudGVuY2UtYnRuIHtcblx0XHRcdFx0XHRwb3NpdGlvbjogYWJzb2x1dGU7XG5cdFx0XHRcdFx0dG9wOiA4cHg7XG5cdFx0XHRcdFx0cmlnaHQ6IDhweDtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiBub25lO1xuXHRcdFx0XHRcdGJvcmRlcjogbm9uZTtcblx0XHRcdFx0XHRjdXJzb3I6IHBvaW50ZXI7XG5cdFx0XHRcdFx0b3BhY2l0eTogMDtcblx0XHRcdFx0XHR0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtc2VudGVuY2UtYmxvY2s6aG92ZXIgLmZvcm5heC1lZGl0LXNlbnRlbmNlLWJ0biB7XG5cdFx0XHRcdFx0b3BhY2l0eTogMTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtY29tcGxldGlvbi1idG4ge1xuXHRcdFx0XHRcdHBvc2l0aW9uOiBhYnNvbHV0ZTtcblx0XHRcdFx0XHRib3R0b206IDhweDtcblx0XHRcdFx0XHRyaWdodDogOHB4O1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IG5vbmU7XG5cdFx0XHRcdFx0Ym9yZGVyOiBub25lO1xuXHRcdFx0XHRcdGN1cnNvcjogcG9pbnRlcjtcblx0XHRcdFx0XHRmb250LXNpemU6IDE0cHg7XG5cdFx0XHRcdFx0b3BhY2l0eTogMC43O1xuXHRcdFx0XHRcdHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlO1xuXHRcdFx0XHRcdHBhZGRpbmc6IDJweCA0cHg7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LXBhcmFncmFwaC1ibG9jazpob3ZlciAuZm9ybmF4LWNvbXBsZXRpb24tYnRuIHtcblx0XHRcdFx0XHRvcGFjaXR5OiAxO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1wYXJhZ3JhcGgtaGVhZGVyIHtcblx0XHRcdFx0XHRmb250LXdlaWdodDogNjAwO1xuXHRcdFx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCk7XG5cdFx0XHRcdFx0bWFyZ2luOiAyMHB4IDAgMTJweCAwO1xuXHRcdFx0XHRcdHBhZGRpbmc6IDhweCAwO1xuXHRcdFx0XHRcdGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LW92ZXJ2aWV3IHtcblx0XHRcdFx0XHRtYXJnaW4tYm90dG9tOiAyNHB4O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1kb2N1bWVudC10aXRsZSB7XG5cdFx0XHRcdFx0Y29sb3I6IHZhcigtLXRleHQtYWNjZW50KTtcblx0XHRcdFx0XHRmb250LXNpemU6IDEuNWVtO1xuXHRcdFx0XHRcdGZvbnQtd2VpZ2h0OiA2MDA7XG5cdFx0XHRcdFx0bWFyZ2luLWJvdHRvbTogOHB4O1xuXHRcdFx0XHRcdGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS10ZXh0LWFjY2VudCk7XG5cdFx0XHRcdFx0cGFkZGluZy1ib3R0b206IDhweDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtc3RhdHMge1xuXHRcdFx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRcdFx0Z2FwOiAxNnB4O1xuXHRcdFx0XHRcdG1hcmdpbjogMTJweCAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LnN0YXQge1xuXHRcdFx0XHRcdHBhZGRpbmc6IDRweCAxMnB4O1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcblx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiAxNnB4O1xuXHRcdFx0XHRcdGZvbnQtc2l6ZTogMTNweDtcblx0XHRcdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LW1pbmktcGFyYWdyYXBocyB7XG5cdFx0XHRcdFx0ZGlzcGxheTogZ3JpZDtcblx0XHRcdFx0XHRnYXA6IDEycHg7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LW1pbmktcGFyYWdyYXBoIHtcblx0XHRcdFx0XHRwYWRkaW5nOiAxMnB4O1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcblx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiA2cHg7XG5cdFx0XHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdFx0XHRcdHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG5cdFx0XHRcdFx0Zm9udC1zaXplOiAxNHB4O1xuXHRcdFx0XHRcdGxpbmUtaGVpZ2h0OiAxLjQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LW1pbmktcGFyYWdyYXBoOmhvdmVyIHtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuXHRcdFx0XHRcdGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LXNlY3Rpb25zLWNvbnRhaW5lciB7XG5cdFx0XHRcdFx0ZGlzcGxheTogZ3JpZDtcblx0XHRcdFx0XHRnYXA6IDE2cHg7XG5cdFx0XHRcdFx0bWFyZ2luLXRvcDogMTZweDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtc2VjdGlvbi1ibG9jayB7XG5cdFx0XHRcdFx0YmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuXHRcdFx0XHRcdGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcblx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiA4cHg7XG5cdFx0XHRcdFx0cGFkZGluZzogMTZweDtcblx0XHRcdFx0XHRjdXJzb3I6IHBvaW50ZXI7XG5cdFx0XHRcdFx0dHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtc2VjdGlvbi1ibG9jazpob3ZlciB7XG5cdFx0XHRcdFx0Ym9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuXHRcdFx0XHRcdGJveC1zaGFkb3c6IDAgMnB4IDhweCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJveC1zaGFkb3cpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1zZWN0aW9uLWhlYWRlciB7XG5cdFx0XHRcdFx0Ym9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcblx0XHRcdFx0XHRtYXJnaW4tYm90dG9tOiAxMnB4O1xuXHRcdFx0XHRcdHBhZGRpbmctYm90dG9tOiA4cHg7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LXNlY3Rpb24tdGl0bGUge1xuXHRcdFx0XHRcdG1hcmdpbjogMDtcblx0XHRcdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpO1xuXHRcdFx0XHRcdGZvbnQtc2l6ZTogMTZweDtcblx0XHRcdFx0XHRmb250LXdlaWdodDogNjAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1zZWN0aW9uLWNvbnRlbnQge1xuXHRcdFx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRcdFx0ZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcblx0XHRcdFx0XHRnYXA6IDZweDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtcGFyYWdyYXBoLXByZXZpZXcge1xuXHRcdFx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcblx0XHRcdFx0XHRmb250LXNpemU6IDE0cHg7XG5cdFx0XHRcdFx0bGluZS1oZWlnaHQ6IDEuNDtcblx0XHRcdFx0XHRwYWRkaW5nOiA0cHggMDtcblx0XHRcdFx0XHRib3JkZXItbGVmdDogMnB4IHNvbGlkIHRyYW5zcGFyZW50O1xuXHRcdFx0XHRcdHBhZGRpbmctbGVmdDogOHB4O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC10aGlyZC1sZXZlbC1oZWFkaW5nIHtcblx0XHRcdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuXHRcdFx0XHRcdGZvbnQtd2VpZ2h0OiA1MDA7XG5cdFx0XHRcdFx0Zm9udC1zaXplOiAxNHB4O1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG5cdFx0XHRcdFx0cGFkZGluZzogNHB4IDhweDtcblx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiAzcHg7XG5cdFx0XHRcdFx0Ym9yZGVyLWxlZnQ6IDJweCBzb2xpZCB2YXIoLS10ZXh0LWFjY2VudCk7XG5cdFx0XHRcdFx0Zm9udC1zdHlsZTogaXRhbGljO1xuXHRcdFx0XHRcdG9wYWNpdHk6IDAuOTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtaGVhZGluZy1ibG9jayB7XG5cdFx0XHRcdFx0cG9zaXRpb246IHJlbGF0aXZlO1xuXHRcdFx0XHRcdG1hcmdpbjogMTJweCAwO1xuXHRcdFx0XHRcdHBhZGRpbmc6IDEycHggMTZweDtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG5cdFx0XHRcdFx0Ym9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuXHRcdFx0XHRcdGJvcmRlci1yYWRpdXM6IDZweDtcblx0XHRcdFx0XHRvcGFjaXR5OiAwLjY7XG5cdFx0XHRcdFx0Y3Vyc29yOiBkZWZhdWx0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1oZWFkaW5nLWNvbnRlbnQge1xuXHRcdFx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcblx0XHRcdFx0XHRmb250LXdlaWdodDogNjAwO1xuXHRcdFx0XHRcdGxpbmUtaGVpZ2h0OiAxLjQ7XG5cdFx0XHRcdFx0cG9pbnRlci1ldmVudHM6IG5vbmU7XG5cdFx0XHRcdFx0dXNlci1zZWxlY3Q6IG5vbmU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWhlYWRpbmctYmxvY2suZm9ybmF4LWRyb3AtdGFyZ2V0IHtcblx0XHRcdFx0XHRib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCkgIWltcG9ydGFudDtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiByZ2JhKHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1yZ2IsIDAsIDEyMiwgMjU1KSwgMC4xKSAhaW1wb3J0YW50O1xuXHRcdFx0XHRcdG9wYWNpdHk6IDEgIWltcG9ydGFudDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtcGxhY2Vob2xkZXIge1xuXHRcdFx0XHRcdG9wYWNpdHk6IDAuMyAhaW1wb3J0YW50O1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCkgIWltcG9ydGFudDtcblx0XHRcdFx0XHRib3JkZXI6IDJweCBkYXNoZWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSAhaW1wb3J0YW50O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmRyYWdnaW5nIHtcblx0XHRcdFx0XHR6LWluZGV4OiAxMDAwO1xuXHRcdFx0XHRcdGJveC1zaGFkb3c6IDAgNHB4IDE2cHggdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3gtc2hhZG93KSAhaW1wb3J0YW50O1xuXHRcdFx0XHRcdHRyYW5zZm9ybTogcm90YXRlKDJkZWcpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1kcm9wLXRhcmdldCB7XG5cdFx0XHRcdFx0Ym9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpICFpbXBvcnRhbnQ7XG5cdFx0XHRcdFx0YmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50LWhvdmVyKSAhaW1wb3J0YW50O1xuXHRcdFx0XHRcdHRyYW5zZm9ybTogc2NhbGUoMS4wMik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWRyb3AtYmVmb3JlIHtcblx0XHRcdFx0XHRib3JkZXItdG9wOiAzcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSAhaW1wb3J0YW50O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1kcm9wLWFmdGVyIHtcblx0XHRcdFx0XHRib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSAhaW1wb3J0YW50O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1oYXMtYWx0ZXJuYXRpdmVzIHtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjM1LCA1OSwgMC4xNSkgIWltcG9ydGFudDtcblx0XHRcdFx0XHRib3JkZXItbGVmdDogM3B4IHNvbGlkICNmZmMxMDcgIWltcG9ydGFudDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtcGFyYWdyYXBoLWJsb2NrLmZvcm5heC1oYXMtYWx0ZXJuYXRpdmVzIHtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjM1LCA1OSwgMC4xKSAhaW1wb3J0YW50O1xuXHRcdFx0XHRcdGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2ZmYzEwNyAhaW1wb3J0YW50O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1zZW50ZW5jZS1ibG9jay5mb3JuYXgtaGFzLWFsdGVybmF0aXZlcyB7XG5cdFx0XHRcdFx0YmFja2dyb3VuZDogcmdiYSgyNTUsIDIzNSwgNTksIDAuMikgIWltcG9ydGFudDtcblx0XHRcdFx0XHRib3JkZXItbGVmdDogM3B4IHNvbGlkICNmZmMxMDcgIWltcG9ydGFudDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtcGFyYWdyYXBoLWNvbXBsZXRlIHtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiByZ2JhKDc2LCAxNzUsIDgwLCAwLjEpICFpbXBvcnRhbnQ7XG5cdFx0XHRcdFx0Ym9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjNGNhZjUwICFpbXBvcnRhbnQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LXBhcmFncmFwaC1ibG9jay5mb3JuYXgtcGFyYWdyYXBoLWNvbXBsZXRlIHtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiByZ2JhKDc2LCAxNzUsIDgwLCAwLjE1KSAhaW1wb3J0YW50O1xuXHRcdFx0XHRcdGJvcmRlci1sZWZ0OiAzcHggc29saWQgIzRjYWY1MCAhaW1wb3J0YW50O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyogSW5saW5lIHNlbnRlbmNlIGFsdGVybmF0aXZlcyBzdHlsaW5nICovXG5cdFx0XHRcdC5mb3JuYXgtc2VudGVuY2Utcm93IHtcblx0XHRcdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0XHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdFx0XHRcdFx0Z2FwOiA4cHg7XG5cdFx0XHRcdFx0ZmxleC13cmFwOiB3cmFwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1zZW50ZW5jZS1jb250ZW50IHtcblx0XHRcdFx0XHRmbGV4OiAxO1xuXHRcdFx0XHRcdG1pbi13aWR0aDogMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtYWRkLWFsdGVybmF0aXZlLWJ0biwgLmZvcm5heC1zYXZlLWZpbmFsLWJ0biB7XG5cdFx0XHRcdFx0YmFja2dyb3VuZDogbm9uZTtcblx0XHRcdFx0XHRib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG5cdFx0XHRcdFx0Ym9yZGVyLXJhZGl1czogM3B4O1xuXHRcdFx0XHRcdHBhZGRpbmc6IDJweCA2cHg7XG5cdFx0XHRcdFx0Zm9udC1zaXplOiAxMXB4O1xuXHRcdFx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcblx0XHRcdFx0XHRjdXJzb3I6IHBvaW50ZXI7XG5cdFx0XHRcdFx0b3BhY2l0eTogMC43O1xuXHRcdFx0XHRcdHRyYW5zaXRpb246IG9wYWNpdHkgMC4ycyBlYXNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1hZGQtYWx0ZXJuYXRpdmUtYnRuOmhvdmVyLCAuZm9ybmF4LXNhdmUtZmluYWwtYnRuOmhvdmVyIHtcblx0XHRcdFx0XHRvcGFjaXR5OiAxO1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1zYXZlLWZpbmFsLWJ0biB7XG5cdFx0XHRcdFx0Y29sb3I6IHZhcigtLWNvbG9yLWdyZWVuKTtcblx0XHRcdFx0XHRib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWdyZWVuKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtc2F2ZS1maW5hbC1idG46aG92ZXIge1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHJnYmEoNzYsIDE3NSwgODAsIDAuMSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWFsdGVybmF0aXZlcy1jb250YWluZXIge1xuXHRcdFx0XHRcdG1hcmdpbi10b3A6IDhweDtcblx0XHRcdFx0XHRwYWRkaW5nOiA4cHg7XG5cdFx0XHRcdFx0YmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuXHRcdFx0XHRcdGJvcmRlci1yYWRpdXM6IDRweDtcblx0XHRcdFx0XHRib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWFsdGVybmF0aXZlLWl0ZW0ge1xuXHRcdFx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG5cdFx0XHRcdFx0Z2FwOiA4cHg7XG5cdFx0XHRcdFx0bWFyZ2luLWJvdHRvbTogNnB4O1xuXHRcdFx0XHRcdHBhZGRpbmc6IDRweDtcblx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiAzcHg7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWFsdGVybmF0aXZlLWl0ZW06bGFzdC1jaGlsZCB7XG5cdFx0XHRcdFx0bWFyZ2luLWJvdHRvbTogMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtYWx0ZXJuYXRpdmUtaXRlbTpob3ZlciB7XG5cdFx0XHRcdFx0YmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWFsdGVybmF0aXZlLXJhZGlvIHtcblx0XHRcdFx0XHRtYXJnaW4tdG9wOiAycHg7XG5cdFx0XHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1hbHRlcm5hdGl2ZS10ZXh0IHtcblx0XHRcdFx0XHRmbGV4OiAxO1xuXHRcdFx0XHRcdGZvbnQtc2l6ZTogMTNweDtcblx0XHRcdFx0XHRsaW5lLWhlaWdodDogMS40O1xuXHRcdFx0XHRcdHdvcmQtd3JhcDogYnJlYWstd29yZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtb3JpZ2luYWwtc2VudGVuY2UgLmZvcm5heC1hbHRlcm5hdGl2ZS10ZXh0IHtcblx0XHRcdFx0XHRmb250LXN0eWxlOiBpdGFsaWM7XG5cdFx0XHRcdFx0Y29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1kZWxldGUtYWx0ZXJuYXRpdmUtYnRuIHtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiBub25lO1xuXHRcdFx0XHRcdGJvcmRlcjogbm9uZTtcblx0XHRcdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1lcnJvcik7XG5cdFx0XHRcdFx0Y3Vyc29yOiBwb2ludGVyO1xuXHRcdFx0XHRcdGZvbnQtc2l6ZTogMTZweDtcblx0XHRcdFx0XHRsaW5lLWhlaWdodDogMTtcblx0XHRcdFx0XHRwYWRkaW5nOiAwO1xuXHRcdFx0XHRcdHdpZHRoOiAyMHB4O1xuXHRcdFx0XHRcdGhlaWdodDogMjBweDtcblx0XHRcdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0XHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XG5cdFx0XHRcdFx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cdFx0XHRcdFx0Ym9yZGVyLXJhZGl1czogMnB4O1xuXHRcdFx0XHRcdG9wYWNpdHk6IDAuNjtcblx0XHRcdFx0XHR0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMnMgZWFzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtZGVsZXRlLWFsdGVybmF0aXZlLWJ0bjpob3ZlciB7XG5cdFx0XHRcdFx0b3BhY2l0eTogMTtcblx0XHRcdFx0XHRiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yLWhvdmVyKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtYWRkLWlucHV0IHtcblx0XHRcdFx0XHRtYXJnaW4tdG9wOiA4cHg7XG5cdFx0XHRcdFx0cGFkZGluZzogOHB4O1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcblx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiA0cHg7XG5cdFx0XHRcdFx0Ym9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1hbHRlcm5hdGl2ZS1pbnB1dCB7XG5cdFx0XHRcdFx0d2lkdGg6IDEwMCU7XG5cdFx0XHRcdFx0bWluLWhlaWdodDogNjBweDtcblx0XHRcdFx0XHRyZXNpemU6IHZlcnRpY2FsO1xuXHRcdFx0XHRcdHBhZGRpbmc6IDhweDtcblx0XHRcdFx0XHRib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG5cdFx0XHRcdFx0Ym9yZGVyLXJhZGl1czogM3B4O1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG5cdFx0XHRcdFx0Y29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcblx0XHRcdFx0XHRmb250LWZhbWlseTogaW5oZXJpdDtcblx0XHRcdFx0XHRmb250LXNpemU6IDEzcHg7XG5cdFx0XHRcdFx0bGluZS1oZWlnaHQ6IDEuNDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtYWx0ZXJuYXRpdmUtaW5wdXQ6Zm9jdXMge1xuXHRcdFx0XHRcdG91dGxpbmU6IG5vbmU7XG5cdFx0XHRcdFx0Ym9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1pbnB1dC1idXR0b25zIHtcblx0XHRcdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0XHRcdGdhcDogOHB4O1xuXHRcdFx0XHRcdG1hcmdpbi10b3A6IDhweDtcblx0XHRcdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1zYXZlLWFsdGVybmF0aXZlLWJ0biwgLmZvcm5heC1jYW5jZWwtYWx0ZXJuYXRpdmUtYnRuIHtcblx0XHRcdFx0XHRwYWRkaW5nOiA0cHggMTJweDtcblx0XHRcdFx0XHRib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG5cdFx0XHRcdFx0Ym9yZGVyLXJhZGl1czogM3B4O1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG5cdFx0XHRcdFx0Y29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcblx0XHRcdFx0XHRjdXJzb3I6IHBvaW50ZXI7XG5cdFx0XHRcdFx0Zm9udC1zaXplOiAxMnB4O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LmZvcm5heC1zYXZlLWFsdGVybmF0aXZlLWJ0biB7XG5cdFx0XHRcdFx0YmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcblx0XHRcdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1vbi1hY2NlbnQpO1xuXHRcdFx0XHRcdGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC5mb3JuYXgtc2F2ZS1hbHRlcm5hdGl2ZS1idG46aG92ZXIge1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQuZm9ybmF4LWNhbmNlbC1hbHRlcm5hdGl2ZS1idG46aG92ZXIge1xuXHRcdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHRgO1xuXHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdFx0fVxuXHR9XG5cblx0ZGVzdHJveSgpIHtcblx0XHQvLyBDbGVhbnVwXG5cdFx0Y29uc3Qgc3R5bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybmF4LXN0eWxlcycpO1xuXHRcdGlmIChzdHlsZSkgc3R5bGUucmVtb3ZlKCk7XG5cdH1cbn1cblxuLy8gU2VudGVuY2VFZGl0TW9kYWwgY2xhc3Mgd2lsbCBuZWVkIHRvIGJlIGltcGxlbWVudGVkIHNlcGFyYXRlbHlcbi8vIFRoaXMgaXMgYSBwbGFjZWhvbGRlciAtIHRoZSBhY3R1YWwgbW9kYWwgaW1wbGVtZW50YXRpb24gd2lsbCBiZSBpbiBzZW50ZW5jZS1lZGl0LW1vZGFsLnRzXG5jbGFzcyBTZW50ZW5jZUVkaXRNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0Y29uc3RydWN0b3IoYXBwOiBhbnksIHNlbnRlbmNlOiBzdHJpbmcsIHBhcmFJbmRleDogbnVtYmVyLCBzZW50SW5kZXg6IG51bWJlciwgb3ZlcmxheTogVGVsZXNjb3BlT3ZlcmxheSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0Ly8gUGxhY2Vob2xkZXIgaW1wbGVtZW50YXRpb25cblx0fVxufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZvcm5heFNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgRm9ybmF4U2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRhc3luYyBkaXNwbGF5KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0Zvcm5heCBTZXR0aW5ncycgfSk7XG5cblx0XHQvLyBMb2FkIGFuZCBkaXNwbGF5IFJFQURNRS5tZCBjb250ZW50XG5cdFx0YXdhaXQgdGhpcy5sb2FkUmVhZG1lKGNvbnRhaW5lckVsKTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgbG9hZFJlYWRtZShjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gVHJ5IHRvIGZpbmQgUkVBRE1FLm1kIGluIHRoZSBwbHVnaW4gZGlyZWN0b3J5XG5cdFx0XHRjb25zdCByZWFkbWVGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKCdSRUFETUUubWQnKTtcblxuXHRcdFx0aWYgKHJlYWRtZUZpbGUgJiYgcmVhZG1lRmlsZSBpbnN0YW5jZW9mIHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuY29uc3RydWN0b3IpIHtcblx0XHRcdFx0Ly8gSWYgUkVBRE1FLm1kIGV4aXN0cywgcmVhZCBhbmQgZGlzcGxheSBpdFxuXHRcdFx0XHRjb25zdCByZWFkbWVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChyZWFkbWVGaWxlIGFzIGFueSk7XG5cdFx0XHRcdHRoaXMucmVuZGVyTWFya2Rvd24oY29udGFpbmVyRWwsIHJlYWRtZUNvbnRlbnQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRmFsbGJhY2s6IHNob3cgZGVmYXVsdCBkb2N1bWVudGF0aW9uXG5cdFx0XHRcdHRoaXMuc2hvd0ZhbGxiYWNrRG9jdW1lbnRhdGlvbihjb250YWluZXJFbCk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdDb3VsZCBub3QgbG9hZCBSRUFETUUubWQsIHNob3dpbmcgZmFsbGJhY2sgZG9jdW1lbnRhdGlvbicpO1xuXHRcdFx0dGhpcy5zaG93RmFsbGJhY2tEb2N1bWVudGF0aW9uKGNvbnRhaW5lckVsKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlck1hcmtkb3duKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgbWFya2Rvd246IHN0cmluZyk6IHZvaWQge1xuXHRcdC8vIENyZWF0ZSBhIGNvbnRhaW5lciBmb3IgdGhlIFJFQURNRSBjb250ZW50XG5cdFx0Y29uc3QgcmVhZG1lQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGNsczogJ2Zvcm5heC1yZWFkbWUtY29udGFpbmVyJ1xuXHRcdH0pO1xuXG5cdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgbWFya2Rvd24gcmVuZGVyZXJcblx0XHR0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJ1JFQURNRS5tZCcpLnRoZW4oY29udGVudCA9PiB7XG5cdFx0XHQvLyBTaW1wbGUgbWFya2Rvd24tdG8tSFRNTCBjb252ZXJzaW9uIGZvciBiYXNpYyBmb3JtYXR0aW5nXG5cdFx0XHRjb25zdCBodG1sQ29udGVudCA9IHRoaXMuY29udmVydE1hcmtkb3duVG9IdG1sKGNvbnRlbnQpO1xuXHRcdFx0cmVhZG1lQ29udGFpbmVyLmlubmVySFRNTCA9IGh0bWxDb250ZW50O1xuXHRcdH0pLmNhdGNoKCgpID0+IHtcblx0XHRcdHRoaXMuc2hvd0ZhbGxiYWNrRG9jdW1lbnRhdGlvbihjb250YWluZXJFbCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGNvbnZlcnRNYXJrZG93blRvSHRtbChtYXJrZG93bjogc3RyaW5nKTogc3RyaW5nIHtcblx0XHQvLyBCYXNpYyBtYXJrZG93biB0byBIVE1MIGNvbnZlcnNpb25cblx0XHRyZXR1cm4gbWFya2Rvd25cblx0XHRcdC5yZXBsYWNlKC9eIyAoLiokKS9nbSwgJzxoMT4kMTwvaDE+Jylcblx0XHRcdC5yZXBsYWNlKC9eIyMgKC4qJCkvZ20sICc8aDI+JDE8L2gyPicpXG5cdFx0XHQucmVwbGFjZSgvXiMjIyAoLiokKS9nbSwgJzxoMz4kMTwvaDM+Jylcblx0XHRcdC5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpXG5cdFx0XHQucmVwbGFjZSgvXFwqKC4qPylcXCovZywgJzxlbT4kMTwvZW0+Jylcblx0XHRcdC5yZXBsYWNlKC9gKC4qPylgL2csICc8Y29kZT4kMTwvY29kZT4nKVxuXHRcdFx0LnJlcGxhY2UoL15cXC0gKC4qJCkvZ20sICc8bGk+JDE8L2xpPicpXG5cdFx0XHQucmVwbGFjZSgvKDxsaT4uKjxcXC9saT4pL2dzLCAnPHVsPiQxPC91bD4nKVxuXHRcdFx0LnJlcGxhY2UoL1xcblxcbi9nLCAnPC9wPjxwPicpXG5cdFx0XHQucmVwbGFjZSgvXig/ITxbaHx1fGxdKS9nbSwgJzxwPicpXG5cdFx0XHQucmVwbGFjZSgvKD8hPltofHV8bF0pJC9nbSwgJzwvcD4nKTtcblx0fVxuXG5cdHByaXZhdGUgc2hvd0ZhbGxiYWNrRG9jdW1lbnRhdGlvbihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblx0XHRjb25zdCBkb2NDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0Y2xzOiAnZm9ybmF4LWRvY3VtZW50YXRpb24nXG5cdFx0fSk7XG5cblx0XHRkb2NDb250YWluZXIuaW5uZXJIVE1MID0gYFxuXHRcdFx0PGgzPkZvcm5heCAtIFRlbGVzY29waWMgV3JpdGluZyBQbHVnaW48L2gzPlxuXHRcdFx0PHA+Rm9ybmF4IHByb3ZpZGVzIFwidGVsZXNjb3BpYyB3cml0aW5nXCIgZnVuY3Rpb25hbGl0eSBmb3IgT2JzaWRpYW4sIGFsbG93aW5nIHlvdSB0byB6b29tIGJldHdlZW4gZG9jdW1lbnQgc3RydWN0dXJlLCBwYXJhZ3JhcGhzLCBhbmQgc2VudGVuY2VzIHdpdGggZHJhZy1hbmQtZHJvcCBlZGl0aW5nIGFuZCBzZW50ZW5jZSBhbHRlcm5hdGl2ZXMuPC9wPlxuXG5cdFx0XHQ8aDQ+RmVhdHVyZXM6PC9oND5cblx0XHRcdDx1bD5cblx0XHRcdFx0PGxpPjxzdHJvbmc+VGhyZWUgWm9vbSBMZXZlbHM6PC9zdHJvbmc+IERvY3VtZW50IHZpZXcsIFBhcmFncmFwaCB2aWV3LCBhbmQgU2VudGVuY2UgdmlldzwvbGk+XG5cdFx0XHRcdDxsaT48c3Ryb25nPkRyYWcgJiBEcm9wOjwvc3Ryb25nPiBSZW9yZGVyIHBhcmFncmFwaHMgYW5kIHNlbnRlbmNlcyB3aXRoIHZpc3VhbCBmZWVkYmFjazwvbGk+XG5cdFx0XHRcdDxsaT48c3Ryb25nPlNlbnRlbmNlIEFsdGVybmF0aXZlczo8L3N0cm9uZz4gQ3JlYXRlIGFuZCBjb21wYXJlIGRpZmZlcmVudCB2ZXJzaW9ucyBvZiBzZW50ZW5jZXM8L2xpPlxuXHRcdFx0XHQ8bGk+PHN0cm9uZz5MaW5lLWJhc2VkIFdyaXRpbmc6PC9zdHJvbmc+IEVhY2ggbGluZSBpcyB0cmVhdGVkIGFzIGEgc2VudGVuY2UgdW5pdDwvbGk+XG5cdFx0XHRcdDxsaT48c3Ryb25nPkNvbW1lbnQgU3RvcmFnZTo8L3N0cm9uZz4gQWx0ZXJuYXRpdmVzIHN0b3JlZCBhcyBpbnZpc2libGUgT2JzaWRpYW4gY29tbWVudHM8L2xpPlxuXHRcdFx0PC91bD5cblxuXHRcdFx0PGg0PkhvdyB0byBVc2U6PC9oND5cblx0XHRcdDxvbD5cblx0XHRcdFx0PGxpPk9wZW4gdGhlIEZvcm5heCBwYW5lbCBmcm9tIHRoZSByaWdodCBzaWRlYmFyPC9saT5cblx0XHRcdFx0PGxpPlN3aXRjaCBiZXR3ZWVuIERvY3VtZW50LCBQYXJhZ3JhcGgsIGFuZCBTZW50ZW5jZSB2aWV3czwvbGk+XG5cdFx0XHRcdDxsaT5EcmFnIHRoZSA8Y29kZT46OjwvY29kZT4gaGFuZGxlcyB0byByZW9yZGVyIGNvbnRlbnQ8L2xpPlxuXHRcdFx0XHQ8bGk+Q2xpY2sgdGhlIDxjb2RlPlx1MjcwRlx1RkUwRjwvY29kZT4gaWNvbiB0byBlZGl0IHNlbnRlbmNlIGFsdGVybmF0aXZlczwvbGk+XG5cdFx0XHRcdDxsaT5Vc2UgXCJTYXZlIFNlbGVjdGlvblwiIHRvIHRyeSBhbHRlcm5hdGl2ZXMsIFwiQ29tbWl0XCIgdG8gZmluYWxpemU8L2xpPlxuXHRcdFx0PC9vbD5cblxuXHRcdFx0PHA+PGVtPkZvciBjb21wbGV0ZSBkb2N1bWVudGF0aW9uLCBzZWUgdGhlIFJFQURNRS5tZCBmaWxlIGluIHRoZSBwbHVnaW4gZGlyZWN0b3J5LjwvZW0+PC9wPlxuXHRcdGA7XG5cblx0XHQvLyBBZGQgc29tZSBiYXNpYyBzdHlsaW5nXG5cdFx0ZG9jQ29udGFpbmVyLnN0eWxlLm1heEhlaWdodCA9ICc0MDBweCc7XG5cdFx0ZG9jQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcblx0XHRkb2NDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcyMHB4Jztcblx0XHRkb2NDb250YWluZXIuc3R5bGUubGluZUhlaWdodCA9ICcxLjYnO1xuXHR9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBLElBQUFBLG1CQUFzQzs7O0FDRS9CLElBQU0sbUJBQW1DO0FBQUE7QUFFaEQ7QUFFTyxJQUFNLG1CQUFtQjs7O0FDTmhDLHNCQUFtQztBQUc1QixJQUFNLGVBQU4sTUFBbUI7QUFBQSxFQUN6QixZQUFvQixLQUFrQixVQUEwQjtBQUE1QztBQUFrQjtBQUFBLEVBQTJCO0FBQUEsRUFFakUsTUFBTSxvQkFBb0IsTUFBYTtBQUN0QyxRQUFJLHVCQUFPLGtDQUFrQztBQUFBLEVBQzlDO0FBQUEsRUFFQSxNQUFNLGNBQWMsU0FNakI7QUFFRixVQUFNLGdCQUFnQixRQUFRLE1BQU0sTUFBTSxFQUFFLE9BQU8sT0FBSyxFQUFFLEtBQUssQ0FBQztBQUdoRSxVQUFNLFlBQVksY0FBYyxJQUFJLFVBQVE7QUFDM0MsWUFBTSxRQUFRLEtBQUssTUFBTSxJQUFJO0FBQzdCLGFBQU8sTUFBTSxPQUFPLFVBQVE7QUFDM0IsY0FBTSxVQUFVLEtBQUssS0FBSztBQUUxQixlQUFPLFdBQVcsRUFBRSxRQUFRLFdBQVcsSUFBSSxLQUFLLFFBQVEsU0FBUyxJQUFJO0FBQUEsTUFDdEUsQ0FBQztBQUFBLElBQ0YsQ0FBQztBQUdELFVBQU0sYUFBYSxVQUFVLElBQUksbUJBQWlCLGNBQWMsS0FBSyxJQUFJLENBQUM7QUFHMUUsVUFBTSxRQUFRLE1BQU0sS0FBSyxtQkFBbUIsT0FBTztBQUduRCxVQUFNLFdBQVcsS0FBSyxzQkFBc0Is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QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7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O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUEwQnpCLGlCQUFhLE1BQU0sWUFBWTtBQUMvQixpQkFBYSxNQUFNLFlBQVk7QUFDL0IsaUJBQWEsTUFBTSxVQUFVO0FBQzdCLGlCQUFhLE1BQU0sYUFBYTtBQUFBLEVBQ2pDO0FBQ0Q7OztBTGhHQSxJQUFxQixlQUFyQixjQUEwQyx3QkFBTztBQUFBLEVBSWhELE1BQU0sU0FBUztBQUNkLFVBQU0sS0FBSyxhQUFhO0FBR3hCLFNBQUssU0FBUyxJQUFJLGFBQWEsS0FBSyxLQUFLLEtBQUssUUFBUTtBQUd0RCxTQUFLO0FBQUEsTUFDSjtBQUFBLE1BQ0EsQ0FBQyxTQUFTLElBQUksV0FBVyxNQUFNLElBQUk7QUFBQSxJQUNwQztBQUdBLFNBQUssY0FBYyxhQUFhLGVBQWUsTUFBTTtBQUNwRCxXQUFLLG1CQUFtQjtBQUFBLElBQ3pCLENBQUM7QUFHRCxTQUFLLFdBQVc7QUFBQSxNQUNmLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNmLGFBQUssaUJBQWlCO0FBQUEsTUFDdkI7QUFBQSxJQUNELENBQUM7QUFHRCxTQUFLLGNBQWMsSUFBSSxpQkFBaUIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUFBLEVBQ3hEO0FBQUEsRUFFQSxNQUFNLHFCQUFxQjtBQUMxQixVQUFNLEVBQUUsVUFBVSxJQUFJLEtBQUs7QUFFM0IsUUFBSSxPQUE2QjtBQUNqQyxVQUFNLFNBQVMsVUFBVSxnQkFBZ0IsZ0JBQWdCO0FBRXpELFFBQUksT0FBTyxTQUFTLEdBQUc7QUFDdEIsYUFBTyxPQUFPLENBQUM7QUFBQSxJQUNoQixPQUFPO0FBQ04sYUFBTyxVQUFVLGFBQWEsS0FBSztBQUNuQyxZQUFNLEtBQUssYUFBYSxFQUFFLE1BQU0sa0JBQWtCLFFBQVEsS0FBSyxDQUFDO0FBQUEsSUFDakU7QUFFQSxjQUFVLFdBQVcsSUFBSTtBQUFBLEVBQzFCO0FBQUEsRUFFQSxNQUFNLG1CQUFtQjtBQUN4QixVQUFNLGFBQWEsS0FBSyxJQUFJLFVBQVUsY0FBYztBQUNwRCxRQUFJLENBQUM7QUFBWTtBQUdqQixVQUFNLEtBQUssT0FBTyxvQkFBb0IsVUFBVTtBQUFBLEVBQ2pEO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUMxRTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
